(window.webpackJsonp=window.webpackJsonp||[]).push([["contextual-sidebar-container"],{"/Xfk":function(e,t,n){"use strict";n("pPiP");var a=n("QYOI");n("DLPV");n.d(t,"a",function(){return i});var i=a.Set.of("_inbounddbio.importid_","associatedcompanyid","associations.company","associations.contact","dealstage.probability","formSubmissions.formId","hs_parent_company_id","ilsListMemberships.listId","listMemberships.listId")},"0Fok":function(e,t,n){"use strict";n.d(t,"a",function(){return i});var a=n("omic"),i=n.n(a)()(["pastConversations"])},"1giK":function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return a});n.d(t,"b",function(){return i});n.d(t,"c",function(){return r});n.d(t,"e",function(){return o});n.d(t,"f",function(){return s});n.d(t,"d",function(){return c});var a="COMPANY",i="CONTACT",r="DEAL",o="TICKET",s="VISIT",c="FEEDBACK_SUBMISSION";e&&e.exports&&(e.exports.default=Object.assign({},e.exports))}).call(this,n("ABwO")(e))},"2IJn":function(e,t,n){"use strict";n.d(t,"c",function(){return s});n.d(t,"b",function(){return c});n.d(t,"a",function(){return d});n.d(t,"d",function(){return l});var a=n("cFIx"),i=n.n(a),r="crm",o=function(e){return e.clone({events:i.a,isBeforeUnload:!0,properties:{namespace:r}})},s=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.subType,a=t.type;e&&o(e).track("sidebar-interaction",{action:"open record",subType:n,type:a})},c=function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).type;e&&o(e).track("sidebar-interaction",{action:"click external email",type:t})},d=function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).type;e&&o(e).track("sidebar-interaction",{action:"disassociate",type:t})},l=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.action,a=t.type;e&&o(e).track("sidebar-interaction",{action:n,type:a})}},"3W4S":function(e,t,n){"use strict";"use es6";t.a={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"PropertyValueFields"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"PropertyValue"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"value"}},{kind:"Field",name:{kind:"Name",value:"source"}},{kind:"Field",name:{kind:"Name",value:"sourceId"}},{kind:"Field",name:{kind:"Name",value:"timestamp"}},{kind:"Field",name:{kind:"Name",value:"definition"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"type"}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"deleted"}},{kind:"Field",name:{kind:"Name",value:"textDisplayHint"}},{kind:"Field",name:{kind:"Name",value:"showCurrencySymbol"}},{kind:"Field",name:{kind:"Name",value:"currencyPropertyName"}},{kind:"Field",name:{kind:"Name",value:"label"}},{kind:"Field",name:{kind:"Name",value:"fieldType"}},{kind:"Field",name:{kind:"Name",value:"formField"}},{kind:"Field",name:{kind:"Name",value:"hidden"}},{kind:"Field",name:{kind:"Name",value:"hubspotDefined"}},{kind:"Field",name:{kind:"Name",value:"groupName"}},{kind:"Field",name:{kind:"Name",value:"externalOptions"}},{kind:"Field",name:{kind:"Name",value:"displayOrder"}},{kind:"Field",name:{kind:"Name",value:"displayMode"}},{kind:"Field",name:{kind:"Name",value:"description"}},{kind:"Field",name:{kind:"Name",value:"calculated"}},{kind:"Field",name:{kind:"Name",value:"objectTypeId"}},{kind:"Field",name:{kind:"Name",value:"readOnlyDefinition"}},{kind:"Field",name:{kind:"Name",value:"readOnlyValue"}},{kind:"Field",name:{kind:"Name",value:"referencedObjectType"}},{kind:"Field",name:{kind:"Name",value:"numberDisplayHint"}},{kind:"Field",name:{kind:"Name",value:"mutableDefinitionNotDeletable"}},{kind:"Field",name:{kind:"Name",value:"options"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"description"}},{kind:"Field",name:{kind:"Name",value:"displayOrder"}},{kind:"Field",name:{kind:"Name",value:"doubleData"}},{kind:"Field",name:{kind:"Name",value:"hidden"}},{kind:"Field",name:{kind:"Name",value:"label"}},{kind:"Field",name:{kind:"Name",value:"readOnly"}},{kind:"Field",name:{kind:"Name",value:"value"}}]}}]}},{kind:"Field",name:{kind:"Name",value:"permission"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"accessLevel"}}]}}]}}]}},"3zLH":function(e,t,n){"use strict";var a,i=n("OwGx"),r=n("YM6t"),o=n("aeBh"),s=n("Zwtj"),c=n("Q6fd"),d=n("McP0"),l=n("2IIJ"),u=n("2RhA"),m=n("1giK"),b=(a={},Object(i.a)(a,m.a,"companyId"),Object(i.a)(a,m.b,"vid"),Object(i.a)(a,m.c,"dealId"),Object(i.a)(a,m.e,"objectId"),Object(i.a)(a,m.f,"domain"),Object(i.a)(a,m.d,"objectId"),a),p=n("/Xfk"),j=n("omic"),k=n.n(j),f=n("ihjl");n.d(t,"a",function(){return h});n.d(t,"c",function(){return S});n.d(t,"b",function(){return N});n.d(t,"d",function(){return C});var v=function(e){switch(e){case m.b:case"0-1":return o.a;case m.a:case"0-2":return s.a;case m.c:case"0-3":return c.a;case m.e:case"0-5":return l.a;case m.d:return d.a;default:return f.a}},O=function(e,t){var n=t.definition,a=t.name,i=t.value,r=t.source,o=t.sourceId,s=t.timestamp;e[a]={definition:n,value:i,source:r,sourceId:o,timestamp:s};return e},y=function(e){return e.reduce(O,{})},g=function(e){return k()(["propertyValue","definition"],e)&&!k()(["propertyValue","definition","deleted"],e)&&!k()(["propertyValue","definition","hidden"],e)&&!(p.a.contains(e.propertyValue.name)&&k()(["propertyValue","definition","hubspotDefined"],e))},h=function(e){return e.map(function(e){return e.propertyCardEntries||[]}).reduce(function(e,t){return[].concat(Object(r.a)(e),Object(r.a)(t))},[]).filter(Boolean).map(function(e){return e.propertyValue})},S=function(e){return e.reduce(function(e,t){var n=t.definition,a=t.permission;n&&a&&(e[n.name]=a.accessLevel);return e},{})},N=function(e){return e.filter(g).map(function(e){return u.a.fromJS(Object.assign({},e.propertyValue.definition))})},C=function(e,t,n){var a,r=y(t);return v(e).fromJS((a={},Object(i.a)(a,b[e]||"objectId",n),Object(i.a)(a,"properties",r),a))}},"4cYC":function(e,t,n){"use strict";"use es6";var a={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"ListsCardFragments"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"ListsCard"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"legacyCardName"}},{kind:"Field",name:{kind:"Name",value:"cardId"}},{kind:"Field",name:{kind:"Name",value:"listMemberships"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"totalCount"}}]}},{kind:"Field",name:{kind:"Name",value:"accessibleContentObjects"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"totalCount"}}]}},{kind:"Field",name:{kind:"Name",value:"crmObject"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Contact"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"defaultProperties"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"firstname"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"value"}}]}},{kind:"Field",name:{kind:"Name",value:"lastname"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"value"}}]}},{kind:"Field",name:{kind:"Name",value:"email"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"value"}}]}}]}}]}}]}}]}}]},i=n("3W4S"),r={kind:"Document",definitions:function(e){var t={};return e.filter(function(e){if("FragmentDefinition"!==e.kind)return!0;var n=e.name.value;if(t[n])return!1;t[n]=!0;return!0})}([{kind:"FragmentDefinition",name:{kind:"Name",value:"PropertiesCardFields"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"PropertiesCard"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"legacyCardName"}},{kind:"Field",name:{kind:"Name",value:"cardId"}},{kind:"Field",name:{kind:"Name",value:"label"}},{kind:"Field",name:{kind:"Name",value:"propertyCardEntries"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"propertyValue"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"FragmentSpread",name:{kind:"Name",value:"PropertyValueFields"}}]}}]}},{kind:"Field",name:{kind:"Name",value:"crmObject"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Ticket"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"defaultProperties"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"hs_pipeline_stage"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"FragmentSpread",name:{kind:"Name",value:"PropertyValueFields"}}]}},{kind:"Field",name:{kind:"Name",value:"hs_pipeline"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"FragmentSpread",name:{kind:"Name",value:"PropertyValueFields"}}]}}]}}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Deal"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"defaultProperties"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"pipeline"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"FragmentSpread",name:{kind:"Name",value:"PropertyValueFields"}}]}},{kind:"Field",name:{kind:"Name",value:"dealstage"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"FragmentSpread",name:{kind:"Name",value:"PropertyValueFields"}}]}},{kind:"Field",name:{kind:"Name",value:"deal_currency_code"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"FragmentSpread",name:{kind:"Name",value:"PropertyValueFields"}}]}},{kind:"Field",name:{kind:"Name",value:"hs_analytics_source"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"FragmentSpread",name:{kind:"Name",value:"PropertyValueFields"}}]}},{kind:"Field",name:{kind:"Name",value:"hs_analytics_source_data_1"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"FragmentSpread",name:{kind:"Name",value:"PropertyValueFields"}}]}}]}}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Company"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"defaultProperties"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"hs_additional_domains"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"FragmentSpread",name:{kind:"Name",value:"PropertyValueFields"}}]}},{kind:"Field",name:{kind:"Name",value:"hs_analytics_source"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"FragmentSpread",name:{kind:"Name",value:"PropertyValueFields"}}]}},{kind:"Field",name:{kind:"Name",value:"hs_analytics_source_data_1"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"FragmentSpread",name:{kind:"Name",value:"PropertyValueFields"}}]}}]}}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Contact"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"defaultProperties"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"hs_additional_emails"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"FragmentSpread",name:{kind:"Name",value:"PropertyValueFields"}}]}},{kind:"Field",name:{kind:"Name",value:"hs_analytics_source"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"FragmentSpread",name:{kind:"Name",value:"PropertyValueFields"}}]}},{kind:"Field",name:{kind:"Name",value:"hs_analytics_source_data_1"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"FragmentSpread",name:{kind:"Name",value:"PropertyValueFields"}}]}}]}}]}}]}}]}}].concat(i.a.definitions))},o={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"WebsiteActivityCardFragments"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"WebsiteActivityCard"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"cardId"}},{kind:"Field",name:{kind:"Name",value:"crmObject"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Contact"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"defaultProperties"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"first_conversion_date"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"value"}}]}},{kind:"Field",name:{kind:"Name",value:"hs_analytics_first_visit_timestamp"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"value"}}]}}]}}]}}]}}]}}]},s={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"WorkflowMembershipsCardFragments"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"WorkflowsCard"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"cardId"}},{kind:"Field",name:{kind:"Name",value:"workflowMemberships"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"totalCount"}}]}},{kind:"Field",name:{kind:"Name",value:"crmObject"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Contact"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"defaultProperties"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"firstname"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"value"}}]}},{kind:"Field",name:{kind:"Name",value:"lastname"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"value"}}]}},{kind:"Field",name:{kind:"Name",value:"email"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"value"}},{kind:"Field",name:{kind:"Name",value:"id"}}]}}]}}]}}]}}]}}]},c={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"CrmObjectPermissionFields"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"CrmObject"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"objectTypePermissions"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"currentUserCanCreate"}}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Contact"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"defaultProperties"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"hs_all_owner_ids"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"value"}}]}},{kind:"Field",name:{kind:"Name",value:"hs_all_accessible_team_ids"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"value"}}]}},{kind:"Field",name:{kind:"Name",value:"hubspot_owner_id"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"value"}}]}}]}}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Company"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"defaultProperties"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"hs_all_owner_ids"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"value"}}]}},{kind:"Field",name:{kind:"Name",value:"hs_all_accessible_team_ids"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"value"}}]}},{kind:"Field",name:{kind:"Name",value:"hubspot_owner_id"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"value"}}]}}]}}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Deal"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"defaultProperties"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"hs_all_owner_ids"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"value"}}]}},{kind:"Field",name:{kind:"Name",value:"hs_all_accessible_team_ids"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"value"}}]}},{kind:"Field",name:{kind:"Name",value:"hubspot_owner_id"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"value"}}]}}]}}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Ticket"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"defaultProperties"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"hs_all_owner_ids"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"value"}}]}},{kind:"Field",name:{kind:"Name",value:"hs_all_accessible_team_ids"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"value"}}]}},{kind:"Field",name:{kind:"Name",value:"hubspot_owner_id"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"value"}}]}}]}}]}}]}}]},d={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"UserPermissionsFields"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"CrmObject"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"userPermissions"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"currentUserCanView"}},{kind:"Field",name:{kind:"Name",value:"currentUserCanEdit"}},{kind:"Field",name:{kind:"Name",value:"currentUserCanCommunicate"}},{kind:"Field",name:{kind:"Name",value:"currentUserCanDelete"}}]}}]}}]},l=function(e){var t={};return e.filter(function(e){if("FragmentDefinition"!==e.kind)return!0;var n=e.name.value;if(t[n])return!1;t[n]=!0;return!0})},u={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"AssociatedObjectsCardPipelineStageFields"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"PipelineStage"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"label"}},{kind:"Field",name:{kind:"Name",value:"displayOrder"}},{kind:"Field",name:{kind:"Name",value:"stageId"}},{kind:"Field",name:{kind:"Name",value:"metadata"}},{kind:"Field",name:{kind:"Name",value:"propertyValueRequirements"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"isValueRequired"}},{kind:"Field",name:{kind:"Name",value:"propertyName"}}]}}]}}]},m={kind:"Document",definitions:l([{kind:"FragmentDefinition",name:{kind:"Name",value:"AssociatedObjectsCardTicketFields"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"CrmObject"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Ticket"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"defaultProperties"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"hs_all_owner_ids"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"value"}}]}},{kind:"Field",name:{kind:"Name",value:"hs_all_team_ids"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"value"}}]}},{kind:"Field",name:{kind:"Name",value:"closed_date"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"value"}}]}},{kind:"Field",name:{kind:"Name",value:"createdate"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"value"}}]}},{kind:"Field",name:{kind:"Name",value:"subject"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"value"}},{kind:"FragmentSpread",name:{kind:"Name",value:"AssociatedObjectsCardPropertyDefinitionFields"}}]}},{kind:"Field",name:{kind:"Name",value:"hs_pipeline_stage"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"value"}},{kind:"Field",name:{kind:"Name",value:"permission"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"accessLevel"}}]}}]}},{kind:"Field",name:{kind:"Name",value:"content"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"value"}}]}},{kind:"Field",name:{kind:"Name",value:"hubspot_owner_id"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"value"}},{kind:"Field",name:{kind:"Name",value:"referencedObject"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Owner"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"firstName"}},{kind:"Field",name:{kind:"Name",value:"lastName"}}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"hs_ticket_priority"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"value"}}]}}]}},{kind:"Field",name:{kind:"Name",value:"associations"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"ticketToCompany"},arguments:[{kind:"Argument",name:{kind:"Name",value:"first"},value:{kind:"IntValue",value:"6"}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"edges"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"node"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"defaultProperties"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"domain"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"value"}}]}},{kind:"Field",name:{kind:"Name",value:"name"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"value"}}]}}]}}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"ticketToContact"},arguments:[{kind:"Argument",name:{kind:"Name",value:"first"},value:{kind:"IntValue",value:"6"}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"edges"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"node"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"defaultProperties"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"email"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"value"}}]}},{kind:"Field",name:{kind:"Name",value:"firstname"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"value"}}]}},{kind:"Field",name:{kind:"Name",value:"lastname"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"value"}}]}}]}}]}}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"pipelineInfo"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"pipeline"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"pipelineId"}},{kind:"Field",name:{kind:"Name",value:"stages"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"AssociatedObjectsCardPipelineStageFields"}}]}}]}}]}}]}}]}}].concat(u.definitions))},b={kind:"Document",definitions:l([{kind:"FragmentDefinition",name:{kind:"Name",value:"AssociatedObjectsCardDealFields"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"CrmObject"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Deal"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"defaultProperties"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"hs_all_owner_ids"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"value"}}]}},{kind:"Field",name:{kind:"Name",value:"hs_all_team_ids"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"value"}}]}},{kind:"Field",name:{kind:"Name",value:"dealname"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"value"}},{kind:"FragmentSpread",name:{kind:"Name",value:"AssociatedObjectsCardPropertyDefinitionFields"}}]}},{kind:"Field",name:{kind:"Name",value:"deal_currency_code"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"value"}}]}},{kind:"Field",name:{kind:"Name",value:"dealstage"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"value"}},{kind:"Field",name:{kind:"Name",value:"permission"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"accessLevel"}}]}}]}},{kind:"Field",name:{kind:"Name",value:"amount"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"value"}}]}}]}},{kind:"Field",name:{kind:"Name",value:"associations"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"dealToCompany"},arguments:[{kind:"Argument",name:{kind:"Name",value:"first"},value:{kind:"IntValue",value:"6"}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"edges"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"node"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"defaultProperties"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"domain"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"value"}}]}},{kind:"Field",name:{kind:"Name",value:"name"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"value"}}]}}]}}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"dealToContact"},arguments:[{kind:"Argument",name:{kind:"Name",value:"first"},value:{kind:"IntValue",value:"6"}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"edges"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"node"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"defaultProperties"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"email"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"value"}}]}},{kind:"Field",name:{kind:"Name",value:"firstname"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"value"}}]}},{kind:"Field",name:{kind:"Name",value:"lastname"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"value"}}]}}]}}]}}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"pipelineInfo"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"pipeline"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"pipelineId"}},{kind:"Field",name:{kind:"Name",value:"stages"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"AssociatedObjectsCardPipelineStageFields"}}]}}]}}]}}]}}]}}].concat(u.definitions))},p={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"AssociatedObjectsCardCompanyFields"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"CrmObject"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Company"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"defaultProperties"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"value"}},{kind:"FragmentSpread",name:{kind:"Name",value:"AssociatedObjectsCardPropertyDefinitionFields"}}]}},{kind:"Field",name:{kind:"Name",value:"domain"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"value"}},{kind:"FragmentSpread",name:{kind:"Name",value:"AssociatedObjectsCardPropertyDefinitionFields"}}]}},{kind:"Field",name:{kind:"Name",value:"hs_all_owner_ids"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"value"}}]}},{kind:"Field",name:{kind:"Name",value:"hs_all_team_ids"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"value"}}]}}]}}]}}]}}]},j={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"AssociatedObjectsCardContactFields"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"CrmObject"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Contact"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"defaultProperties"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"hs_all_owner_ids"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"value"}}]}},{kind:"Field",name:{kind:"Name",value:"hs_all_team_ids"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"value"}}]}},{kind:"Field",name:{kind:"Name",value:"email"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"value"}}]}},{kind:"Field",name:{kind:"Name",value:"firstname"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"value"}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"FragmentSpread",name:{kind:"Name",value:"AssociatedObjectsCardPropertyDefinitionFields"}}]}},{kind:"Field",name:{kind:"Name",value:"company"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"value"}}]}},{kind:"Field",name:{kind:"Name",value:"jobtitle"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"value"}}]}},{kind:"Field",name:{kind:"Name",value:"lastname"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"value"}}]}}]}},{kind:"Field",name:{kind:"Name",value:"defaultAssociations"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"toCompanies"},arguments:[{kind:"Argument",name:{kind:"Name",value:"first"},value:{kind:"IntValue",value:"1"}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"edges"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"node"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"defaultProperties"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"value"}}]}}]}}]}}]}}]}}]}}]}}]}}]},k={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"AssociatedObjectsCardPropertyDefinitionFields"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"PropertyValue"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"definition"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"type"}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"deleted"}},{kind:"Field",name:{kind:"Name",value:"textDisplayHint"}},{kind:"Field",name:{kind:"Name",value:"showCurrencySymbol"}},{kind:"Field",name:{kind:"Name",value:"label"}},{kind:"Field",name:{kind:"Name",value:"fieldType"}},{kind:"Field",name:{kind:"Name",value:"formField"}},{kind:"Field",name:{kind:"Name",value:"hidden"}},{kind:"Field",name:{kind:"Name",value:"hubspotDefined"}},{kind:"Field",name:{kind:"Name",value:"groupName"}},{kind:"Field",name:{kind:"Name",value:"externalOptions"}},{kind:"Field",name:{kind:"Name",value:"displayOrder"}},{kind:"Field",name:{kind:"Name",value:"displayMode"}},{kind:"Field",name:{kind:"Name",value:"description"}},{kind:"Field",name:{kind:"Name",value:"calculated"}},{kind:"Field",name:{kind:"Name",value:"objectTypeId"}},{kind:"Field",name:{kind:"Name",value:"readOnlyDefinition"}},{kind:"Field",name:{kind:"Name",value:"readOnlyValue"}},{kind:"Field",name:{kind:"Name",value:"referencedObjectType"}},{kind:"Field",name:{kind:"Name",value:"numberDisplayHint"}},{kind:"Field",name:{kind:"Name",value:"mutableDefinitionNotDeletable"}},{kind:"Field",name:{kind:"Name",value:"options"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"description"}},{kind:"Field",name:{kind:"Name",value:"displayOrder"}},{kind:"Field",name:{kind:"Name",value:"doubleData"}},{kind:"Field",name:{kind:"Name",value:"hidden"}},{kind:"Field",name:{kind:"Name",value:"label"}},{kind:"Field",name:{kind:"Name",value:"readOnly"}},{kind:"Field",name:{kind:"Name",value:"value"}}]}}]}}]}}]},f={kind:"Document",definitions:l([{kind:"FragmentDefinition",name:{kind:"Name",value:"AssociatedObjectsCardCrmObjectFields"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"CrmObject"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"primaryDisplayProperty"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"value"}},{kind:"FragmentSpread",name:{kind:"Name",value:"AssociatedObjectsCardPropertyDefinitionFields"}}]}}]}}].concat(k.definitions))},v={kind:"Document",definitions:l([{kind:"FragmentDefinition",name:{kind:"Name",value:"AssociatedObjectsCardFragments"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"AssociatedObjectsCard"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"cardId"}},{kind:"Field",name:{kind:"Name",value:"label"}},{kind:"Field",name:{kind:"Name",value:"associatedObjects"},arguments:[{kind:"Argument",name:{kind:"Name",value:"first"},value:{kind:"IntValue",value:"5"}},{kind:"Argument",name:{kind:"Name",value:"after"},value:{kind:"Variable",name:{kind:"Name",value:"cursor"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"edges"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"node"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"FragmentSpread",name:{kind:"Name",value:"AssociatedObjectsCardContactFields"}},{kind:"FragmentSpread",name:{kind:"Name",value:"AssociatedObjectsCardCompanyFields"}},{kind:"FragmentSpread",name:{kind:"Name",value:"AssociatedObjectsCardCrmObjectFields"}},{kind:"FragmentSpread",name:{kind:"Name",value:"AssociatedObjectsCardDealFields"}},{kind:"FragmentSpread",name:{kind:"Name",value:"AssociatedObjectsCardTicketFields"}},{kind:"FragmentSpread",name:{kind:"Name",value:"CrmObjectPermissionFields"}},{kind:"FragmentSpread",name:{kind:"Name",value:"UserPermissionsFields"}}]}},{kind:"Field",name:{kind:"Name",value:"associationDefinitions"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"associationCategory"}},{kind:"Field",name:{kind:"Name",value:"associationTypeId"}},{kind:"Field",name:{kind:"Name",value:"label"}},{kind:"Field",name:{kind:"Name",value:"name"}}]}},{kind:"Field",name:{kind:"Name",value:"summaryProperties"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"value"}},{kind:"FragmentSpread",name:{kind:"Name",value:"AssociatedObjectsCardPropertyDefinitionFields"}}]}},{kind:"Field",name:{kind:"Name",value:"secondaryProperties"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"value"}},{kind:"FragmentSpread",name:{kind:"Name",value:"AssociatedObjectsCardPropertyDefinitionFields"}}]}}]}},{kind:"Field",name:{kind:"Name",value:"primaryEdge"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"node"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"FragmentSpread",name:{kind:"Name",value:"AssociatedObjectsCardContactFields"}},{kind:"FragmentSpread",name:{kind:"Name",value:"AssociatedObjectsCardCompanyFields"}},{kind:"FragmentSpread",name:{kind:"Name",value:"AssociatedObjectsCardTicketFields"}},{kind:"FragmentSpread",name:{kind:"Name",value:"AssociatedObjectsCardDealFields"}},{kind:"FragmentSpread",name:{kind:"Name",value:"CrmObjectPermissionFields"}},{kind:"FragmentSpread",name:{kind:"Name",value:"UserPermissionsFields"}}]}},{kind:"Field",name:{kind:"Name",value:"summaryProperties"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"value"}},{kind:"FragmentSpread",name:{kind:"Name",value:"AssociatedObjectsCardPropertyDefinitionFields"}}]}},{kind:"Field",name:{kind:"Name",value:"associationDefinitions"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"associationCategory"}},{kind:"Field",name:{kind:"Name",value:"associationTypeId"}},{kind:"Field",name:{kind:"Name",value:"label"}},{kind:"Field",name:{kind:"Name",value:"name"}}]}},{kind:"Field",name:{kind:"Name",value:"secondaryProperties"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"value"}},{kind:"FragmentSpread",name:{kind:"Name",value:"AssociatedObjectsCardPropertyDefinitionFields"}}]}}]}},{kind:"Field",name:{kind:"Name",value:"secondaryEdges"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"node"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"FragmentSpread",name:{kind:"Name",value:"AssociatedObjectsCardContactFields"}},{kind:"FragmentSpread",name:{kind:"Name",value:"AssociatedObjectsCardCompanyFields"}},{kind:"FragmentSpread",name:{kind:"Name",value:"AssociatedObjectsCardTicketFields"}},{kind:"FragmentSpread",name:{kind:"Name",value:"AssociatedObjectsCardDealFields"}},{kind:"FragmentSpread",name:{kind:"Name",value:"CrmObjectPermissionFields"}},{kind:"FragmentSpread",name:{kind:"Name",value:"UserPermissionsFields"}}]}},{kind:"Field",name:{kind:"Name",value:"summaryProperties"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"value"}},{kind:"FragmentSpread",name:{kind:"Name",value:"AssociatedObjectsCardPropertyDefinitionFields"}}]}},{kind:"Field",name:{kind:"Name",value:"associationDefinitions"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"associationCategory"}},{kind:"Field",name:{kind:"Name",value:"associationTypeId"}},{kind:"Field",name:{kind:"Name",value:"inverseAssociationTypeId"}},{kind:"Field",name:{kind:"Name",value:"label"}},{kind:"Field",name:{kind:"Name",value:"name"}}]}},{kind:"Field",name:{kind:"Name",value:"secondaryProperties"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"value"}},{kind:"FragmentSpread",name:{kind:"Name",value:"AssociatedObjectsCardPropertyDefinitionFields"}}]}}]}},{kind:"Field",name:{kind:"Name",value:"pageInfo"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"endCursor"}},{kind:"Field",name:{kind:"Name",value:"hasNextPage"}}]}}]}},{kind:"Field",alias:{kind:"Name",value:"count"},name:{kind:"Name",value:"associatedObjects"},arguments:[{kind:"Argument",name:{kind:"Name",value:"first"},value:{kind:"IntValue",value:"99"}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"edges"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"node"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}}]}}]}},{kind:"Field",name:{kind:"Name",value:"pageInfo"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"hasNextPage"}}]}}]}},{kind:"Field",name:{kind:"Name",value:"associationDefinitions"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"toObjectTypeDefinition"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"pluralForm"}},{kind:"Field",name:{kind:"Name",value:"singularForm"}},{kind:"Field",name:{kind:"Name",value:"objectSummaryPropertyNames"}}]}},{kind:"Field",name:{kind:"Name",value:"fromObjectTypeDefinition"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"pluralForm"}},{kind:"Field",name:{kind:"Name",value:"singularForm"}}]}},{kind:"Field",name:{kind:"Name",value:"toObjectTypeId"}},{kind:"Field",name:{kind:"Name",value:"associationTypeId"}},{kind:"Field",name:{kind:"Name",value:"associationCategory"}}]}}]}}].concat(j.definitions,p.definitions,f.definitions,b.definitions,m.definitions,c.definitions,d.definitions,k.definitions))},O={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"IntegrationCardFragments"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"IntegrationCard"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"salesSidebarItem"},selectionSet:{kind:"SelectionSet",selections:[{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"LinkedSalesObjectSidebarItem"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"iconUri"}},{kind:"Field",name:{kind:"Name",value:"appId"}},{kind:"Field",name:{kind:"Name",value:"appName"}},{kind:"Field",name:{kind:"Name",value:"objectTypeId"}},{kind:"Field",name:{kind:"Name",value:"singleColorIconUri"}},{kind:"Field",name:{kind:"Name",value:"title"}}]}}]}}]}}]};n.d(t,"a",function(){return h});n.d(t,"b",function(){return S});var y=function(e){var t={};return e.filter(function(e){if("FragmentDefinition"!==e.kind)return!0;var n=e.name.value;if(t[n])return!1;t[n]=!0;return!0})},g={kind:"Document",definitions:y([{kind:"FragmentDefinition",name:{kind:"Name",value:"CardFields"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"CrmRecordCard"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"Field",name:{kind:"Name",value:"cardId"}},{kind:"Field",name:{kind:"Name",value:"isCollapsed"}},{kind:"Field",name:{kind:"Name",value:"legacyCardName"}},{kind:"Field",name:{kind:"Name",value:"crmObject"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"Field",name:{kind:"Name",value:"id"}}]}},{kind:"FragmentSpread",name:{kind:"Name",value:"ListsCardFragments"}},{kind:"FragmentSpread",name:{kind:"Name",value:"PropertiesCardFields"}},{kind:"FragmentSpread",name:{kind:"Name",value:"WebsiteActivityCardFragments"}},{kind:"FragmentSpread",name:{kind:"Name",value:"WorkflowMembershipsCardFragments"}},{kind:"FragmentSpread",name:{kind:"Name",value:"AssociatedObjectsCardFragments"}},{kind:"FragmentSpread",name:{kind:"Name",value:"IntegrationCardFragments"}}]}}].concat(a.definitions,r.definitions,o.definitions,s.definitions,v.definitions,O.definitions))},h={id:"6857ea27536e6941254e7ecd264025da432ea986d7c4268257a0d7602cc7cca4",kind:"Document",definitions:y([{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"fetchUniversalSidebar"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"objectType"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"subjectId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Long"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"cardLocation"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"CardLocation"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"cursor"}},type:{kind:"NamedType",name:{kind:"Name",value:"String"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"crmObject"},arguments:[{kind:"Argument",name:{kind:"Name",value:"type"},value:{kind:"Variable",name:{kind:"Name",value:"objectType"}}},{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"subjectId"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"objectTypeDefinition"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"singularForm"}},{kind:"Field",name:{kind:"Name",value:"pluralForm"}},{kind:"Field",name:{kind:"Name",value:"objectSummaryPropertyNames"}}]}},{kind:"Field",name:{kind:"Name",value:"primaryDisplayProperty"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"value"}}]}},{kind:"Field",name:{kind:"Name",value:"allProperties"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"value"}},{kind:"Field",name:{kind:"Name",value:"name"}}]}},{kind:"Field",alias:{kind:"Name",value:"cards"},name:{kind:"Name",value:"recordCards"},arguments:[{kind:"Argument",name:{kind:"Name",value:"cardLocation"},value:{kind:"Variable",name:{kind:"Name",value:"cardLocation"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"CardFields"}}]}},{kind:"FragmentSpread",name:{kind:"Name",value:"CrmObjectPermissionFields"}},{kind:"FragmentSpread",name:{kind:"Name",value:"UserPermissionsFields"}}]}},{kind:"Field",name:{kind:"Name",value:"viewer"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"ownerId"}}]}}]}}].concat(g.definitions,c.definitions,d.definitions))},S={id:"ee2872e5bc4fc09faddc623265e20c9ea9655c9e67acd83cdde96574cedf60e0",kind:"Document",definitions:y([{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"fetchCard"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"objectType"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"subjectId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Long"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"cardId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"cursor"}},type:{kind:"NamedType",name:{kind:"Name",value:"String"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"crmObject"},arguments:[{kind:"Argument",name:{kind:"Name",value:"type"},value:{kind:"Variable",name:{kind:"Name",value:"objectType"}}},{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"subjectId"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",alias:{kind:"Name",value:"card"},name:{kind:"Name",value:"recordCard"},arguments:[{kind:"Argument",name:{kind:"Name",value:"cardId"},value:{kind:"Variable",name:{kind:"Name",value:"cardId"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"CardFields"}}]}},{kind:"FragmentSpread",name:{kind:"Name",value:"CrmObjectPermissionFields"}}]}},{kind:"Field",name:{kind:"Name",value:"viewer"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"ownerId"}}]}}]}}].concat(g.definitions,c.definitions))}},"4im5":function(e,t,n){"use strict";n.r(t);(function(e){n.d(t,"VERTICAL",function(){return a});n.d(t,"HORIZONTAL",function(){return i});var a="VERTICAL",i="HORIZONTAL";e&&e.exports&&(e.exports.default=Object.assign({},e.exports))}).call(this,n("ABwO")(e))},"4plp":function(e,t,n){"use strict";n.d(t,"f",function(){return c});n.d(t,"b",function(){return d});n.d(t,"e",function(){return j});n.d(t,"a",function(){return v});n.d(t,"d",function(){return O});n.d(t,"c",function(){return y});var a=n("omic"),i=n.n(a),r=n("QYOI"),o=n("rBqy"),s=function(e){var t={};return e.filter(function(e){if("FragmentDefinition"!==e.kind)return!0;var n=e.name.value;if(t[n])return!1;t[n]=!0;return!0})},c=function(e,t){var n=t.crmObject;return{countObject:{count:i()(["associations","count","edges","length"],n)||0,hasMore:i()(["associations","count","pageInfo","hasNextPage"],n)}}},d={id:"8abf6d8eb7d037c59219985119daaaa80c280054e54ceac2590716146781c030",kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"ConversationDealCardTitle_Query"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"objectType"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"subjectId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Long"}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"crmObject"},arguments:[{kind:"Argument",name:{kind:"Name",value:"type"},value:{kind:"Variable",name:{kind:"Name",value:"objectType"}}},{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"subjectId"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Contact"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"associations"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"count"},name:{kind:"Name",value:"contactToDeal"},arguments:[{kind:"Argument",name:{kind:"Name",value:"first"},value:{kind:"IntValue",value:"99"}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"edges"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"node"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}}]}}]}},{kind:"Field",name:{kind:"Name",value:"pageInfo"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"hasNextPage"}}]}}]}}]}}]}}]}}]}}]},l=function(e){return e.stages.map(function(e){return Object.assign({value:e.stageId,text:e.label,probability:parseFloat(e.metadata.probability)},e)})},u=function(e){return Object.assign({stageOptions:l(e),value:e.pipelineId},e)},m=function(e,t){return t.reduce(function(e,t){var n=i()(["node","pipelineInfo","pipeline"],t);n&&(e[n.pipelineId]=u(n));return e},e)},b=function(e,t){return t.reduce(function(e,t){var n=i()(["node","defaultAssociations","toCompanies","edges"],t);n.length&&(e[i()(["node","id"],t)]=Object(r.List)(n.map(function(e){return Object(o.a)(e.node)})));return e},e)},p=function(e,t){return t.reduce(function(e,t){var n=i()(["node","defaultAssociations","toContacts","edges"],t);n.length&&(e[i()(["node","id"],t)]=Object(r.List)(n.map(function(e){return Object(o.b)(e.node)})));return e},e)},j=function(e,t){var n,a,r=t.crmObject,s=r&&Object(o.f)(e,r),c={count:i()(["associations","count","edges","length"],r)||0,hasMore:i()(["associations","count","pageInfo","hasNextPage"],r)},d={},l={},u={},j=i()(["associations","toDealIntersectedWithConversation","andConversation","edges"],r),k=i()(["associations","toDealIntersectedWithConversation","andConversationCount","edges","length"],r)||0,f=i()(["associations","toDealIntersectedWithConversation","andConversation","pageInfo","endCursor"],r),v=i()(["associations","toDealIntersectedWithConversation","andNotConversation","edges"],r);if(j&&j.length){a=j.map(function(e){return Object(o.c)(e.node)});u=m(u,j);d=b(d,j);l=p(l,j)}if(v&&v.length){n=v.map(function(e){return Object(o.c)(e.node)});u=m(u,v);d=b(d,v);l=p(l,v)}return{companyAssociationsById:d,contactAssociationsById:l,conversationItems:a,conversationItemsCount:k,conversationItemsCursor:f,countObject:c,currentOwnerId:t.viewer.ownerId,hasMore:c.hasMore,items:n,pipelinesById:u,subject:s}},k={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"ConversationDealChickletFields"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Deal"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"pipelineInfo"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"pipeline"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"pipelineId"}},{kind:"Field",name:{kind:"Name",value:"label"}},{kind:"Field",name:{kind:"Name",value:"stages"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"stageId"}},{kind:"Field",name:{kind:"Name",value:"label"}},{kind:"Field",name:{kind:"Name",value:"displayOrder"}},{kind:"Field",name:{kind:"Name",value:"isActive"}},{kind:"Field",name:{kind:"Name",value:"metadata"}}]}},{kind:"Field",name:{kind:"Name",value:"isActive"}}]}}]}},{kind:"Field",name:{kind:"Name",value:"defaultProperties"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"amount"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"value"}}]}},{kind:"Field",name:{kind:"Name",value:"closedate"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"value"}}]}},{kind:"Field",name:{kind:"Name",value:"dealname"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"value"}}]}},{kind:"Field",name:{kind:"Name",value:"dealstage"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"value"}}]}},{kind:"Field",name:{kind:"Name",value:"deal_currency_code"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"value"}}]}},{kind:"Field",name:{kind:"Name",value:"pipeline"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"value"}}]}}]}},{kind:"Field",name:{kind:"Name",value:"defaultAssociations"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"toContacts"},arguments:[{kind:"Argument",name:{kind:"Name",value:"first"},value:{kind:"IntValue",value:"5"}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"edges"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"node"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"defaultProperties"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"firstname"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"value"}}]}},{kind:"Field",name:{kind:"Name",value:"lastname"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"value"}}]}},{kind:"Field",name:{kind:"Name",value:"email"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"value"}}]}}]}}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"toCompanies"},arguments:[{kind:"Argument",name:{kind:"Name",value:"first"},value:{kind:"IntValue",value:"5"}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"edges"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"node"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"defaultProperties"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"value"}}]}}]}}]}}]}}]}}]}}]}}]},f={kind:"Document",definitions:s([{kind:"FragmentDefinition",name:{kind:"Name",value:"ConversationDealCardFields"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"CrmObject"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Contact"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"defaultProperties"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"firstname"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"value"}}]}},{kind:"Field",name:{kind:"Name",value:"lastname"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"value"}}]}}]}},{kind:"Field",name:{kind:"Name",value:"associations"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"toDealIntersectedWithConversation"},name:{kind:"Name",value:"contactToDealIntersectedWithConversation"},arguments:[{kind:"Argument",name:{kind:"Name",value:"conversationId"},value:{kind:"Variable",name:{kind:"Name",value:"conversationId"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"andConversation"},name:{kind:"Name",value:"contactAndConversation"},arguments:[{kind:"Argument",name:{kind:"Name",value:"first"},value:{kind:"IntValue",value:"5"}},{kind:"Argument",name:{kind:"Name",value:"after"},value:{kind:"Variable",name:{kind:"Name",value:"cursor"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"edges"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"node"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"FragmentSpread",name:{kind:"Name",value:"ConversationDealChickletFields"}}]}}]}},{kind:"Field",name:{kind:"Name",value:"pageInfo"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"endCursor"}},{kind:"Field",name:{kind:"Name",value:"hasNextPage"}}]}}]}},{kind:"Field",alias:{kind:"Name",value:"andConversationCount"},name:{kind:"Name",value:"contactAndConversation"},arguments:[{kind:"Argument",name:{kind:"Name",value:"first"},value:{kind:"IntValue",value:"99"}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"edges"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"node"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}}]}}]}}]}},{kind:"Field",alias:{kind:"Name",value:"andNotConversation"},name:{kind:"Name",value:"contactAndNotConversation"},arguments:[{kind:"Argument",name:{kind:"Name",value:"first"},value:{kind:"IntValue",value:"5"}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"edges"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"node"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"FragmentSpread",name:{kind:"Name",value:"ConversationDealChickletFields"}}]}}]}}]}}]}},{kind:"Field",alias:{kind:"Name",value:"count"},name:{kind:"Name",value:"contactToDeal"},arguments:[{kind:"Argument",name:{kind:"Name",value:"first"},value:{kind:"IntValue",value:"99"}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"edges"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"node"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}}]}}]}},{kind:"Field",name:{kind:"Name",value:"pageInfo"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"hasNextPage"}}]}}]}}]}}]}}]}}].concat(k.definitions))},v={id:"5c0b5232c2600cc25945ba41004355741013f0d573976f60282779aefda29947",kind:"Document",definitions:s([{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"ConversationDealCard_Query"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"objectType"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"subjectId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Long"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"conversationId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Long"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"cursor"}},type:{kind:"NamedType",name:{kind:"Name",value:"String"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"viewer"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"ownerId"}}]}},{kind:"Field",name:{kind:"Name",value:"crmObject"},arguments:[{kind:"Argument",name:{kind:"Name",value:"type"},value:{kind:"Variable",name:{kind:"Name",value:"objectType"}}},{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"subjectId"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"FragmentSpread",name:{kind:"Name",value:"ConversationDealCardFields"}}]}}]}}].concat(f.definitions))},O={id:"52e02878c1ba97b5ea05676e5583dd87b7e25e079196af78e819729a12774ee3",kind:"Document",definitions:s([{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"ConversationDealCard_UpdateProperties"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"propertyUpdatesInput"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"UpdateCrmObjectPropertiesInput"}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"updateResponse"},name:{kind:"Name",value:"updateCrmObjectProperties"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"propertyUpdatesInput"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"updatedObject"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"FragmentSpread",name:{kind:"Name",value:"ConversationDealChickletFields"}}]}},{kind:"Field",name:{kind:"Name",value:"userErrors"}}]}}]}}].concat(k.definitions))},y={id:"0437e698b551bf02d85e9fa57c7e1910354b67f8312ace657da4cd543ef1d8fb",kind:"Document",definitions:s([{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"ConversationDealCard_RemoveAssociation"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"removeAssociationInput"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"DeleteCrmObjectAssociationInput"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"cursor"}},type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"conversationId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Long"}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"deleteCrmObjectAssociation"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"removeAssociationInput"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"updatedFromObject"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"FragmentSpread",name:{kind:"Name",value:"ConversationDealCardFields"}}]}},{kind:"Field",name:{kind:"Name",value:"userErrors"}}]}}]}}].concat(f.definitions))}},"53i0":function(e,t,n){"use strict";n.d(t,"c",function(){return d});n.d(t,"b",function(){return l});n.d(t,"a",function(){return u});var a=n("eVil"),i=n.n(a),r="currentUserCanView",o="currentUserCanEdit",s="currentUserCanCommunicate",c="currentUserCanDelete",d=i()(r),l=i()(o),u=(i()(s),i()(c))},"55Vm":function(e,t){e.exports={zorseCrmComponentsInteraction:{name:"Zorse CRM Components interaction",class:"interaction",namespace:"zorse-crm-components",version:"1",properties:{action:"string"}}}},"5jW3":function(e,t,n){"use strict";var a=n("fFSu"),i=n("vTCD"),r=n("k8Et"),o=n("mNyx"),s=n("txVw"),c=n("pGTB"),d=n("QgEn"),l=n("VfuR"),u=n.n(l),m=n("Ktcs"),b=n("DqRu"),p=n("QhRM"),j={size:"small",use:"tertiary-light"},k=n("dd+0"),f=n.n(k),v=n("xqzv"),O=n("leqx"),y=function(e){var t=e.cardType,n=e.objectType;return Object(d.jsx)(f.a,{message:"customerDataSidebar."+t+".ZeroItems",options:{objectType:n&&n.toLowerCase()}})};y.propTypes={cardType:u.a.oneOf(Object.keys(v.a)).isRequired,objectType:O.a.isRequired};var g=y,h=n("jqvl"),S=n.n(h),N=n("tPYf"),C=n("R3au"),T=n("7aR2"),I=n("E7+s"),x=function(e){Object(c.a)(t,e);function t(){Object(i.a)(this,t);return Object(o.a)(this,Object(s.a)(t).apply(this,arguments))}Object(r.a)(t,[{key:"getViewAllLinkMessage",value:function(){var e=this.props,t=e.cardType,n=e.hasMore;switch(t){case v.a.CONTACTS:return n?"customerDataSidebar.MultiEntryCard.CONTACTS.viewAllHasMore":"customerDataSidebar.MultiEntryCard.CONTACTS.viewAll";case v.a.DEALS:return n?"customerDataSidebar.MultiEntryCard.DEALS.viewAllHasMore":"customerDataSidebar.MultiEntryCard.DEALS.viewAll";case v.a.TICKETS:return n?"customerDataSidebar.MultiEntryCard.TICKETS.viewAllHasMore":"customerDataSidebar.MultiEntryCard.TICKETS.viewAll";case v.a.FEEDBACK:return n?"customerDataSidebar.MultiEntryCard.FEEDBACK.viewAllHasMore":"customerDataSidebar.MultiEntryCard.FEEDBACK.viewAll";case v.a.TASKS:return n?"customerDataSidebar.MultiEntryCard.TASKS.viewAllHasMore":"customerDataSidebar.MultiEntryCard.TASKS.viewAll";default:return n?"customerDataSidebar.MultiEntryCard.generic.viewAllHasMore":"customerDataSidebar.MultiEntryCard.generic.viewAll"}}},{key:"renderItems",value:function(){var e=this.props,t=e.cardType,n=e.Component,i=e.count,r=e.items,o=e.maxItemsToShow,s=e.objectType;return i?(o?r.slice(0,o):r).map(function(e){var t=e.key,i=e.title,r=Object(a.a)(e,["key","title"]);return Object(d.jsx)(n,Object.assign({title:i},r),t||i)}):Object(d.jsx)(g,{cardType:t,objectType:s})}},{key:"renderCardButtons",value:function(){return Object(d.jsx)("div",{className:"justify-center m-top-4",children:this.props.cardButtons.map(function(e){var t=e.key,n=e.tooltipKey,i=e.tooltipOptions,r=e.showEnableLang,o=Object(a.a)(e,["key","tooltipKey","tooltipOptions","showEnableLang"]);return n?Object(d.jsx)(T.a,{tooltipKey:n,tooltipOptions:i,showEnableLang:r,children:Object(d.jsx)(b.a,Object.assign({},j,{},o))},t):Object(d.jsx)(b.a,Object.assign({},j,{},o),t)})})}},{key:"renderViewAll",value:function(){var e=this.props,t=e.count,n=e.viewAllLink,a=e.viewAllOnClick;return Object(d.jsx)(p.a,{href:n,onClick:a,"data-selenium-test":"associated-objects-card-view-more",className:"force-external-navigation",children:Object(d.jsx)(S.a,{message:this.getViewAllLinkMessage(),options:{count:t}})})}},{key:"render",value:function(){var e=this.props,t=e.cardButtons,n=e.className,a=e.count,i=e.items,r=e.maxItemsToShow,o=e.showMoreLessButton,s=e.subject,c=e.viewAllLink,l=e.seleniumSelector;if(!i||!Object(I.e)(s))return Object(d.jsx)(C.a,{});var u=c&&a>0?this.renderViewAll():null,m=o&&r<=a?o:null,b=t?this.renderCardButtons():null;return Object(d.jsxs)("div",{"data-selenium-test":l,className:n,children:[this.renderItems(),u,m,b]})}}]);return t}(m.Component);x.propTypes={cardButtons:u.a.array,count:u.a.number,className:u.a.string,hasMore:u.a.bool,items:u.a.array,Component:u.a.any,cardType:u.a.string,maxItemsToShow:u.a.number,objectType:O.a.isRequired,showMoreLessButton:u.a.node,subject:N.a,viewAllLink:u.a.string,viewAllOnClick:u.a.func,seleniumSelector:u.a.string};t.a=x},"6CQU":function(e,t,n){"use strict";var a=n("YM6t"),i=n("fzi9"),r=n("QgEn"),o=n("Ktcs"),s=n("3W4S"),c={id:"b2b5ae6247716253ce2f2175c10a23b45f588f488ca8cc39a05fcd8a0db65ea9",kind:"Document",definitions:function(e){var t={};return e.filter(function(e){if("FragmentDefinition"!==e.kind)return!0;var n=e.name.value;if(t[n])return!1;t[n]=!0;return!0})}([{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"fetchStageInfoForObjectTypeId"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"objectTypeId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"objectId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Long"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"stagePropertyName"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"crmObject"},arguments:[{kind:"Argument",name:{kind:"Name",value:"type"},value:{kind:"Variable",name:{kind:"Name",value:"objectTypeId"}}},{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"objectId"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"properties"},arguments:[{kind:"Argument",name:{kind:"Name",value:"names"},value:{kind:"ListValue",values:[{kind:"Variable",name:{kind:"Name",value:"stagePropertyName"}}]}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"FragmentSpread",name:{kind:"Name",value:"PropertyValueFields"}}]}}]}},{kind:"Field",name:{kind:"Name",value:"allPipelineStages"},arguments:[{kind:"Argument",name:{kind:"Name",value:"objectType"},value:{kind:"Variable",name:{kind:"Name",value:"objectTypeId"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"stageId"}},{kind:"Field",name:{kind:"Name",value:"label"}},{kind:"Field",name:{kind:"Name",value:"propertyValueRequirements"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"isValueRequired"}},{kind:"Field",name:{kind:"Name",value:"propertyName"}}]}},{kind:"Field",name:{kind:"Name",value:"metadata"}}]}}]}}].concat(s.a.definitions))},d=n("MyjV"),l=n("OwGx"),u=n("VfuR"),m=n.n(u),b=n("lKVG"),p=n("WLqE"),j=n("l52g"),k=n("iJaT"),f=n("BiPx"),v=n("GBWN"),O=n("Sshb"),y=n("Ryvg"),g=n("46u0"),h=n.n(g),S=n("nqVS"),N=n("DqRu"),C=n("uzdC"),T=n("vuW9"),I=n("rOiA"),x=n("jqvl"),F=n.n(x),A=n("udif"),D=n("2RhA"),R=n("WbQG"),P=n("6L7K"),E=n("eUxV"),_=n("NEfq"),w=n("pbrb"),L=n("qvRI"),q=n("MDyi"),M=n("EDR3"),V=n("tPYf"),U=function(e){return["",null,void 0].includes(e)},B=function(e){var t=e.onConfirm,n=e.onReject,a=e.toStage,s=e.objectLabel,c=e.objectTypeId,d=e.propertyValues,u=e.stageChangeStatus,m=e.subject,b=Object(o.useState)({}),p=Object(i.a)(b,2),j=p[0],k=p[1],f=Object(o.useContext)(P.a).objectId,v=a.propertyValueRequirements,g=Object(o.useCallback)(function(e){return Object.prototype.hasOwnProperty.call(j,e)?j[e]:d[e]&&d[e].value},[j,d]),x=Object(o.useCallback)(function(e,t){k(function(n){return Object.assign({},n,Object(l.a)({},e,t))})},[k]),_=Object(o.useCallback)(function(e){return function(t){var n=t.target.value;return x(e,n)}},[x]),V=Object(o.useCallback)(function(){var e=Object.keys(j).map(function(e){return{name:e,value:j[e]}});t(e);var n=Object.keys(j);L.b.log("saved-properties",{properties:n.length?n.join(" "):void 0})},[j,t]),B=function(e){var t=e.propertyName,n=e.isValueRequired,a=d[t],i=a.definition,o=i.hubspotDefined,s=o?Object(R.b)(i.label):i.label,l=o?Object(R.a)(i.label,i.description):i.description,u=Object(r.jsx)(T.a,{title:l,children:Object(r.jsx)("span",{children:s})}),b=void 0===a.permission||a.permission.accessLevel===M.a;return Object(r.jsx)(C.a,{required:n,label:u,labelTooltip:b?void 0:Object(r.jsx)(h.a,{message:"universalSidebar.properties.StageChangeModal.readOnlyProperty"}),children:Object(r.jsx)(A.a,{value:g(t),onChange:_(t),property:D.a.fromJS(i),subjectId:f,objectType:E.j[c]||c,readOnly:!b,subject:m})},t)},H=v.filter(function(e){var t=e.propertyName;return U(d[t]&&d[t].value)}),K=v.filter(function(e){var t=e.propertyName;return!U(d[t]&&d[t].value)}),Y=K.length?Object(r.jsx)(S.a,{title:Object(r.jsx)(I.a,{children:Object(r.jsx)(h.a,{message:"universalSidebar.properties.StageChangeModal.previouslyCompletedProperties"})}),defaultOpen:!H.length,className:"p-top-6 p-bottom-4",children:K.map(B)}):null,z=Object(r.jsxs)(O.a,{children:[Object(r.jsx)(F.a,{message:"universalSidebar.properties.StageChangeModal.bodyMessage",options:{count:v.length,stageLabel:Object(R.b)(a.label),objectLabel:s},className:"p-bottom-8"}),H.map(B),Y]}),Q=!!v.find(function(e){return e.isValueRequired&&U(g(e.propertyName))}),W=Object(r.jsxs)(y.a,{children:[Object(r.jsx)(w.a,{"data-selenium-test":"stage-change-modal-save-button",use:"primary",onClick:V,disabled:Q,loading:u===q.b,failed:u===q.a,children:Object(r.jsx)(h.a,{message:"universalSidebar.properties.StageChangeModal.buttons.confirm"})}),Object(r.jsx)(N.a,{onClick:n,"data-selenium-test":"stage-change-modal-cancel-button",children:Object(r.jsx)(h.a,{message:"universalSidebar.properties.StageChangeModal.buttons.cancel"})})]});return Object(r.jsxs)(o.Fragment,{children:[z,W]})};B.propTypes={onConfirm:m.a.func.isRequired,onReject:m.a.func.isRequired,toStage:m.a.exact({__typename:m.a.oneOf(["PipelineStage"]).isRequired,stageId:m.a.string.isRequired,label:m.a.string.isRequired,propertyValueRequirements:m.a.arrayOf(m.a.exact({__typename:m.a.oneOf(["PropertyValueRequirement"]).isRequired,isValueRequired:m.a.bool,propertyName:m.a.string})).isRequired}).isRequired,propertyValues:m.a.objectOf(_.a),objectLabel:m.a.string.isRequired,objectTypeId:b.a.isRequired,stageChangeStatus:m.a.oneOf([q.b,q.a,q.d,q.c]).isRequired,subject:V.a.isRequired};var H=B,K=n("iu95"),Y="0-3",z="0-5",Q=n("oSHU"),W=n("mDbF"),G=n.n(W),J=function(e){var t=e.onConfirm,n=e.onReject,a=e.toStage,i=e.objectLabel,s=e.objectTypeId,c=e.objectId,d=e.pendingChanges,u=void 0===d?{}:d,m=e.stageChangeStatus,b=e.subject,g=a.propertyValueRequirements.map(function(e){return e.propertyName}),S=Object(o.useCallback)(function(){Q.a.addAlert({message:G.a.text("universalSidebar.properties.StageChangeModal.errorLoading"),type:"warning"});n()},[n]),N=Object(K.a)({objectType:s,objectId:c,propertyNames:g,onError:S}),C=N.properties,T=N.loading,I=N.error,x=function(){switch(s){case Y:return"universalSidebar.properties.StageChangeModal.header.DEAL";case z:return"universalSidebar.properties.StageChangeModal.header.TICKET";default:return"universalSidebar.properties.StageChangeModal.header.generic"}},F=Object(r.jsxs)(v.a,{children:[Object(r.jsx)(p.a,{children:Object(r.jsx)(h.a,{message:x()})}),Object(r.jsx)(f.a,{onClick:n})]}),A=function(){if(T||I)return Object(r.jsxs)(o.Fragment,{children:[Object(r.jsx)(O.a,{children:Object(r.jsx)(j.a,{layout:"centered"})}),Object(r.jsx)(y.a,{})]});var e=C.map(function(e){return u[e.name]?Object.assign({},e,{value:u[e.name]}):e}).reduce(function(e,t){return Object.assign({},e,Object(l.a)({},t.name,t))},{});return Object(r.jsx)(H,{onConfirm:t,onReject:n,toStage:a,objectLabel:i,objectTypeId:s,propertyValues:e,stageChangeStatus:m,subject:b})};return Object(r.jsxs)(k.a,{"data-selenium-test":"stage-change-modal",children:[F,A()]})};J.propTypes={onConfirm:m.a.func.isRequired,onReject:m.a.func.isRequired,toStage:m.a.exact({__typename:m.a.oneOf(["PipelineStage"]).isRequired,stageId:m.a.string.isRequired,label:m.a.string.isRequired,propertyValueRequirements:m.a.arrayOf(m.a.exact({__typename:m.a.oneOf(["PropertyValueRequirement"]).isRequired,isValueRequired:m.a.bool,propertyName:m.a.string})).isRequired,metadata:m.a.object}).isRequired,objectLabel:m.a.string.isRequired,objectTypeId:b.a.isRequired,objectId:m.a.number.isRequired,pendingChanges:m.a.objectOf(m.a.oneOfType([m.a.string,m.a.number])),stageChangeStatus:m.a.oneOf([q.b,q.a,q.d,q.c]).isRequired,subject:V.a.isRequired};var Z=J,X=n("i+U4"),$=n("QYOI"),ee=n("d0QT"),te=n("Sebf"),ne=n("3zLH");function ae(e){var t=e.onConfirm,n=e.onReject,a=e.toStage,i=e.fromStage,s=e.objectTypeId,c=e.objectId,d=E.j[s]||s,l=Object(o.useContext)(ee.a).getPropertyPermission,u=Object(o.useCallback)(function(){Q.a.addAlert({message:G.a.text("universalSidebar.properties.StageChangeModal.errorLoading"),type:"warning"});n()},[n]),m=Object(o.useMemo)(function(){return Object($.fromJS)(a.propertyValueRequirements.map(function(e){return{property:e.propertyName,required:e.isValueRequired}}))},[a.propertyValueRequirements]),b=Object(K.a)({objectType:s,objectId:c,propertyNames:a.propertyValueRequirements.map(function(e){return e.propertyName}),onError:u}),p=b.properties,j=b.loading,k=b.error,f=Object(o.useMemo)(function(){return Object(ne.d)(d,p||[],c)},[d,p,c]),v=Object(o.useMemo)(function(){return j||k?Object($.Map)():p.reduce(function(e,t){return e.set(t.name,D.a.fromJS(t.definition))},Object($.Map)())},[j,k,p]),O=Object(o.useCallback)(function(e){var n=Object.keys(e).map(function(t){return{name:t,value:e[t]}});t(n)},[t]);return j||k?null:Object(r.jsx)(X.a,{prevStage:Object($.Map)(i),nextStage:Object($.Map)(a),objectType:d,prevProperties:f&&f.properties,nextProperties:Object($.Map)(),properties:m,PropertyInput:A.a,subject:f,subjectProperties:v,getPropertyPermission:l,onConfirm:O,onReject:n,getPropertyInputResolver:te.a})}var ie=ae,re=m.a.exact({__typename:m.a.oneOf(["PipelineStage"]).isRequired,stageId:m.a.string.isRequired,label:m.a.string.isRequired,propertyValueRequirements:m.a.arrayOf(m.a.exact({__typename:m.a.oneOf(["PropertyValueRequirement"]).isRequired,isValueRequired:m.a.bool,propertyName:m.a.string})).isRequired,metadata:m.a.object});ae.propTypes={onConfirm:m.a.func.isRequired,onReject:m.a.func.isRequired,toStage:re.isRequired,fromStage:re.isRequired,objectTypeId:b.a.isRequired,objectId:m.a.number.isRequired};var oe=n("HZCd");n.d(t,"a",function(){return ue});var se="closedate",ce=function(e){var t=e.objectTypeId,n=e.stage,a=e.previousStage;return t===Y&&n&&"true"===n.metadata.isClosed&&(!a||n.metadata.probability!==a.metadata.probability)},de=function(){return{name:se,value:G.a.moment.userTz().valueOf()}},le=function(e,t){return t===Y&&e.includes("revenue-deal-stage-change-dialog")},ue=function(e){var t=e.stageChangeStatus,n=e.stagePropertyName,s=e.objectLabel,l=e.objectTypeId,u=e.objectId,m=e.onConfirm,b=e.pendingChanges,p=e.subject,j=Object(o.useState)(null),k=Object(i.a)(j,2),f=k[0],v=k[1],O=Object(ee.b)().scopes,y=Object(oe.b)().onObjectUpdate,g=Object(o.useCallback)(function(e){if("function"==typeof y){var t=e.reduce(function(e,t){var n=t.name,a=t.value;return e.set(n,a)},Object($.Map)());y({objectType:E.j[l]||l,objectId:""+u,properties:t})}m(e)},[y,m,l,u]),h=Object(o.useMemo)(function(){return le(O,l)},[O,l])?ie:Z,S=Object(d.useQuery)(c,{variables:{objectTypeId:l,objectId:u,stagePropertyName:n},fetchPolicy:"cache-and-network",nextFetchPolicy:"cache-first"}).data,N=Object(o.useMemo)(function(){if(S&&S.crmObject&&S.crmObject.properties&&S.crmObject.properties.length){var e=S.crmObject.properties.find(function(e){return e.name===n});if(e&&e.value)return S.allPipelineStages.find(function(t){return t.stageId===e.value})}return null},[S,n]),C=Object(o.useCallback)(function(){v(null)},[v]),T=Object(o.useCallback)(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];ce({objectTypeId:l,stage:f,previousStage:N})&&(e.some(function(e){return e.name===se})||(e=e.concat([de()])));g([{name:n,value:f.stageId}].concat(Object(a.a)(e)))},[g,n,f,l,N]),I=Object(o.useCallback)(function(e){var t=[];if(S){var i=S.allPipelineStages.find(function(t){return t.stageId===e});if(i&&i.propertyValueRequirements.length){v(i);return}ce({objectTypeId:l,stage:i,previousStage:N})&&(t=[de()])}g([{name:n,value:e}].concat(Object(a.a)(t)))},[g,S,v,n,l,N]);Object(o.useEffect)(function(){t===q.c&&f&&v(null)},[t,f,v]);function x(){return f?Object(r.jsx)(h,{onReject:C,onConfirm:T,objectLabel:s,objectTypeId:l,objectId:u,pendingChanges:b,stageChangeStatus:t,toStage:f,fromStage:N,subject:p}):null}return[x(),I]}},"6L7K":function(e,t,n){"use strict";n.d(t,"a",function(){return o});var a=n("Ktcs"),i=n("VfuR"),r=n.n(i),o=Object(a.createContext)({definition:null,primaryDisplayLabel:null,objectType:null,objectId:null});o.Provider.propTypes={value:r.a.shape({definition:r.a.shape({id:r.a.string,objectSummaryPropertyNames:r.a.arrayOf(r.a.string).isRequired,pluralForm:r.a.string,singularForm:r.a.string}).isRequired,primaryDisplayLabel:r.a.string.isRequired,objectType:r.a.string.isRequired,objectId:r.a.string.isRequired}).isRequired}},"6buU":function(e,t,n){"use strict";var a=n("fFSu"),i=n("QgEn"),r=n("t6nY"),o=n.n(r),s=n("Ifz0"),c=n("QDGf"),d=n("35Hc"),l=n("pc04"),u=n("VfuR"),m=n.n(u),b=n("Ktcs"),p=n("9f1P"),j=n.n(p),k=n("5axQ"),f=n("sSdB"),v=n("KmIv"),O=j()(k.a).withConfig({displayName:"UITable__TableScrollContainer",componentId:"vt9i8o-0"})(["height:",";"],function(e){return"both"===e.scrollDirection&&"100%"}),y=j.a.table.withConfig({displayName:"UITable__Table",componentId:"vt9i8o-1"})(["font-size:",";background-color:",";border-collapse:collapse;width:100%;",";th,td{border-color:",";border-style:solid;border-width:1px 0 0;line-height:normal;vertical-align:middle;}thead{th{",";font-size:",";background-color:",";color:",";height:",";padding-bottom:",";padding-left:",";padding-right:",";padding-top:",";text-align:left;text-transform:uppercase;vertical-align:",";}}tfoot{td,th{",";height:",";padding:"," ",";text-align:left;}}tbody{td{hyphens:auto;height:",";overflow-wrap:break-word;padding:"," ",";vertical-align:",";.private-tag--inline{vertical-align:",";}}}",";",";",";",";.private-card &{border:0;border-radius:inherit;thead{th,.private-table-sort-toggle{background-color:transparent;border-top:0;}}}.private-panel__body &{",";}"],c.tb,d.s,function(e){return(e.flush||e.responsive)&&"&& { margin-bottom: 0; }"},d.t,v.a.medium,c.wb,d.u,d.a,c.xb,c.yb,c.ub,c.ub,c.zb,s.h,v.a.demibold,c.qb,c.vb,c.ub,c.qb,c.vb,c.ub,s.g,s.g,function(e){return!1!==e.bordered&&"\n      border-color: "+d.t+";\n      border-style: solid;\n      border-width: 0 1px 1px;\n  "},function(e){return e.condensed&&"\n      thead th {\n        height: "+c.xb+";\n        padding-bottom: "+c.sb+";\n        padding-top: "+c.sb+"\n      }\n\n      tbody {\n        td, th {\n          height: "+c.rb+";\n          padding-bottom: "+c.sb+";\n          padding-top: "+c.sb+";\n        }\n      }\n  "},function(e){return e.hover&&"\n      tbody {\n        tr {\n          transition: background-color "+l.f+" ease-out;\n        }\n        tr:hover {\n          background-color: "+d.v+";\n        }\n      }\n  "},function(e){return e.truncated&&"\n      table-layout: fixed;\n\n      td,\n      th {\n        overflow: hidden;\n        text-overflow: ellipsis;\n        white-space: nowrap;\n      }\n  "},function(e){return!0!==e.bordered&&"border-width: 0 0 1px;"}),g=Object(b.forwardRef)(function(e,t){var n=e.bordered,r=e.children,s=e.className,c=e.condensed,d=e.flush,l=e.height,u=e.hover,m=e.responsive,b=e.responsiveWrapperClassName,p=e.ScrollContainer,j=e.truncated,k=Object(a.a)(e,["bordered","children","className","condensed","flush","height","hover","responsive","responsiveWrapperClassName","ScrollContainer","truncated"]),v=o()("table private-table",s,n&&"table-bordered",c&&"table-condensed private-table--condensed"),O=Object(i.jsx)(y,Object.assign({},k,{className:v,bordered:n,condensed:c,flush:d,hover:u,ref:t,responsive:m,truncated:j,children:r}));return m?Object(i.jsx)(f.a,{className:o()("table-responsive private-scroll__wrapper--tables",b),flush:d,height:l,children:Object(i.jsx)(p,{scrollDirection:null!=l?"both":"horizontal",children:O})}):O});g.propTypes={bordered:m.a.oneOf([!0,!1,"auto"]),children:m.a.node.isRequired,condensed:m.a.bool.isRequired,flush:m.a.bool.isRequired,height:f.a.propTypes.height,hover:m.a.bool.isRequired,responsive:m.a.bool.isRequired,responsiveWrapperClassName:m.a.string,ScrollContainer:m.a.elementType.isRequired,truncated:m.a.bool.isRequired};g.defaultProps={bordered:"auto",condensed:!1,flush:!1,hover:!0,responsive:!0,ScrollContainer:O,truncated:!1};g.displayName="UITable";t.a=g},"7GUQ":function(e,t,n){"use strict";n.d(t,"b",function(){return r});var a=n("ldyT"),i=n("SZxU"),r=function(){return Object(a.a)(i.b,!0)};t.a=r},"7aR2":function(e,t,n){"use strict";var a=n("fFSu"),i=n("QgEn"),r=n("mDbF"),o=n.n(r),s=n("VfuR"),c=n.n(s),d=n("6N2u"),l=function(e){var t=e.tooltipKey,n=e.tooltipOptions,r=e.showEnableLang,s=Object(a.a)(e,["tooltipKey","tooltipOptions","showEnableLang"]),c=o.a.text("customerDataObjectsUiComponents.Permissions."+t,n);return Object(i.jsx)(d.a,Object.assign({},s,{title:c,showCta:r,children:e.children}))};l.propTypes={tooltipKey:c.a.string.isRequired,tooltipOptions:c.a.object,showEnableLang:c.a.bool,children:c.a.node};l.defaultProps={tooltipKey:"generic.unknown",tooltipOptions:{},showEnableLang:!0};t.a=l},"8CkY":function(e,t){e.exports={qualifiedLeadsSidebarCardView:{name:"QL sidebar card view",class:"view",namespace:"realtime-reps-qualified-leads",version:"1",properties:{action:"string",applicationName:"string",leadContactVid:"number"}}}},Av5o:function(e,t,n){"use strict";var a=n("QgEn"),i=n("VfuR"),r=n.n(i),o=n("eP/i"),s=n("46u0"),c=n.n(s),d=n("3Yd4"),l=n("NLVp"),u=n("vuW9"),m={iconSize:r.a.oneOfType([r.a.string,r.a.number]),onClick:r.a.func.isRequired,size:r.a.string,useButtonType:r.a.string},b=function(e){var t=e.iconSize,n=void 0===t?"small":t,i=e.size,r=void 0===i?"medium":i,s=e.onClick,m=e.useButtonType,b=void 0===m?"link":m;return Object(a.jsx)(u.a,{title:Object(a.jsx)(c.a,{message:"customerDataObjectsUiComponents.Tooltips.removeAssociation"}),placement:"top left",children:Object(a.jsx)(l.a,{size:r,use:b,onClick:s,"data-selenium-test":"remove-button",children:Object(a.jsx)(d.a,{className:"m-right-0",color:o.EERIE,name:"remove",size:n})})})};b.propTypes=m;t.a=b},CFVt:function(e,t,n){"use strict";n.d(t,"c",function(){return c});n.d(t,"a",function(){return d});n.d(t,"b",function(){return l});n.d(t,"e",function(){return u});n.d(t,"d",function(){return m});var a=n("QYOI"),i=n("tj9Y"),r=n.n(i),o=n("hkFy"),s="unsaved-",c=o.atom(Object(a.Map)()),d=o.atom(Object(a.Map)());function l(e,t){var n=r()(s);o.swap(e,function(e){return e.set(n,t)});return n}function u(e,t,n){o.swap(e,function(e){return e.set(t,n)});return t}function m(e,t){o.swap(e,function(e){return e.remove(t)})}},Ce6e:function(e,t,n){"use strict";n.d(t,"a",function(){return a});n.d(t,"c",function(){return i});n.d(t,"b",function(){return r});n.d(t,"d",function(){return o});n.d(t,"e",function(){return s});n.d(t,"f",function(){return c});n.d(t,"g",function(){return d});var a="EDIT_ALL",i="EDIT_TEAM_OWNED",r="EDIT_OWNED_ONLY",o="EDIT_UNASSIGNED",s="VIEW_ALL",c="VIEW_TEAM_OWNED",d="VIEW_UNASSIGNED"},DNdP:function(e,t,n){"use strict";n.d(t,"a",function(){return r});var a=n("qvRI"),i=n("QYOI");function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object(i.Map)(),t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.keySeq().toArray();a.b.log("saved-properties",Object.assign({properties:n.length?n.join(" "):void 0},t))}},EeNa:function(e,t,n){"use strict";n.d(t,"a",function(){return s});var a=n("QgEn"),i=n("47ul"),r=n.n(i),o=n("QhRM");function s(){return Object(a.jsx)("p",{className:"p-x-5 p-top-4 reagan-test-sidebar-error","data-unit-test":"SidebarCardError",children:Object(a.jsx)(r.a,{message:"customerDataSidebar.sidebarCardError_jsx",options:{href:window.location.href},elements:{Link:o.a}})})}},EvGL:function(e,t,n){"use strict";var a=n("fzi9"),i=n("QgEn"),r=n("Ktcs"),o=n("VfuR"),s=n.n(o),c=n("nDpY"),d=n.n(c),l=n("pbrb"),u=n("pw7o"),m=n("g+dq"),b=n.n(m);function p(e){return b.a.get("qualified-leads/drafts/brief/"+e)}function j(e){return b.a.get("qualified-leads/submissions/brief/by-contact-vid/"+e,{query:{includeAllSubmissionsForSameCompany:!0}})}function k(e){return b.a.get("qualified-leads/drafts/"+e+"/validate-revision",{query:{revision:0}})}var f={border:"none",bottom:"0",height:"100%",left:"0",position:"fixed",right:"0",top:"0",width:"100%"};function v(e,t,n){var a="/qualified-leads-ui/"+d.a.get()+"/drafts/"+t+"?appName="+e;return n?a+"&chatThreadId="+n:a}function O(e){var t=Object(r.useState)(!0),n=Object(a.a)(t,2),o=n[0],s=n[1],c=Object(r.useState)(!1),d=Object(a.a)(c,2),m=d[0],b=d[1],p=Object(r.useState)(!1),j=Object(a.a)(p,2),O=j[0],y=j[1],g=Object(r.useState)(!1),h=Object(a.a)(g,2),S=h[0],N=h[1];Object(r.useEffect)(function(){k(e.contactVid).then(function(e){return s("true"===e)})},[e.contactVid,m]);Object(r.useEffect)(function(){var t=function(t){if(t.origin===window.location.origin){var n=t.data;if(n.payload&&""+n.payload.leadContactVid==""+e.contactVid)switch(n.type){case"QL_PANEL_CLOSE_REQUESTED":b(!1);break;case"QL_PANEL_DRAFT_LOADED":y(!1);break;case"QL_PANEL_META_LOADED":N(!1);break;case"QL_PANEL_SUBMISSION_CREATED":s(!0);b(!1);e.alertStore.addAlert(n.payload.alert);break;case"QL_PANEL_CONTACT_OWNER_REASSIGNMENT_DELAYED":case"QL_PANEL_CONTACT_OWNER_REASSIGNED":case"QL_PANEL_DOMAIN_EDITED":case"QL_PANEL_DOMAIN_ENRICHED":case"QL_PANEL_MEETING_BOOKED":case"QL_PANEL_SUBMISSION_FAILED":e.alertStore.addAlert(n.payload.alert)}}};b(!1);window.addEventListener("message",t,!1);return function(){window.removeEventListener("message",t)}},[e.alertStore,e.contactVid]);var C=function(){b(!0);y(!0);N(!0)},T=e.contactVid&&/^\d+$/.test(e.contactVid),I=O||S;return Object(i.jsxs)(i.Fragment,{children:[m&&Object(i.jsx)(u.a,{animate:!1,"data-test-id":"panel",style:{display:I?"none":"block"},width:316,children:Object(i.jsx)("iframe",{frameBorder:0,height:"100%",src:v(e.appName,e.contactVid,e.chatThreadId),style:f,width:"100%"})}),Object(i.jsx)(l.a,{"data-test-id":"button",disabled:m||!T,loading:I,onClick:C,size:"small",use:"tertiary",children:o?"Raise a lead":"Continue raising lead"})]})}O.propTypes={alertStore:s.a.object.isRequired,appName:s.a.string.isRequired,chatThreadId:s.a.oneOfType([s.a.number,s.a.string]),contactVid:s.a.oneOfType([s.a.number,s.a.string])};O.defaultProps={chatThreadId:0,contactVid:0};var y=O,g=n("kZyb"),h=n("sld6"),S=n("vTCD"),N=n("k8Et"),C=n("S4BB"),T=n("8CkY"),I=n.n(T),x=Object(C.createTracker)({events:I.a,isBeforeUnload:!0}),F=new(function(){function e(){Object(S.a)(this,e);this.applicationName="";this.leadContactVid=0}Object(N.a)(e,[{key:"viewFullHistory",value:function(){x.track("qualifiedLeadsSidebarCardView",{action:"view-full-history",allowQa:!0,applicationName:this.applicationName,leadContactVid:this.leadContactVid})}}]);return e}()),A=n("o3aL"),D=function(e){return Object(i.jsx)(A.a,Object.assign({},e,{use:"sorbet",children:"Retail"}))},R=function(e){return Object(i.jsx)(A.a,Object.assign({},e,{use:"info",children:"Target account"}))};function P(e){var t=Object(r.useState)(null),n=Object(a.a)(t,2),o=n[0],s=n[1],c=function(e){p(e).then(function(e){return s(e)},function(e){return s(null)})};Object(r.useEffect)(function(){return c(e.contactVid)},[e.contactVid]);Object(r.useEffect)(function(){var t=function(t){if(t.origin===window.location.origin){var n=t.data;if(n.payload&&""+n.payload.leadContactVid==""+e.contactVid)switch(n.type){case"QL_PANEL_META_LOADED":c(e.contactVid)}}};window.addEventListener("message",t,!1);return function(){window.removeEventListener("message",t)}},[e.contactVid]);return o?o.isTargetAccount&&o.isRetail?Object(i.jsxs)("div",{children:[Object(i.jsx)(R,{}),Object(i.jsx)(D,{className:"m-left-2"})]}):o.isTargetAccount?Object(i.jsx)(R,{className:"m-left-2"}):o.isRetail?Object(i.jsx)(D,{className:"m-left-2"}):null:null}P.propTypes={contactVid:s.a.oneOfType([s.a.number,s.a.string]).isRequired};var E=P,_=n("5b5O"),w=n.n(_),L=n("QhRM"),q=n("ju9H"),M=n("l52g"),V=n("eP/i"),U=n("KcZi"),B=n.n(U),H=n("WLqE"),K=n("BiPx"),Y=n("SV9y"),z=n("VQTc"),Q=n("Cftt"),W=n("6buU"),G=n("fwDr"),J={BOOK_A_MEETING:"Booked a meeting",FYI_EMAIL:"FYI to owner",IMMEDIATE_SALE_COMPLETE:"Immediate sale completed",LIVE_TRANSFER:"Live transfer",SEND_MEETING_LINK:"Meeting link sent",SEND_PAYMENT_LINK:"Payment link sent",TOUCHLESS_PUSH:"Touchless push"};function Z(){return Object(i.jsxs)("tr",{children:[Object(i.jsx)("th",{children:Object(i.jsx)("b",{children:"Date"})}),Object(i.jsx)("th",{children:Object(i.jsx)("b",{children:"Handoff Type"})}),Object(i.jsx)("th",{children:Object(i.jsx)("b",{children:"Contact"})}),Object(i.jsx)("th",{children:Object(i.jsx)("b",{children:"Raised by"})})]})}function X(e){var t=e.contact,n=e.submitter;return Object(i.jsxs)("tr",{children:[Object(i.jsx)("td",{width:135,children:Object(i.jsx)(w.a,{"data-test-id":"date",value:e.submittedAt,format:"ll"})}),Object(i.jsx)("td",{width:170,children:Object(i.jsx)("span",{"data-test-id":"handoff-type",children:J[e.handoffType]})}),Object(i.jsx)("td",{children:t.email?Object(i.jsxs)(G.a,{maxWidth:125,children:[Object(i.jsx)(B.a,{"data-test-id":"contact",email:t.email,familyName:t.familyName,givenName:t.givenName}),Object(i.jsx)("br",{}),"("+t.email+")"]}):Object(i.jsx)("span",{"data-test-id":"contact",children:t.vid})}),Object(i.jsx)("td",{children:Object(i.jsx)(G.a,{maxWidth:125,children:Object(i.jsx)(B.a,{"data-test-id":"raised-by",email:n.email,familyName:n.familyName,givenName:n.givenName})})})]},e.id)}function $(e){Object(r.useEffect)(function(){F.viewFullHistory()},[]);return Object(i.jsxs)(u.a,{animate:!1,width:720,children:[Object(i.jsx)(K.a,{className:"m-right-3","data-test-id":"close-button",onClick:e.onClose}),Object(i.jsx)(z.a,{children:Object(i.jsx)(H.a,{"data-test-id":"heading",children:"Company Inbound Qualified Lead History"})}),Object(i.jsx)(Y.a,{children:Object(i.jsx)(Q.a,{children:Object(i.jsxs)(W.a,{bordered:!0,condensed:!0,"data-test-id":"table",children:[Object(i.jsx)("thead",{children:Z()}),Object(i.jsx)("tbody",{children:e.submissions.map(X)})]})})})]})}$.propTypes={onClose:s.a.func.isRequired,submissions:s.a.array.isRequired};var ee=$;function te(e){return Object(i.jsxs)("span",{children:[Object(i.jsx)("b",{children:Object(i.jsx)(w.a,{value:e.submittedAt,format:"ll"})}),Object(i.jsx)("span",{className:"m-left-2",children:J[e.handoffType]})]},e.id)}function ne(e,t){var n=t.filter(function(t){return t.contact.vid.toString()===e});return n.length?Object(i.jsx)(q.a,{className:"m-bottom-4",children:n.sort(function(e,t){return t.submittedAt-e.submittedAt}).slice(0,3).map(te)}):null}function ae(e,t){return Object(i.jsx)(h.a,{align:"center",justify:"center",direction:"row",wrap:"wrap",children:Object(i.jsx)(L.a,{disabled:e,onClick:function(){return t(!0)},children:"View full history"})})}function ie(e){var t=Object(r.useState)(!1),n=Object(a.a)(t,2),o=n[0],s=n[1],c=Object(r.useState)(!1),d=Object(a.a)(c,2),l=d[0],u=d[1],m=Object(r.useState)([]),b=Object(a.a)(m,2),p=b[0],k=b[1],f=function(e){s(!0);j(e).then(function(e){s(!1);k(e)},function(e){s(!1);k([])})};Object(r.useEffect)(function(){return f(e.contactVid)},[e.contactVid]);Object(r.useEffect)(function(){var t=function(t){if(t.origin===window.location.origin){var n=t.data;if(n.payload&&""+n.payload.leadContactVid==""+e.contactVid)switch(n.type){case"QL_PANEL_DOMAIN_EDITED":case"QL_PANEL_SUBMISSION_CREATED":f(e.contactVid)}}};window.addEventListener("message",t,!1);return function(){window.removeEventListener("message",t)}},[e.contactVid]);return o?Object(i.jsx)(M.a,{label:Object(i.jsx)("span",{style:{color:V.SLINKY},children:"Loading history"}),minHeight:32,showLabel:!0,size:"small"}):Object(i.jsxs)(i.Fragment,{children:[p.length?Object(i.jsxs)("div",{className:"p-y-1",children:[ne(e.contactVid,p),ae(l,u)]}):Object(i.jsx)("div",{className:"p-y-1",style:{color:V.SLINKY},children:"No leads have been raised yet."}),l&&Object(i.jsx)(ee,{onClose:function(){return u(!1)},submissions:p})]})}ie.propTypes={contactVid:s.a.oneOfType([s.a.number,s.a.string]).isRequired};var re=ie,oe=n("rWb3");function se(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"warning";return Object(i.jsx)("div",{className:"m-bottom-4",children:Object(i.jsx)(oe.a,{className:"p-all-3",type:t,use:"inline",children:e})})}function ce(e){var t=Object(r.useState)(null),n=Object(a.a)(t,2),i=n[0],o=n[1],s=function(e){p(e).then(function(e){return o(e)},function(e){return o(null)})};Object(r.useEffect)(function(){return s(e.contactVid)},[e.contactVid]);Object(r.useEffect)(function(){var t=function(t){if(t.origin===window.location.origin){var n=t.data;if(n.payload&&""+n.payload.leadContactVid==""+e.contactVid)switch(n.type){case"QL_PANEL_META_LOADED":s(e.contactVid)}}};window.addEventListener("message",t,!1);return function(){window.removeEventListener("message",t)}},[e.contactVid]);return null===i?null:i.isBlacklisted?se("Blacklisted domain"):i.isEmbargoed?se("Embargoed country"):i.isBadFit?se("Marked as Bad Fit"):i.isColdSourced?se("Cold Sourced domain"):i.isDisputed?se("Open dispute"):i.isQuarantined?se("Quarantined","info"):i.isOpen?se("Open owner","info"):null}ce.propTypes={contactVid:s.a.oneOfType([s.a.number,s.a.string]).isRequired};var de=ce;function le(e){F.applicationName=e.appName;F.leadContactVid=parseInt(e.contactVid,10);return Object(i.jsxs)(i.Fragment,{children:[Object(i.jsx)(de,{contactVid:e.contactVid}),Object(i.jsx)(h.a,{align:"center",direction:"row",justify:"center",wrap:"wrap",children:Object(i.jsx)(y,{alertStore:e.alertStore,appName:e.appName,chatThreadId:e.chatThreadId,contactVid:e.contactVid})}),Object(i.jsx)("div",{className:"m-top-4",children:Object(i.jsx)(re,{contactVid:e.contactVid})}),Object(i.jsx)("div",{className:"m-top-4",children:Object(i.jsxs)(g.a,{use:"help",children:["Powered by ",Object(i.jsx)("b",{children:"Revenue"})]})})]})}function ue(e){return Object(i.jsxs)(h.a,{align:"center",direction:"row",justify:"start",wrap:"wrap",children:["Qualified Leads",Object(i.jsx)(E,{contactVid:e.contactVid})]})}le.propTypes={alertStore:s.a.object.isRequired,appName:s.a.string.isRequired,chatThreadId:s.a.oneOfType([s.a.number,s.a.string]),contactVid:s.a.oneOfType([s.a.number,s.a.string])};le.defaultProps={chatThreadId:0,contactVid:0};ue.propTypes={contactVid:s.a.oneOfType([s.a.number,s.a.string])};ue.defaultProps={contactVid:0};n.d(t,"a",function(){return le});n.d(t,"b",function(){return ue})},HZCd:function(e,t,n){"use strict";n.d(t,"a",function(){return c});n.d(t,"b",function(){return d});var a=n("Ktcs"),i=n("VfuR"),r=n.n(i),o=n("Sx0/"),s=n.n(o),c=Object(a.createContext)({onAssociationUpdate:s.a,onObjectCreate:s.a,onObjectDelete:s.a,onObjectUpdate:s.a});c.Provider.propTypes={value:r.a.shape({onAssociationUpdate:r.a.func,onObjectCreate:r.a.func,onObjectDelete:r.a.func,onObjectUpdate:r.a.func}).isRequired};var d=function(){return Object(a.useContext)(c)}},KHqm:function(e,t,n){"use strict";n.d(t,"a",function(){return f});var a=n("fzi9"),i=n("QgEn"),r=n("Ktcs"),o=n("VfuR"),s=n.n(o),c=n("9f1P"),d=n.n(c),l=n("eP/i"),u=n("3Yd4"),m=n("NLVp"),b=n("vuW9"),p=d.a.div.withConfig({displayName:"FloatingRemoveButton__Header",componentId:"f5cf5k-0"})(["position:absolute;top:0;right:0;z-index:10;"]),j=d.a.div.withConfig({displayName:"FloatingRemoveButton__HoverContainer",componentId:"f5cf5k-1"})(["position:relative;"]),k=function(e){var t=e.onClick,n=e.title,a=e.tooltipPlacement,r=void 0===a?"top left":a;return Object(i.jsx)(p,{children:Object(i.jsx)(b.a,{title:n,placement:r,children:Object(i.jsx)(m.a,{size:"xs",use:"tertiary-light",onClick:t,"data-test-id":"floating-remove-button",children:Object(i.jsx)(u.a,{className:"m-right-0",color:l.EERIE,name:"remove",size:12})})})})},f=function(e){var t=e.children,n=e.onClick,o=e.title,s=e.tooltipPlacement,c=Object(r.useState)(!1),d=Object(a.a)(c,2),l=d[0],u=d[1],m=Object(r.useCallback)(function(){return u(!0)},[]),b=Object(r.useCallback)(function(){return u(!1)},[]);return Object(i.jsxs)(j,{onMouseEnter:m,onMouseLeave:b,children:[l&&Object(i.jsx)(k,{onClick:n,title:o,tooltipPlacement:s}),t]})};f.propTypes={children:s.a.node.isRequired,onClick:s.a.func.isRequired,title:s.a.node.isRequired,tooltipPlacement:s.a.string}},"KbK+":function(e,t,n){"use strict";n.d(t,"a",function(){return f});var a,i,r,o=n("OwGx"),s=n("svxk"),c=n("QYOI"),d=n("MQNR"),l=n("Ce6e"),u=(a={},Object(o.a)(a,l.a,"crm-edit-all-deals"),Object(o.a)(a,l.c,"crm-edit-team-owned-deals"),Object(o.a)(a,l.d,"crm-edit-unassigned-deals"),Object(o.a)(a,l.b,"crm-edit-owned-deals"),a),m=(i={},Object(o.a)(i,l.a,"crm-edit-all-tickets"),Object(o.a)(i,l.c,"crm-edit-team-owned-tickets"),Object(o.a)(i,l.d,"crm-edit-unassigned-tickets"),Object(o.a)(i,l.b,"crm-edit-owned-tickets"),i),b=(r={},Object(o.a)(r,l.a,"crm-edit-all"),Object(o.a)(r,l.c,"crm-edit-team-owned"),Object(o.a)(r,l.d,"crm-edit-unassigned"),Object(o.a)(r,l.b,"contacts-edit-owner-owned"),r),p=function(e){switch(e){case d.QUOTE:case d.DEAL:return u;case d.TICKET:return m;default:return b}},j=function(e,t){return p(e)[t]};function k(e){return e.map(function(e){return String(e)})}function f(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object(c.Set)(),t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Object(c.Set)(),n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[],r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"",o=arguments.length>6?arguments[6]:void 0;if(!n[j(o,l.b)])return!1;c.Iterable.isIterable(e)||""!==r||(r=e);var d=k(c.Iterable.isIterable(e)&&e||c.Set.of(e)).includes(""+a);if(d)return!0;if(t.size&&n[j(o,l.c)]){if(t.intersect(i.map(function(e){return""+e})).size)return!0}return!!Object(s.a)(e,t,n,a,i,r,o)&&(!!n[j(o,l.a)]||(!(!n[j(o,l.d)]||r)||d))}},MDyi:function(e,t,n){"use strict";n.d(t,"d",function(){return a});n.d(t,"b",function(){return i});n.d(t,"c",function(){return r});n.d(t,"a",function(){return o});var a="UNINITIALIZED",i="STARTED",r="SUCCEEDED",o="FAILED"},NEfq:function(e,t,n){"use strict";var a=n("VfuR"),i=n.n(a);t.a=i.a.shape({definition:i.a.shape({fieldType:i.a.string,readOnlyValue:i.a.bool}),id:i.a.string,name:i.a.string,value:i.a.string})},PAZM:function(e,t,n){"use strict";var a=n("ldyT"),i=function(){var e=Object(a.a)("CRM:DataDensity",!0),t=Object(a.a)("CRM:CompactTimeline",!0);return e||t};t.a=i},R3au:function(e,t,n){"use strict";var a=n("QgEn"),i=n("l52g"),r=n("sSdB"),o=function(){return Object(a.jsx)(r.a,{children:Object(a.jsx)(i.a,{grow:!0,minHeight:128})})};t.a=o},RyfP:function(e,t,n){"use strict";n.d(t,"b",function(){return a});n.d(t,"a",function(){return i});var a=function(e){return{key:"edit-property-settings",properties:{action:"edit property settings",objectType:e.objectType}}},i=function(){return{key:"disassociate-thread-ticket",properties:{action:"disassociate thread ticket"}}}},SZxU:function(e,t,n){"use strict";n.d(t,"a",function(){return a});n.d(t,"b",function(){return i});var a="flexible-associations",i="flexible-associations-development"},TMcE:function(e,t,n){"use strict";n.d(t,"a",function(){return o});n.d(t,"b",function(){return s});var a=n("Ktcs"),i=n("VfuR"),r=n.n(i),o=Object(a.createContext)(!1);o.Provider.propTypes={value:r.a.bool.isRequired};var s=function(){return Object(a.useContext)(o)}},ThQy:function(e,t,n){"use strict";n.d(t,"a",function(){return s});n.d(t,"b",function(){return c});var a=n("Ktcs"),i=n("VfuR"),r=n.n(i),o=n("CFVt"),s=Object(a.createContext)(void 0);s.Provider.propTypes={value:r.a.oneOf([o.c,o.a]).isRequired};var c=function(){return Object(a.useContext)(s)}},Thgt:function(e,t,n){"use strict";var a=n("QgEn"),i=n("46u0"),r=n.n(i),o=n("jqvl"),s=n.n(o),c=n("mpvR"),d="universalSidebar.alertHelpers.addMutationResultAlert.mutationFailed",l="universalSidebar.alertHelpers.addMutationResultAlert.mutationSucceeded",u=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.titleKey,n=e.titleKeyOptions,i=e.messageKey,o=e.messageKeyOptions,u=e.mutationFailed,m=void 0!==u&&u,b=e.type,p=void 0===b?m?"warning":"info":b,j=function(){return i||(m?d:l)};Object(c.a)({titleText:t&&Object(a.jsx)(r.a,{message:t,options:n}),message:Object(a.jsx)(s.a,{message:j(),options:o}),type:p,timeout:7e3})};t.a=u},WTz7:function(e,t,n){"use strict";n.d(t,"a",function(){return r});n.d(t,"b",function(){return o});var a=n("SYgn"),i=n.n(a),r=function(e,t){window.newrelic&&window.newrelic.addPageAction("crmSidebarReagan",Object.assign({status:"partial query response",queryLocation:e,usingGraphQL:!0},t));console.warn("customer-data-sidebar: partial query response "+e,t.message)},o=function(e,t){window.newrelic&&window.newrelic.addPageAction("crmSidebarReagan",Object.assign({status:"query error",queryLocation:e,usingGraphQL:!0},t));i.a.captureMessage("customer-data-sidebar: query error "+e,{extra:Object.assign({status:"query error",queryLocation:e,usingGraphQL:!0},t)});console.error("customer-data-sidebar: query error "+e,t.message)}},WewH:function(e,t,n){"use strict";n.d(t,"a",function(){return r});n.d(t,"d",function(){return o});n.d(t,"c",function(){return s});n.d(t,"b",function(){return c});n.d(t,"e",function(){return d});var a=n("omic"),i=n.n(a),r=i()(["totalCount"]),o=i()(["pagedResult","offset","offsetTimestamp"]),s=i()(["pagedResult","offset","offsetId"]),c=i()(["pagedResult","hasMore"]),d=i()(["pagedResult","results"])},"XDj/":function(e,t,n){"use strict";n.d(t,"a",function(){return s});var a=n("MQNR"),i=n("eUxV"),r=n("nDpY"),o=n.n(r),s=function(e){var t=e.objectType,n=e.objectTypeId,r=e.objectId,s=o.a.get();switch(t||n){case a.CONTACT:case"0-1":return"/contacts/"+s+"/contact/"+encodeURIComponent(r);case a.COMPANY:case"0-2":return"/contacts/"+s+"/company/"+encodeURIComponent(r);case a.DEAL:case"0-3":return"/contacts/"+s+"/deal/"+encodeURIComponent(r);case a.TICKET:case"0-5":return"/contacts/"+s+"/ticket/"+encodeURIComponent(r);case i.i:case i.g:case i.n:return null;default:return"/contacts/"+s+"/record/"+encodeURIComponent(n||i.k[t]||t)+"/"+encodeURIComponent(r)}}},ZFBm:function(e,t,n){"use strict";n.d(t,"g",function(){return a});n.d(t,"h",function(){return i});n.d(t,"d",function(){return r});n.d(t,"e",function(){return o});n.d(t,"c",function(){return s});n.d(t,"b",function(){return c});n.d(t,"f",function(){return d});n.d(t,"i",function(){return l});n.d(t,"a",function(){return u});var a=function(e){return{key:"edited-contact-record",properties:{action:"edited contact record","crm-property-edited":e.fieldName}}},i=function(){return{key:"opened-contact-record",properties:{action:"opened contact record"}}},r=function(e){return{key:"clicked-view-all",properties:{action:"clicked view all",object:e.objectType}}},o=function(e){return{key:"clicked-view-more-properties",properties:{action:"clicked view more properties",object:e.objectType}}},s=function(e){return{key:"clicked-to-create-crm-object",properties:{action:"clicked to create crm object","object-type":e.objectType}}},c=function(){return{key:"clicked-to-associate-crm-object",properties:{action:"clicked to associate crm object"}}},d=function(e){return{key:"created-crm-object",properties:{action:"created crm object","object-type":e.objectType}}},l=function(e){return{key:"unassociated-crm-object",properties:{action:"unassociated crm object","association-type":e.associationType}}},u=function(){return{key:"associated-visitor-to-contact",properties:{action:"associated visitor to contact"}}}},"a/Fj":function(e,t,n){"use strict";n.d(t,"a",function(){return s});n.d(t,"b",function(){return c});var a=n("Ktcs"),i=n("QYOI"),r=n("VfuR"),o=n.n(r),s=Object(a.createContext)(null);s.Provider.propTypes={value:o.a.shape({setPreviewConfig:o.a.func.isRequired,closeSidebar:o.a.func.isRequired,fromObjectType:o.a.string.isRequired,fromObjectId:o.a.string.isRequired}).isRequired};var c=Object(i.Record)({objectTypeId:null,objectId:null})},aHWB:function(e,t,n){"use strict";var a=n("vTCD"),i=n("k8Et"),r=n("mNyx"),o=n("txVw"),s=n("pGTB"),c=n("QgEn"),d=n("VfuR"),l=n.n(d),u=n("Ktcs"),m=n("E7+s"),b=n("5jW3"),p=n("mDbF"),j=n.n(p),k=n("QYOI"),f=n("5b5O"),v=n.n(f),O=n("os+u"),y=n("nDpY"),g=n.n(y),h=n("GTTy"),S=n("FNlN"),N=n("QhRM"),C=n("eP/i"),T=n("fwDr"),I=n("P4dz"),x=n("2IIJ"),F=n("leqx"),A=n("McP0"),D=n("MQNR"),R=n("cWXR"),P=n("46u0"),E=n.n(P),_=n("uI75"),w={DETRACTOR:C.CHART_RED,PASSIVE:C.CHART_ORANGE,PROMOTER:C.CHART_GREEN},L=function(e){return"/contacts/"+g.a.get()+"/ticket/"+e},q="customerDataObjectsUiComponents.FeedbackChicklet",M="KNOWLEDGE",V="CUSTOM",U=function(e){var t=e.associations,n=e.iconSize,a=e.objectType,i=e.onClick,r=e.onExternalClick,o=e.recordHref,s=e.subject,d=e.useLegacyDesign,l=function(){var e=s&&Object(I.a)(s).toString();i(e,a)},u=Object(I.d)(s,"hs_response_group"),m=Object(I.d)(s,"hs_survey_type"),b=Object(I.d)(s,"hs_value"),p=Object(I.d)(s,"hs_content"),k=p&&Object(c.jsx)(T.a,{placement:"left",tooltip:Object(c.jsx)(E.a,{message:q+".responseQuotes",options:{response:p}}),children:Object(c.jsx)(E.a,{message:q+".response",options:{response:p}})}),f=m!==V?Object(c.jsxs)("div",{className:"m-top-1",children:[Object(c.jsx)(E.a,{className:"m-right-1",message:q+".rating.label"}),m!==M&&Object(c.jsx)(h.a,{color:w[u]}),Object(c.jsx)(E.a,{message:q+".rating."+m+"."+u,options:{rating:b}})]}):null,O=Object(c.jsxs)("div",{children:[Object(c.jsxs)("div",{className:"flex-row justify-start m-top-1",children:[Object(c.jsx)(E.a,{className:"m-right-1",message:q+".dateLabel"}),Object(c.jsx)(v.a,{value:parseInt(Object(I.d)(s,"hs_submission_timestamp"),10),format:"ll",type:"portalTz"})]}),f]}),y=t.map(function(e){return{children:Object(c.jsx)("div",{children:Object(c.jsx)(N.a,{href:L(Object(I.a)(e)),children:Object(I.g)(e)})}),href:L(Object(I.a)(e)),style:{alignSelf:"normal"},type:"ticket"}}).toArray(),g=j.a.text(q+".title."+Object(I.d)(s,"hs_survey_type")),C=p?[k]:null,x=t.map(function(){return Object(c.jsx)(S.a,{distance:"small"},"1")}).toArray();return Object(c.jsx)(_.b,{associations:y,iconSize:n,isBoard:!1,objectType:D.FEEDBACK_SUBMISSION,onClick:i&&l,oneLinersAboveDescription:C,oneLinersBelowDescription:x,onExternalClick:r,recordHref:o,subject:s,title:g,subtitle:O,useLegacyDesign:d})};U.propTypes={associations:Object(O.listOf)(l.a.instanceOf(x.a)),iconSize:l.a.oneOfType([l.a.oneOf(Object.keys(R.c)),l.a.number]),objectType:F.a.isRequired,onClick:l.a.func,onExternalClick:l.a.func,recordHref:l.a.string,subject:l.a.instanceOf(A.a).isRequired,useLegacyDesign:l.a.bool};U.defaultProps={associations:Object(k.List)()};var B=U,H=n("tPYf"),K=n("2IJn"),Y=n("inIR"),z=n("xqzv");n.d(t,"a",function(){return Q});var Q=1,W=function(e){var t=Date.now(),n=Object(I.d)(e,"createdate");return"/feedback/"+g.a.get()+"/dashboard/manage/responses?count=20&startDate="+n+"&endDate="+t+"&contact="+Object(I.a)(e)},G={CES:"support",CSAT:"satisfaction",NPS:"loyalty",CUSTOM:"custom"},J="KNOWLEDGE",Z=function(e,t,n){return"/feedback/"+g.a.get()+"/"+G[e]+"/"+t+"/submissions/all/"+n},X=function(e){return"/knowledge/"+g.a.get()+"/insights/article/"+e+"/performance"},$=function(e){Object(s.a)(t,e);function t(){var e,n;Object(a.a)(this,t);for(var i=arguments.length,s=new Array(i),c=0;c<i;c++)s[c]=arguments[c];(n=Object(r.a)(this,(e=Object(o.a)(t)).call.apply(e,[this].concat(s)))).handleRecordClick=function(){Object(K.c)(n.props.tracker,{subType:Y.a,type:D.FEEDBACK_SUBMISSION})};return n}Object(i.a)(t,[{key:"getIsLoaded",value:function(){var e=this.props,t=e.associationsByItemId,n=e.countObject,a=e.items,i=e.subject;return!Object(m.d)(t,n,a,i)}},{key:"getDataFor",value:function(e){var t=this.props.associationsByItemId;return Object(m.e)(e)?e.map(function(e){return{associations:t&&t.get(Object(I.a)(e)),objectType:D.FEEDBACK_SUBMISSION,subject:e}}):e}},{key:"render",value:function(){var e=this,t=this.props,n=t.cardButtons,a=t.countObject,i=t.items,r=t.maxItemsToShow,o=t.objectType,s=t.onPreviewRecord,d=t.subject,l=t.subjectId,u=this.getDataFor(i).map(function(t){var n=t.subject,a=Object(I.d)(n,"hs_survey_type"),i=Object(I.d)(n,"hs_survey_id"),r=Object(I.d)(n,"hs_ingestion_id"),o=Object(I.d)(n,"hs_knowledge_article_id");return Object.assign({},t,{isEditable:!1,key:Object(I.a)(t.subject),onClick:s,onExternalClick:e.handleRecordClick,recordHref:a===J?X(o):Z(a,i,r)})});return Object(c.jsx)(b.a,{cardButtons:n,cardType:z.a.FEEDBACK,className:this.getIsLoaded()?"reagan-test-"+z.a.FEEDBACK:"",Component:B,count:a.count,hasMore:a.hasMore&&o===D.CONTACT,items:u,maxItemsToShow:r,objectType:o,subject:d,subjectId:l,viewAllLink:o===D.CONTACT?W(d):null})}}]);return t}(u.Component);$.propTypes={associationsByItemId:l.a.object,cardButtons:l.a.array,countObject:l.a.object,items:l.a.array,maxItemsToShow:l.a.number,objectType:F.a.isRequired,onPreviewRecord:l.a.func,subject:H.a,subjectId:l.a.string,tracker:l.a.object};$.defaultProps={countObject:{count:0,hasMore:!1},items:[],maxItemsToShow:Q};t.b=$},c97T:function(e,t,n){"use strict";var a=n("QgEn"),i=n("Ktcs"),r=n("VfuR"),o=n.n(r),s=n("19qb"),c=n("kZyb"),d=n("7TfU"),l=n("9f1P"),u=n.n(l),m=n("2I7S"),b=n("3Yd4"),p=n("QhRM"),j=u.a.div.withConfig({displayName:"ToolLink__StyledLinkContainer",componentId:"sc-1bvv6ya-0"})(["padding-bottom:4px;"]),k=u()(p.a).withConfig({displayName:"ToolLink__StyledUILink",componentId:"sc-1bvv6ya-1"})(["font-weight:500;margin-bottom:;"]);function f(e){var t=e.text;return Object(a.jsx)(m.a,{use:"link",value:t,children:Object(a.jsx)(b.a,{name:"duplicate",size:16})})}function v(e){var t=e.isCopyable,n=e.label,i=e.onClick,r=e.text,o=e.url;return Object(a.jsxs)(j,{className:"tool-link",children:[n?Object(a.jsxs)("span",{className:"m-right-1","data-test-id":"label",children:[n,":"]}):null,Object(a.jsx)(k,{"data-test-id":"link",external:!0,href:o,onClick:i,children:r}),t?Object(a.jsx)(f,{text:r}):null]})}v.propTypes={isCopyable:o.a.bool,label:o.a.string,onClick:o.a.func,text:o.a.string.isRequired,url:o.a.string.isRequired};v.defaultProps={isCopyable:!1,label:"",onClick:function(){}};var O=v,y=n("rGVC"),g=n("vTCD"),h=n("k8Et"),S=n("S4BB"),N=n("55Vm"),C=n.n(N),T=Object(S.createTracker)({events:C.a,isBeforeUnload:!0}),I=new(function(){function e(){Object(g.a)(this,e)}Object(h.a)(e,[{key:"clickSqlLink",value:function(){T.track("zorseCrmComponentsInteraction",{action:"click-sql-link",allowQa:!0})}}]);return e}());function x(e){return e.url?Object(a.jsx)(O,Object.assign({},e)):null}function F(e){var t=e.toolLinks;return t?Object(a.jsx)("div",{children:t.loading?Object(a.jsx)(d.a,{grow:!1}):Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(x,{text:"Zorse ticket",url:t.zorseTicketLink}),Object(a.jsx)(x,{text:"Source URL",url:t.chatSourceLink}),Object(a.jsx)(x,{isCopyable:!0,label:"Hub ID",text:t.hubId,url:t.hubIdLink}),Object(a.jsx)(x,{text:"Hub Details",url:t.hubDetailsLink}),Object(a.jsx)(x,{text:"Support Toolbox",url:t.fccSupportInboxLink}),Object(a.jsx)(x,{text:"Email Support Tools",url:t.emailSupportToolLink}),Object(a.jsx)(x,{onClick:I.clickSqlLink,text:"Submit a Service Qualified Lead",url:t.sqlFormLink}),Object(a.jsx)("div",{className:"m-top-4",children:Object(a.jsxs)(c.a,{use:"help",children:["Powered by ",Object(a.jsx)("b",{children:"Revenue"})]})})]})}):null}F.propTypes={toolLinks:o.a.instanceOf(y.a)};F.defaultProps={toolLinks:void 0};var A=F,D=n("ykVc"),R=n("g+dq"),P=n.n(R),E="zorse/v2",_=function(e){return P.a.get(E+"/tools/links/"+e)},w=function(e){return function(t){t({type:D.a,meta:"request"});return _(e).then(function(e){return t({type:D.a,meta:"response",payload:e})},function(e){return t({type:D.a,error:!0,payload:e})})}},L=function(e){var t=Object(s.useDispatch)();Object(i.useEffect)(function(){t(w(e.threadId))},[t,e.threadId]);var n=Object(s.useSelector)(function(e){return e.zorseCrmComponents.toolLinks});return Object(a.jsx)(A,{toolLinks:n})};L.propTypes={threadId:o.a.string.isRequired};var q=L,M=function(e){var t=e.threadId;return Object(a.jsx)(q,{threadId:t})},V=function(){return"Tools"};n.d(t,"a",function(){return M});n.d(t,"b",function(){return V})},cFIx:function(e,t){e.exports={"sidebar-interaction":{name:"sidebar-interaction",class:"interaction",properties:{action:"string",subAction:{type:"string",isOptional:!0},type:{type:"string",isOptional:!0},subType:{type:"string",isOptional:!0}},namespace:"crm"},recordInteractions:{name:"record interactions",class:"interaction",properties:{action:"string",objectType:{type:"string",isOptional:!0},type:{type:"string",isOptional:!0},subAction:{type:"string",isOptional:!0}},namespace:"crm"}}},cqEQ:function(e,t,n){"use strict";var a=n("fzi9"),i=n("Ktcs"),r=n("MyjV"),o={id:"3870a0cb4d1b57b030d5e4fae85a388ac1d9bec1b3426c6647752b55a127884e",kind:"Document",definitions:function(e){var t={};return e.filter(function(e){if("FragmentDefinition"!==e.kind)return!0;var n=e.name.value;if(t[n])return!1;t[n]=!0;return!0})}([{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"UpdateCrmObjectProperties"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"propertyUpdatesInput"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"UpdateCrmObjectPropertiesInput"}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"updateResponse"},name:{kind:"Name",value:"updateCrmObjectProperties"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"propertyUpdatesInput"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"updatedObject"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"allProperties"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"value"}}]}},{kind:"FragmentSpread",name:{kind:"Name",value:"TicketFields"}},{kind:"FragmentSpread",name:{kind:"Name",value:"DealFields"}},{kind:"FragmentSpread",name:{kind:"Name",value:"BasicCrmObjectFields"}}]}},{kind:"Field",name:{kind:"Name",value:"userErrors"}}]}}]}}].concat({kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"TicketFields"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"CrmObject"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Ticket"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"defaultProperties"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"subject"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"value"}}]}},{kind:"Field",name:{kind:"Name",value:"time_to_close"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"value"}}]}},{kind:"Field",name:{kind:"Name",value:"hubspot_owner_id"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"value"}}]}},{kind:"Field",name:{kind:"Name",value:"closed_date"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"value"}}]}}]}},{kind:"Field",name:{kind:"Name",value:"pipelineInfo"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"currentStage"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"stageId"}}]}},{kind:"Field",name:{kind:"Name",value:"pipeline"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"pipelineId"}},{kind:"Field",name:{kind:"Name",value:"stages"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"label"}},{kind:"Field",name:{kind:"Name",value:"displayOrder"}},{kind:"Field",name:{kind:"Name",value:"stageId"}}]}}]}}]}}]}}]}}]}.definitions,{kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"DealFields"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"CrmObject"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Deal"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"defaultProperties"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"dealname"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"value"}}]}},{kind:"Field",name:{kind:"Name",value:"deal_currency_code"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"value"}}]}}]}},{kind:"Field",name:{kind:"Name",value:"pipelineInfo"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"currentStage"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"stageId"}}]}},{kind:"Field",name:{kind:"Name",value:"pipeline"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"pipelineId"}},{kind:"Field",name:{kind:"Name",value:"stages"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"label"}},{kind:"Field",name:{kind:"Name",value:"displayOrder"}},{kind:"Field",name:{kind:"Name",value:"stageId"}}]}}]}}]}}]}}]}}]}.definitions,{kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"BasicCrmObjectFields"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"CrmObject"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"BasicCrmObject"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"allProperties"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"value"}}]}}]}}]}}]}.definitions))},s=n("omic"),c=n.n(s);n.d(t,"a",function(){return l});var d=function(e){throw new Error("[useUpdateCrmObjectPropertiesMutation]: required prop "+e+" was not provided")},l=function(e){var t=e.objectType,n=void 0===t?d("objectType"):t,s=e.objectId,l=void 0===s?d("objectId"):s,u=e.propertySourceInfo,m=void 0===u?d("propertySourceInfo"):u,b=e.onError,p=e.onSuccess,j=e.onCompleted,k=Object(i.useCallback)(function(){"function"==typeof j&&j()},[j]),f=Object(i.useCallback)(function(){"function"==typeof p&&p();k()},[p,k]),v=Object(i.useCallback)(function(e){"function"==typeof b&&b(e);k()},[b,k]),O=Object(r.useMutation)(o,{onError:v}),y=Object(a.a)(O,1)[0];return Object(i.useCallback)(function(e){y({variables:{propertyUpdatesInput:{objectType:n,objectId:l,properties:e,propertySourceInfo:m}},update:function(e,t){var n=c()(["data","updateResponse","userErrors"],t);n&&n.length?v(n[0]):f()}})},[y,n,l,m,f,v])}},d0QT:function(e,t,n){"use strict";n.d(t,"a",function(){return o});n.d(t,"b",function(){return s});var a=n("Ktcs"),i=n("VfuR"),r=n.n(i),o=Object(a.createContext)(null);o.Provider.propTypes={value:r.a.shape({canView:r.a.bool.isRequired,canEditSubject:r.a.bool.isRequired,canDeleteSubject:r.a.bool.isRequired,readOnly:r.a.bool.isRequired,scopes:r.a.arrayOf(r.a.string.isRequired).isRequired,getPropertyPermission:r.a.func.isRequired,gates:r.a.arrayOf(r.a.string.isRequired).isRequired}).isRequired};var s=function(){return Object(a.useContext)(o)}},dI04:function(e,t,n){"use strict";n.r(t);var a=n("YM6t"),i=n("OwGx"),r=n("QgEn"),o=n("Ktcs"),s=n("VfuR"),c=n.n(s),d=n("nDpY"),l=n.n(d),u=n("NEfq"),m=c.a.arrayOf(u.a),b=c.a.objectOf(c.a.oneOfType([u.a,c.a.string])),p=c.a.arrayOf(u.a),j={id:c.a.number.isRequired,allProperties:m,defaultProperties:b},k=c.a.shape(j);c.a.shape({node:k,summaryProperties:p});function f(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.allProperties,n=e.defaultProperties,a=e.summaryProperties,i=e.secondaryProperties;return c.a.shape({node:c.a.shape(Object.assign({},j,{allProperties:t?m.isRequired:m,defaultProperties:n?b.isRequired:b})),summaryProperties:a?p.isRequired:p,secondaryProperties:i?p.isRequired:p})}var v=n("pPiP"),O=n.n(v),y=n("a/Fj"),g=n("MQNR"),h=n("tPYf"),S=n("lKVG"),N=n("46u0"),C=n.n(N),T=n("DqRu"),I=n("QhRM"),x=n("f0FW"),F=n("eUxV"),A=n("2h/E"),D=function(e){var t=F.j[e.associationDefinitions[0].toObjectTypeDefinition.id];return Object(A.a)(t)?Object(x.b)(t):e.associationDefinitions[0].toObjectTypeDefinition.pluralForm.toLowerCase()},R=function(e){return e?"universalSidebar.cards.AssociatedObjectsCardPaginator.withObjects.viewAllHasMore":"universalSidebar.cards.AssociatedObjectsCardPaginator.withObjects.viewAll"},P=function(e){var t=e.data,n=e.onViewMore,a=e.viewAllLink;if(a){var i=t.count.edges.length,o=t.count.pageInfo.hasNextPage,s=R(o),c=D(t);return Object(r.jsx)(I.a,{href:a,"data-selenium-test":"associated-objects-card-view-more",className:"force-external-navigation",children:Object(r.jsx)(C.a,{message:s,options:{count:i,associationToPlural:c}})})}return t.associatedObjects.pageInfo.hasNextPage?Object(r.jsx)(T.a,{use:"link",onClick:n,"data-selenium-test":"associated-objects-card-view-more",children:Object(r.jsx)(C.a,{message:"universalSidebar.cards.AssociatedObjectsCardPaginator.viewMore"})}):null};P.propTypes={data:c.a.shape({associatedObjects:c.a.shape({edges:c.a.arrayOf(f({summaryProperties:!0})).isRequired,pageInfo:c.a.shape({endCursor:c.a.string.isRequired,hasNextPage:c.a.bool.isRequired}).isRequired}).isRequired,count:c.a.shape({edges:c.a.array.isRequired,pageInfo:c.a.shape({hasNextPage:c.a.bool.isRequired}).isRequired}).isRequired}).isRequired,viewAllLink:c.a.string,onViewMore:c.a.func.isRequired};var E,_,w,L,q=P,M=n("9f1P"),V=n.n(M),U=n("A97v"),B=n("ldyT"),H=n("SZxU"),K=n("o3aL"),Y=n("mDbF"),z=n.n(Y),Q=n("fwDr"),W=n("/VSk"),G=n.n(W),J=n("kZyb"),Z=n("QYOI"),X="HUBSPOT_DEFINED",$=279,ee=1,te=280,ne=2,ae=Z.Set.of($,ee,te,ne),ie=272,re=271,oe=341,se=5,ce=342,de=6,le=Z.Set.of(oe,re,se,ce,ie,de),ue=274,me=273,be=339,pe=26,je=340,ke=25,fe=Z.Set.of(be,me,pe,je,ue,ke),ve=(_={},Object(i.a)(_,g.CONTACT,Object(i.a)({},g.COMPANY,$)),Object(i.a)(_,g.COMPANY,(E={},Object(i.a)(E,g.CONTACT,te),Object(i.a)(E,g.TICKET,je),Object(i.a)(E,g.DEAL,ce),E)),Object(i.a)(_,g.TICKET,Object(i.a)({},g.COMPANY,be)),Object(i.a)(_,g.DEAL,Object(i.a)({},g.COMPANY,oe)),_),Oe=(L={},Object(i.a)(L,g.CONTACT,Object(i.a)({},g.COMPANY,ee)),Object(i.a)(L,g.COMPANY,(w={},Object(i.a)(w,g.CONTACT,ne),Object(i.a)(w,g.TICKET,ue),Object(i.a)(w,g.DEAL,ie),w)),Object(i.a)(L,g.TICKET,Object(i.a)({},g.COMPANY,me)),Object(i.a)(L,g.DEAL,Object(i.a)({},g.COMPANY,re)),L),ye=[].concat(Object(a.a)(ae.toJS()),Object(a.a)(le.toJS()),Object(a.a)(fe.toJS())),ge=Z.Set.of(ee,re,se,me,pe),he=n("7gk9"),Se=function(e){switch(e){case he.a:case he.c:return"universalSidebar.cards.AssociatedObjectsCard.roles.advisor";case he.b:case he.d:return"universalSidebar.cards.AssociatedObjectsCard.roles.boardMember";case he.t:case he.f:return"universalSidebar.cards.AssociatedObjectsCard.roles.contractor";case he.H:case he.h:return"universalSidebar.cards.AssociatedObjectsCard.roles.manager";case he.I:case he.i:return"universalSidebar.cards.AssociatedObjectsCard.roles.owner";case he.J:case he.j:return"universalSidebar.cards.AssociatedObjectsCard.roles.partner";case he.M:case he.l:return"universalSidebar.cards.AssociatedObjectsCard.roles.reseller";default:return null}},Ne="HUBSPOT_DEFINED",Ce=function(e){return e&&e.reduce(function(e,t){if(!t.label||ge.has(t.associationTypeId)&&t.associationCategory===Ne)return e;Se(t.name)?e.push(Object(r.jsx)(C.a,{message:Se(t.name)},t.associationTypeId)):e.push(t.label);return e},[])},Te=function(e){var t=e.associationDefinitions,n=Ce(t);return n?Object(r.jsx)(J.a,{use:"help","data-selenium-test":"chicklet-association-label",children:Object(r.jsx)(Q.a,{children:Object(r.jsx)(G.a,{lastWordConnector:z.a.text("universalSidebar.chicklet.AssociationChicklet.delimiter"),twoWordsConnector:z.a.text("universalSidebar.chicklet.AssociationChicklet.delimiter"),children:n.map(function(e){return e})})})}):null},Ie=V()(K.a).withConfig({displayName:"AssociationChicklet__StyledTag",componentId:"pnhvwp-0"})(["vertical-align:top;margin:-1px 0 0 -13px;"]),xe=V.a.div.withConfig({displayName:"AssociationChicklet__StyledSpan",componentId:"pnhvwp-1"})(["float:right;padding-top:3px;padding-left:10px;"]),Fe=function(e){var t=e.children,n=e.associationDefinitions,a=e.avatarProps,i=e.primaryIdentifier,o=e.secondaryIdentifier,s=e.isPrimary,c=void 0!==s&&s,d=Object(B.a)(H.a,!0),l=function(){return Object(r.jsx)(xe,{"data-selenium-test":"chicklet-avatar",children:Object(r.jsx)(U.default,Object.assign({},a))})},u=function(){return i?Object(r.jsx)("div",{"data-selenium-test":"chicklet-primary-identifier",children:i}):null},m=function(){return o};return Object(r.jsxs)("div",{children:[c&&Object(r.jsx)("div",{children:Object(r.jsx)(Ie,{use:"default",className:"m-bottom-2",children:Object(r.jsx)(C.a,{message:"universalSidebar.chicklet.chickletPrimaryTag"})})}),l(),u(),m(),Object(r.jsxs)("div",{className:"flex-column",children:[t,d&&Object(r.jsx)(Te,{associationDefinitions:n})]})]})};Fe.propTypes={associationDefinitions:c.a.array,avatarProps:c.a.object.isRequired,children:c.a.node,primaryIdentifier:c.a.node,secondaryIdentifier:c.a.node,isPrimary:c.a.bool};var Ae=Fe,De=n("uJH4"),Re=n("87J0");function Pe(e){var t=e.children,n=e.primaryTagSpacing,a="m-bottom-3 p-x-3 flex-no-wrap "+(void 0!==n&&n?"p-bottom-2":"p-y-2");return Object(r.jsx)(De.a,{"data-selenium-test":"chicklet",compact:!0,className:a,children:Object(r.jsx)(Re.a,{className:"p-all-0 width-100",children:t})})}Pe.propTypes={children:c.a.node,primaryTagSpacing:c.a.bool};var Ee=n("fzi9"),_e=n("eP/i"),we=n("QDGf"),Le=n("TMcE"),qe=n("PAZM"),Me=V.a.div.withConfig({displayName:"ChickletHoverActionsContainer__ButtonSection",componentId:"sc-1f0torg-0"})(["top:",";right:",";position:absolute;background:",";z-index:",";"],function(e){return e.isUngatedForDataDensityRefactor?"-10px":"8px"},function(e){return e.isUngatedForDataDensityRefactor?"-10px":"8px"},_e.OLAF,we.ab),Ve={Buttons:c.a.elementType.isRequired,buttonsProps:c.a.object,children:c.a.node.isRequired},Ue=function(e){var t=e.Buttons,n=e.buttonsProps,a=e.children,i=Object(Le.b)(),s=Object(qe.a)(),c=Object(o.useState)(!1),d=Object(Ee.a)(c,2),l=d[0],u=d[1],m=Object(o.useCallback)(function(){u(!0)},[]),b=Object(o.useCallback)(function(){u(!1)},[]);return i?a:Object(r.jsxs)("div",{onMouseEnter:m,onMouseLeave:b,"data-selenium-test":"preview-header",children:[a,l&&Object(r.jsx)(Me,{isUngatedForDataDensityRefactor:s,children:Object(r.jsx)(t,Object.assign({},n))})]})};Ue.defaultProps={buttonsProps:{}};Ue.propTypes=Ve;var Be=Ue,He={Buttons:c.a.elementType.isRequired,children:c.a.node,onPreview:c.a.func.isRequired,onRemoveAssociation:c.a.func,onUpdateAssociations:c.a.func,toObjectLabel:c.a.string,canView:c.a.bool.isRequired,associatedObjectsIds:c.a.array,associationDefinitions:c.a.array,fromObjectType:c.a.string,objectId:c.a.number,objectType:c.a.string,primaryAssociationObjectInfo:c.a.shape({primaryAssociationObjectId:c.a.number,primaryAssociationPrimaryDisplayLabel:c.a.string}),primaryDisplayLabelPropertyName:c.a.string},Ke=function(e){var t=e.Buttons,n=e.children,a={onPreview:e.onPreview,onRemoveAssociation:e.onRemoveAssociation,onUpdateAssociations:e.onUpdateAssociations,toObjectLabel:e.toObjectLabel,canView:e.canView,associatedObjectsIds:e.associatedObjectsIds,associationDefinitions:e.associationDefinitions,fromObjectType:e.fromObjectType,objectType:e.objectType,primaryAssociationObjectInfo:e.primaryAssociationObjectInfo,primaryDisplayLabelPropertyName:e.primaryDisplayLabelPropertyName,objectId:e.objectId};return Object(r.jsx)(Be,{Buttons:t,buttonsProps:a,children:n})};Ke.propTypes=He;var Ye=Ke,ze=n("37ae"),Qe=n.n(ze),We=n("omic"),Ge=n.n(We);function Je(e){var t=e.companyName,n=e.jobTitle;return t||n?t?n?Object(r.jsx)(C.a,{message:"universalSidebar.formatterComponents.FormattedJobTitle.titleAtCompany",options:{title:n,company:t}}):t:n:null}Je.propTypes={companyName:c.a.string,jobTitle:c.a.string};var Ze=n("MyjV"),Xe={id:"8dd04ece99f51f3dd577df1f51a4fbdc1c270351423b964b64503865577ec430",kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"DeleteCrmObjectAssociationBySpec"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"removeAssociationInput"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"DeleteCrmObjectAssociationBySpecInput"}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"deleteCrmObjectAssociationBySpec"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"removeAssociationInput"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"userErrors"}}]}}]}}]},$e=n("l8+2"),et=n("HZCd"),tt=n("lakq"),nt=n("Thgt"),at=function(e){var t=e.toObjectType,n=e.toObjectId,a=e.toObjectIsPrimary,i=e.updateQuery;return Object(o.useCallback)(function(){return i(function(e){var i=F.k[t]||t,r=e.crmObject.cards.find(function(e){return e.__typename===tt.a&&e.associationDefinitions[0].toObjectTypeId===i});if(!r)return e;var o=a?{primaryEdge:null}:{secondaryEdges:r.associatedObjects.secondaryEdges.filter(function(e){return e.node.id!==n})},s=Object.assign({},r,{associatedObjects:Object.assign({},r.associatedObjects,{},o,{edges:r.associatedObjects.edges.filter(function(e){return e.node.id!==n})}),count:Object.assign({},r.count,{edges:r.count.edges.filter(function(e){return e.node.id!==n})})}),c=e.crmObject.cards.map(function(e){return e===r?s:e});return Object.assign({},e,{crmObject:Object.assign({},e.crmObject,{cards:c})})})},[t,n,a,i])},it=function(e){var t=e.associationSpecs,n=e.fromObjectId,a=e.fromObjectType,i=e.toObjectId,r=e.toObjectType,s=e.toObjectIsPrimary,c=void 0!==s&&s,d=e.onSuccess,l=e.onError,u=Object(Ze.useMutation)(Xe),m=Object(Ee.a)(u,1)[0],b=Object(o.useContext)($e.a).updateQuery,p=Object(et.b)().onAssociationUpdate,j=F.k[r]||r,k=F.k[a]||a,f=Object(o.useCallback)(function(){"function"==typeof d&&d();p({objectId:""+n,objectType:a,associationObjectType:r})},[d,p,a,n,r]),v=Object(o.useCallback)(function(e){"function"==typeof l&&l(e)},[l]),O=at({toObjectType:r,toObjectId:i,toObjectIsPrimary:c,updateQuery:b});return Object(o.useCallback)(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=e.onSuccessDispatch,r=e.onFailureDispatch;m({variables:{removeAssociationInput:{fromObjectTypeAndId:{objectTypeId:k,objectId:n},toObjectTypeAndId:{objectTypeId:j,objectId:i},associationSpecs:t}},update:function(e,t){var n=t.data,o=Ge()(["updateResponse","userErrors"],n)||[];if(0!==o.length){v(o);"function"==typeof r&&r()}else{O();f([i]);"function"==typeof a&&a()}}}).catch(function(){"function"==typeof r&&r();Object(nt.a)({mutationFailed:!0})}).done()},[m,k,n,j,i,t,O,f,v])},rt=n("4cYC"),ot=n("J92U"),st="associations/v1/associations",ct="associations/v1/associations/delete",dt=function(e){var t=e.cardId,n=e.fromObjectId,a=e.fromObjectType,i=e.toObjectId,r=e.onSuccess,s=e.onError,c=Object(o.useContext)($e.a).client,d=Object(o.useCallback)(function(){c.query({fetchPolicy:"network-only",query:rt.b,variables:{objectType:a,subjectId:+n,cardId:t}})},[c,a,n,t]);return Object(o.useCallback)(function(e){var t=e.createAssociations,a=e.deleteAssociations,o=e.onSuccessDispatch,c=void 0===o?function(){}:o,l=e.onFailureDispatch,u=void 0===l?function(){}:l;Promise.all([t.length>0&&Object(ot.d)(""+st,t.map(function(e){var t=e.associationCategory,a=e.associationTypeId;return{fromObjectId:n,toObjectId:i,associationCategory:t,associationTypeId:a}})),a.length>0&&Object(ot.d)(""+ct,a.map(function(e){var t=e.associationCategory,a=e.associationTypeId;return{fromObjectId:n,toObjectId:i,associationCategory:t,associationTypeId:a}}))]).then(function(){d();"function"==typeof r&&r();c();Object(nt.a)({titleKey:"universalSidebar.chicklet.ChickletHoverEditAssociationModal.successfullyUpdated"})}).catch(function(e){"function"==typeof s&&s();u();throw e}).done()},[n,d,i,r,s])},lt=n("XDj/"),ut=n("qvRI"),mt=n("53i0"),bt=n("vuW9"),pt=function(e){var t=e.onClick,n=e.canView,a=Object(qe.a)()?"tertiary":"tertiary-light";return Object(r.jsx)(bt.a,{title:Object(r.jsx)(C.a,{message:"universalSidebar.chicklet.ChickletPreviewButton.noViewAccess"}),disabled:n,placement:"left",children:Object(r.jsx)(T.a,{"data-selenium-test":"preview-header--preview-button",onClick:t,use:a,size:"xs",disabled:!n,children:Object(r.jsx)(C.a,{message:"universalSidebar.chicklet.ChickletPreviewButton.preview"})})})};pt.propTypes={onClick:c.a.func.isRequired,canView:c.a.bool.isRequired};var jt=pt,kt={modal:null,returnState:null},ft="PRIMARY_STATE",vt="SECONDARY_STATE",Ot="PRIMARY_MODAL_PRIMARY_STATE",yt="PRIMARY_MODAL_SECONDARY_PRIMARY_EXISTS_STATE",gt="PRIMARY_MODAL_SECONDARY_ASSOCIATION_PRIMARY_DOESNT_EXIST_STATE",ht="REMOVE_PRIMARY_ASSOCIATION_MODAL_STATE",St="REMOVE_ASSOCIATION_MODAL_PRIMARY_ONLY_ASSOCIATION_STATE",Nt="REMOVE_SECONDARY_ASSOCIATION_MODAL_STATE",Ct="EDIT_ASSOCIATION_MODAL_STATE",Tt="PRIMARY_MODAL",It="REMOVE_MODAL",xt="EDIT_MODAL",Ft={PRIMARY_STATE:{OPEN_SET_PRIMARY_MODAL:function(e){return Object.assign({},e,{currentState:Ot,modal:Tt})},OPEN_REMOVE_ASSOCIATION_MODAL:function(e,t){return Object.assign({},e,{currentState:t.isOnlyAssociation?St:ht,modal:It})},OPEN_EDIT_ASSOCIATION_MODAL:function(e){return Object.assign({},e,{currentState:Ct,returnState:ft,modal:xt})}},SECONDARY_STATE:{NEW_PRIMARY_SET:function(e,t){return Object.assign({},e,{primaryAssociationObjectId:t.draftPrimaryAssociationObjectId})},OPEN_SET_PRIMARY_MODAL:function(e){return e.primaryAssociationObjectId?Object.assign({},e,{currentState:yt,modal:Tt}):Object.assign({},e,{currentState:gt,modal:Tt})},OPEN_EDIT_ASSOCIATION_MODAL:function(e){return Object.assign({},e,{currentState:Ct,returnState:vt,modal:xt})},OPEN_REMOVE_ASSOCIATION_MODAL:function(e){return Object.assign({},e,{currentState:Nt,modal:It})}},PRIMARY_MODAL_PRIMARY_STATE:{CONFIRM:function(e){return Object.assign({},e,{currentState:vt,primaryAssociationObjectId:null,modal:null})},EXIT_MODAL:function(e){return Object.assign({},e,{currentState:ft,modal:null})}},PRIMARY_MODAL_SECONDARY_PRIMARY_EXISTS_STATE:{CONFIRM:function(e){return Object.assign({},e,{primaryAssociationObjectId:null,modal:null})},NEW_PRIMARY_SET:function(e,t){return Object.assign({},e,{currentState:ft,primaryAssociationObjectId:t.draftPrimaryAssociationObjectId})},EXIT_MODAL:function(e){return Object.assign({},e,{currentState:vt,modal:null})}},PRIMARY_MODAL_SECONDARY_ASSOCIATION_PRIMARY_DOESNT_EXIST_STATE:{CONFIRM:function(e,t){return t.draftPrimaryAssociationObjectId?Object.assign({},e,{currentState:ft,primaryAssociationObjectId:t.draftPrimaryAssociationObjectId,modal:null}):e},EXIT_MODAL:function(e){return Object.assign({},e,{currentState:vt,modal:null})}},EDIT_ASSOCIATION_MODAL_STATE:{CONFIRM:function(e,t){return Object.assign({},e,{currentState:e.returnState,associationIds:t.draftAssociationIds,modal:null,returnState:null})},EXIT_MODAL:function(e){return Object.assign({},e,{currentState:e.returnState,modal:null})}},REMOVE_PRIMARY_ASSOCIATION_MODAL_STATE:{CONFIRM:function(e,t){return Object.assign({},e,{primaryAssociationObjectId:t.primaryAssociationObjectId,modal:null})},EXIT_MODAL:function(e){return Object.assign({},e,{currentState:ft,modal:null,returnState:null})}},REMOVE_ASSOCIATION_MODAL_PRIMARY_ONLY_ASSOCIATION_STATE:{CONFIRM:function(e){return Object.assign({},e,{primaryAssociationObjectId:null,modal:null})},EXIT_MODAL:function(e){return Object.assign({},e,{currentState:ft,modal:null})}},REMOVE_SECONDARY_ASSOCIATION_MODAL_STATE:{CONFIRM:function(e){return Object.assign({},e,{modal:null})},EXIT_MODAL:function(e){return Object.assign({},e,{currentState:vt,modal:null})}}},At=function(e,t){return Ft[e.currentState][t.type](e,t)},Dt=Object(o.createContext)(null);Dt.Provider.propTypes={value:c.a.func.isRequired};var Rt=n("Ukhg"),Pt=n("ju9H"),Et="OPEN_REMOVE_ASSOCIATION_MODAL",_t="OPEN_EDIT_ASSOCIATION_MODAL",wt="OPEN_SET_PRIMARY_MODAL",Lt="CONFIRM",qt="EXIT_MODAL",Mt="NEW_PRIMARY_SET",Vt=function(){var e=Object(o.useContext)(Dt),t=Object(o.useCallback)(function(){return e({type:_t})},[e]);return Object(r.jsx)(T.a,{use:"tertiary-light",size:"xs",onClick:t,"data-selenium-test":"chicklet-edit-btn",children:Object(r.jsx)(C.a,{message:"universalSidebar.chicklet.ChickletHoverActionsDropdown.edit"})})},Ut=n("wBEU"),Bt=n.n(Ut),Ht={associationDefinitions:c.a.array.isRequired,associatedObjectsIds:c.a.array.isRequired,fromObjectType:c.a.string.isRequired},Kt=function(e){var t=e.associationDefinitions,n=e.associatedObjectsIds,a=e.fromObjectType,i=Object(o.useContext)(Dt),s=n.length,c=Object(o.useCallback)(function(){return i({type:Et,isOnlyAssociation:1===s})},[i,s]),d=function(){return a===g.COMPANY&&Bt()(function(e){return e.inverseAssociationTypeId===ee&&e.associationTypeId===ne})(t)};return Object(r.jsx)(bt.a,{title:Object(r.jsx)(C.a,{message:"universalSidebar.chicklet.ChickletHoverActionsDropdown.removeAssociationTooltip"}),disabled:!d(),placement:"left",children:Object(r.jsx)(T.a,{use:"tertiary-light",size:"xs",onClick:c,"data-selenium-test":"chicklet-remove-btn",disabled:d(),children:Object(r.jsx)(C.a,{message:"universalSidebar.chicklet.ChickletHoverActionsDropdown.removeAssociation"})})})};Kt.propTypes=Ht;var Yt,zt,Qt=Kt,Wt={currentState:c.a.string.isRequired},Gt=(Yt={},Object(i.a)(Yt,ft,"universalSidebar.chicklet.ChickletHoverActionsDropdown.primary"),Object(i.a)(Yt,vt,"universalSidebar.chicklet.ChickletHoverActionsDropdown.secondary"),Yt),Jt=(zt={},Object(i.a)(zt,ft,"chicklet-demote-btn"),Object(i.a)(zt,vt,"chicklet-promote-btn"),zt),Zt=function(e){var t=e.currentState,n=Object(o.useContext)(Dt),a=Object(o.useCallback)(function(){return n({type:wt})},[n]);return Object(r.jsx)(T.a,{use:"tertiary-light",size:"xs",onClick:a,"data-selenium-test":Jt[t],children:Object(r.jsx)(C.a,{message:Gt[t]})})};Zt.propTypes=Wt;var Xt,$t=Zt,en=n("WLqE"),tn=n("iJaT"),nn=n("Tqy5"),an=n("BiPx"),rn=n("GBWN"),on=n("Sshb"),sn=n("Ryvg"),cn=n("jqvl"),dn=n.n(cn),ln=n("fFSu"),un=n("j/Up"),mn=n("1oJP"),bn=n("1Cff"),pn=n("c50W"),jn=n("dxYZ"),kn=n("B0Kw"),fn=n("Cprn"),vn=n("qC5i"),On=n("TsUQ"),yn=n("lxBm"),gn=n("V0Wc"),hn=function(e){return Object(On.a)(Object.assign({cacheKey:yn.C,createFetchByIds:function(e){return Object(gn.a)(e)(pn.J)},createFetchSearchPage:function(e){return Object(gn.b)(e)(pn.J)},fetchByIds:Object(gn.c)(pn.J),fetchSearchPage:Object(gn.d)(pn.J)},e))},Sn=(hn({cacheKey:yn.G,createFetchByIds:function(e){return Object(gn.a)(e)(pn.N)},createFetchSearchPage:function(e){return Object(gn.b)(e)(pn.N)},fetchByIds:Object(gn.c)(pn.N),fetchSearchPage:Object(gn.d)(pn.N)}),hn()),Nn=function(e){return Object(On.a)(Object.assign({cacheKey:yn.mb,createFetchByIds:function(e){return Object(gn.a)(e)(pn.Ab)},createFetchSearchPage:function(e){return Object(gn.b)(e)(pn.Ab)},fetchByIds:Object(gn.c)(pn.Ab),fetchSearchPage:Object(gn.d)(pn.Ab)},e))}(),Cn=n("911S"),Tn=n("WwZd"),In=n("g+dq"),xn=n.n(In),Fn=n("Iie8"),An=n.n(Fn),Dn=n("aitF"),Rn=n.n(Dn),Pn="inbounddb-objects/v1/crm-objects",En=Rn()(function(e){return Pn+"/"+encodeURIComponent(e)+"/batch"}),_n=function(e,t){"number"==typeof e.objectId&&(t=Number(t));e.objectId!==t&&(e.objectId=t);return e},wn=An()(_n),Ln=function(e){var t=e.httpClient;return function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=n.fetchQueryParams,i=n.formatterOptions,r=(i=void 0===i?{}:i).getters,o=Object.assign({},Cn.b,{},r),s=En(e);return function(e){return t.get(s,{query:Object.assign({},a,{includeAllValues:!0,id:e})}).then(wn).then(Object.values).then(Object(Tn.a)(o))}}},qn=Ln({httpClient:xn.a}),Mn=n("DF/D"),Vn=Rn()(function(e,t){return e+"_"+t}),Un=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object.assign({},t,{getters:Object.assign({},Object(Cn.c)(e),{},t.getters)})},Bn=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.resolverOptions,a=t.fetchQueryParams,i=t.searchOptions,r=t.searchQueryParams,o=t.formatterOptions,s=Un(e,o);return Object(On.a)(Object.assign({cacheKey:Vn(yn.B,e),createFetchByIds:function(t){return Ln(Object.assign({},t))(e,{fetchQueryParams:a,formatterOptions:s})},createFetchSearchPage:function(t){return Object(Mn.b)(t)(e,{searchOptions:i,searchQueryParams:r,formatterOptions:s})},fetchByIds:qn(e,{fetchQueryParams:a,formatterOptions:s}),fetchSearchPage:Object(Mn.c)(e,{searchOptions:i,searchQueryParams:r,formatterOptions:s})},n))},Hn=function(e,t){t.resolverOptions;var n=Object(ln.a)(t,["resolverOptions"]);return Bn(e,n)},Kn=function(e){return e.children};Kn.propTypes={children:c.a.node};var Yn=function(e){switch(F.j[e]){case g.COMPANY:return pn.A;case g.CONTACT:return pn.C;case g.DEAL:return pn.J;case g.TICKET:return pn.Ab;default:return pn.I}},zn=Object(kn.a)((Xt={},Object(i.a)(Xt,pn.A,fn.a),Object(i.a)(Xt,pn.C,vn.a),Object(i.a)(Xt,pn.J,Sn),Object(i.a)(Xt,pn.Ab,Nn),Object(i.a)(Xt,pn.I,function(e){return function(){return{resolversCache:e,resolverFactory:Hn}}}),Xt))(Kn),Qn={sorts:[{property:"createdate",order:"DESC"}]},Wn=function(e,t){var n,a=t.get("label"),i=t.referencedObject;switch(e){case F.c:a=Qe()({firstName:Object(jn.d)(i,"firstname"),lastName:Object(jn.d)(i,"lastname")});n=Object(jn.d)(i,"email");break;case F.b:n=Object(jn.d)(i,"domain");break;case F.o:n=Object(jn.d)(i,"content")}return{text:a&&n?a+" ("+n+")":a?""+a:n?""+n:"-",value:t.get("id")}},Gn=function(e){var t=e.filterOptions,n=e.objectTypeId,a=e.onChange,i=e.resolver,o=e.value,s=Object(ln.a)(e,["filterOptions","objectTypeId","onChange","resolver","value"]),c=n===F.o?Qn:void 0;return Object(r.jsx)("div",{className:"m-top-2",children:Object(r.jsx)(bn.a,Object.assign({"data-selenium-test":"source-select",onChange:a,resolver:i,requestOptions:c,value:o,optionFormatter:O()(Wn,n),filterOptions:function(){var e=mn.a.apply(void 0,arguments);return t(e)}},s))})};Gn.propTypes={filterOptions:c.a.func,objectTypeId:S.a.isRequired,onChange:c.a.func.isRequired,primaryDisplayLabelPropertyName:c.a.string,resolver:c.a.object.isRequired,value:c.a.oneOfType([c.a.oneOfType([c.a.string,c.a.number,c.a.bool]),c.a.arrayOf(c.a.oneOfType([c.a.string,c.a.number,c.a.bool]))])};var Jn=function(e,t){var n=t.objectTypeId,a=t.primaryDisplayLabelPropertyName,i=Yn(n);if(i===pn.I){var r=e.CUSTOM_OBJECT(),o=r.resolverFactory,s=r.resolversCache;return{resolver:o(n,{fetchOptions:{properties:[a],includeDeletes:!0},formatterOptions:{getters:{getLabel:Ge()(["properties",a,"value"])}}})(s)}}return{resolver:e[i]}},Zn=Object(un.a)(Jn,Gn),Xn={id:"fa5d19cf3e08b097ab3eab7b3ef854569ec3c42eba9a6fab4244cfe92777a5df",kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"CreateCrmObjectAssociationBySpec"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"createAssociationInput"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"CreateCrmObjectAssociationBySpecInput"}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"createCrmObjectAssociationBySpec"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"createAssociationInput"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"createFailures"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"failReason"}}]}}]}}]}}]},$n=function(e){var t=e.toObjectType,n=e.toObjectId,a=e.updateQuery;return Object(o.useCallback)(function(){return a(function(e){var a=F.k[t]||t,i=e.crmObject.cards.find(function(e){return e.__typename===tt.a&&e.associationDefinitions[0].toObjectTypeId===a});if(!i)return e;var r=i.associatedObjects.secondaryEdges.find(function(e){return e.node.id===+n}),o=i.associatedObjects.secondaryEdges.filter(function(e){return e.node.id!==+n}),s=Object.assign({},i,{associatedObjects:Object.assign({},i.associatedObjects,{primaryEdge:r,secondaryEdges:o})}),c=e.crmObject.cards.map(function(e){return e===i?s:e});return Object.assign({},e,{crmObject:Object.assign({},e.crmObject,{cards:c})})})},[a,t,n])},ea=function(e){var t=e.fromObjectId,n=e.fromObjectType,a=e.toObjectId,i=e.toObjectType,r=e.onSuccess,s=e.onError,c=Object(Ze.useMutation)(Xn),d=Object(Ee.a)(c,1)[0],l=Object(o.useContext)($e.a).updateQuery,u=Object(et.b)().onAssociationUpdate,m=F.k[i]||i,b=F.k[n]||n,p=Object(o.useCallback)(function(){"function"==typeof r&&r();u({objectId:""+t,objectType:n,associationObjectType:i})},[r,u,n,t,i]),j=Object(o.useCallback)(function(e){"function"==typeof s&&s(e)},[s]),k=$n({toObjectType:i,toObjectId:a,updateQuery:l});return Object(o.useCallback)(function(){d({variables:{createAssociationInput:{fromObjectTypeAndId:{objectTypeId:b,objectId:t},toObjectTypeAndId:{objectTypeId:m,objectId:a},associationSpecs:[{associationCategory:Ne,associationTypeId:Oe[n][i]}]}},update:function(e,t){var n=t.data,i=Ge()(["updateResponse","createFailures"],n)||[];if(0!==i.length)j(i);else{k();p([a])}}}).catch(function(){Object(nt.a)({mutationFailed:!0})}).done()},[d,n,b,t,i,m,a,k,p,j])},ta=n("7GwH"),na=function(e){var t=e.fromObjectId,n=e.fromObjectType,a=e.toObjectId,i=e.toObjectType,r=e.onSuccess,s=e.onError,c=Object(Ze.useMutation)(Xn),d=Object(Ee.a)(c,1)[0],l=Object(et.b)().onAssociationUpdate,u=F.k[i]||i,m=F.k[n]||n,b=Object(o.useCallback)(function(){"function"==typeof r&&r();l({objectId:""+t,objectType:n,associationObjectType:i})},[r,l,n,t,i]),p=Object(o.useCallback)(function(e){"function"==typeof s&&s(e)},[s]),j=Object(o.useCallback)(function(){d({variables:{createAssociationInput:{fromObjectTypeAndId:{objectTypeId:m,objectId:t},toObjectTypeAndId:{objectTypeId:u,objectId:a},associationSpecs:[{associationCategory:Ne,associationTypeId:ve[n][i]}]}},update:function(e,t){var n=t.data,a=Ge()(["updateResponse","createFailures"],n)||[];0!==a.length?p(a):b()}}).catch(function(){Object(nt.a)({mutationFailed:!0})}).done()},[d,m,n,t,i,u,a,p,b]);return it({fromObjectId:t,fromObjectType:n,toObjectId:a,toObjectType:i,associationSpecs:[{associationTypeId:ta.a.get(n+"_TO_"+i),associationCategory:Ne}],onSuccess:j})},aa=n("6L7K"),ia=Object(o.createContext)(function(){});ia.Provider.propTypes={value:c.a.func.isRequired};var ra=function(e){var t,n=e.associatedObjectsIds,a=e.currentState,s=e.fromObjectType,c=e.objectId,d=e.objectType,l=e.primaryAssociationObjectInfo,u=e.primaryDisplayLabelPropertyName,m=e.toObjectLabel,b=Object(o.useState)(!1),p=Object(Ee.a)(b,2),j=p[0],k=p[1],f=Object(o.useState)(null),v=Object(Ee.a)(f,2),O=v[0],y=v[1],g=Object(o.useContext)(Dt),h=Object(o.useContext)(aa.a).objectId,S=Object(o.useContext)(ia),N=ea({fromObjectId:+h,fromObjectType:s,toObjectId:O,toObjectType:d,onSuccess:function(){S();g({draftPrimaryAssociationObjectId:h,type:Mt});ut.b.log("recordInteractions",{action:"Update primary association",subAction:"Update current primary"})}}),I=ea({fromObjectId:+h,fromObjectType:s,toObjectId:c,toObjectType:d,onSuccess:function(){S();g({draftPrimaryAssociationObjectId:h,type:Lt});ut.b.log("recordInteractions",{action:"Update primary association",subAction:"Set first primary"})}}),A=na({fromObjectId:+h,fromObjectType:s,toObjectId:l.primaryAssociationObjectId,toObjectType:d,onSuccess:function(){g({type:Lt});N()}}),D=na({fromObjectId:+h,fromObjectType:s,toObjectId:l.primaryAssociationObjectId,toObjectType:d,onSuccess:function(){g({type:Lt});I()}}),R=Object(o.useCallback)(function(){return g({type:qt})},[g]),P=Object(o.useCallback)(function(){switch(a){case Ot:A();break;case yt:D();break;case gt:I()}},[a,A,I,D]),E=function(e){return e.filter(function(e){return e.value!==""+l.primaryAssociationObjectId&&n.includes(e.value)})},_=(t={},Object(i.a)(t,Ot,{disabled:!O,onConfirmClick:P,bodyMessageKey:"universalSidebar.chicklet.ChickletHoverPrimaryModal.primary.body",bodyMessageOptions:{toObjectType:Object(x.a)(d),fromObjectType:Object(x.a)(s)},headerMessageKey:"universalSidebar.chicklet.ChickletHoverPrimaryModal.primary.header",select:Object(r.jsx)(Zn,{objectTypeId:F.k[d]||d,filterOptions:E,primaryDisplayLabelPropertyName:u,onChange:function(e){var t=e.target.value;y(t)},multi:!1,value:O}),seleniumModalKey:"chicklet-demote-modal"}),Object(i.a)(t,yt,{disabled:!j,onConfirmClick:function(){return P({draftPrimaryAssociationObjectId:h})},bodyMessageKey:"universalSidebar.chicklet.ChickletHoverPrimaryModal.nonPrimary.primaryExists.body",bodyMessageOptions:{primaryObjectLabel:l.primaryAssociationPrimaryDisplayLabel},headerMessageKey:"universalSidebar.chicklet.ChickletHoverPrimaryModal.nonPrimary.header",seleniumModalKey:"chicklet-promote-modal"}),Object(i.a)(t,gt,{disabled:!1,onConfirmClick:function(){return P({draftPrimaryAssociationObjectId:h})},bodyMessageKey:"universalSidebar.chicklet.ChickletHoverPrimaryModal.nonPrimary.primaryDoesntExist.body",bodyMessageOptions:{toObjectLabel:m},headerMessageKey:"universalSidebar.chicklet.ChickletHoverPrimaryModal.nonPrimary.header",seleniumModalKey:"chicklet-promote-modal"}),t),w=Object(o.useCallback)(function(){return a!==yt?Object(r.jsx)(dn.a,{options:_[a].bodyMessageOptions,message:_[a].bodyMessageKey}):Object(r.jsxs)("div",{children:[Object(r.jsx)(J.a,{weight:"demi",children:Object(r.jsx)(C.a,{message:"universalSidebar.chicklet.ChickletHoverPrimaryModal.primary.body",options:{toObjectType:Object(x.a)(d),fromObjectType:Object(x.a)(s)}})}),Object(r.jsx)(nn.a,{checked:j,onChange:function(e){var t=e.target.checked;k(t)},children:Object(r.jsx)(J.a,{children:Object(r.jsx)(dn.a,{options:_[a].bodyMessageOptions,message:_[a].bodyMessageKey})})})]})},[a,s,j,d,_]);return Object(r.jsxs)(tn.a,{"data-selenium-test":_[a].seleniumModalKey,width:500,children:[Object(r.jsxs)(rn.a,{children:[Object(r.jsx)(en.a,{children:Object(r.jsx)(C.a,{options:{toObjectLabel:m},message:_[a].headerMessageKey})}),Object(r.jsx)(an.a,{onClick:R})]}),Object(r.jsxs)(on.a,{children:[Object(r.jsxs)("div",{className:"p-bottom-3",children:[w(),_[a].select]}),Object(r.jsx)(J.a,{tagName:"p",children:Object(r.jsx)(C.a,{message:"universalSidebar.chicklet.ChickletRemoveAssociationModal.primary.description",options:{toObjectType:Object(x.a)(d),fromObjectType:Object(x.a)(s)}})})]}),Object(r.jsxs)(sn.a,{children:[Object(r.jsx)(T.a,{disabled:_[a].disabled,"data-unit-test":"confirm-button",onClick:_[a].onConfirmClick,use:"primary",children:Object(r.jsx)(dn.a,{message:"universalSidebar.chicklet.ChickletHoverPrimaryModal.buttons.update"})}),Object(r.jsx)(T.a,{onClick:R,children:Object(r.jsx)(dn.a,{message:"universalSidebar.chicklet.ChickletHoverPrimaryModal.buttons.cancel"})})]})]})},oa=n("lS0L"),sa=n("l52g"),ca=n("DSKb"),da={id:"cfe67ac60f586959ff4d096dd0d8ab1f82b4f0070826edaf5a60abf4cc53251e",kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"fetchAssociationTypesBetweenObjectTypes"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"fromObjectTypeId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"toObjectTypeId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"allAssociationTypesBetweenObjectTypes"},arguments:[{kind:"Argument",name:{kind:"Name",value:"fromObjectType"},value:{kind:"Variable",name:{kind:"Name",value:"fromObjectTypeId"}}},{kind:"Argument",name:{kind:"Name",value:"toObjectType"},value:{kind:"Variable",name:{kind:"Name",value:"toObjectTypeId"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"label"}},{kind:"Field",name:{kind:"Name",value:"associationCategory"}},{kind:"Field",name:{kind:"Name",value:"associationTypeId"}}]}}]}}]},la=function(e){var t=e.fromObjectType,n=e.toObjectType,a=e.onError,i=F.k[n]||n,r=F.k[t]||t,o=Object(Ze.useQuery)(da,{variables:{fromObjectTypeId:r,toObjectTypeId:i},onError:a,fetchPolicy:"network-only"}),s=o.data,c=Object(ln.a)(o,["data"]);return Object.assign({associationTypes:s&&s.allAssociationTypesBetweenObjectTypes},c)},ua=function(e,t,n){ut.b.log("recordInteractions",{action:"Edit association label in edit modal",addedLabelIds:e&&e.map(function(e){return e.associationCategory+"-"+e.associationTypeId}),addedLabelNames:e&&e.map(function(e){return e.label}),objectType:n,removedLabelNames:t&&t.map(function(e){return e.associationCategory+"-"+e.associationTypeId})})},ma=V.a.div.withConfig({displayName:"ChickletHoverEditAssociationModal__ModalTitleDiv",componentId:"sc-1y09lbe-0"})(["font-weight:500;"]),ba={associationDefinitions:c.a.arrayOf(c.a.shape({associationCategory:c.a.string.isRequired,associationTypeId:c.a.number.isRequired})),objectType:c.a.string,onUpdateAssociations:c.a.func,toObjectLabel:c.a.string,fromObjectType:c.a.string},pa=function(e){return e.associationCategory+":"+e.associationTypeId},ja=function(e){var t=e.split(":"),n=Object(Ee.a)(t,2);return{associationCategory:n[0],associationTypeId:+n[1]}},ka=function(e){var t=e.associationDefinitions,n=e.objectType,a=e.onUpdateAssociations,i=e.toObjectLabel,s=e.fromObjectType,c=t.filter(function(e){var t=e.associationTypeId,n=e.associationCategory;return!ye.includes(t)||n!==X}).map(pa),d=Object(o.useState)(c),u=Object(Ee.a)(d,2),m=u[0],b=u[1],p=Object(o.useContext)(Dt),j=Object(o.useCallback)(function(){return p({type:qt})},[p]),k=Object(o.useCallback)(function(e){return p(Object.assign({},e,{type:Lt}))},[p]),f=la({fromObjectType:s,toObjectType:n}),v=f.associationTypes,O=void 0===v?[]:v,y=f.loading,g=f.error,h=Object(o.useMemo)(function(){return Object(r.jsxs)(rn.a,{className:"p-top-2 p-bottom-2",children:[Object(r.jsx)(en.a,{children:Object(r.jsx)(C.a,{options:{toObjectLabel:i},message:"universalSidebar.chicklet.ChickletHoverEditAssociationModal.header"})}),Object(r.jsx)(an.a,{onClick:j})]})},[j,i]),S=O.filter(function(e){return e.associationTypeId&&(!ye.includes(e.associationTypeId)||e.associationCategory!==X)}),N=Object(o.useCallback)(function(){var e=m.filter(function(e){return!c.includes(e)}).map(ja),t=c.filter(function(e){return!m.includes(e)}).map(ja),i=m.map(function(e){return e.associationTypeId});a({createAssociations:e,deleteAssociations:t,onSuccessDispatch:function(){k({draftAssociationIds:i});ua(e,t,n)},onFailureDispatch:j})},[m,c,a,j,k,n]),x=Object(o.useMemo)(function(){return S.map(function(e){return{text:Se(e.name)?Se(e.name):e.label,buttonText:Se(e.name)?Object(r.jsx)(dn.a,{message:Se(e.name)}):e.label,dropdownText:Se(e.name)?Object(r.jsx)(dn.a,{message:Se(e.name)}):e.label,value:pa(e)}})},[S]);return y||g?Object(r.jsxs)(tn.a,{use:"success",children:[h,Object(r.jsx)(on.a,{style:{position:"relative"},children:Object(r.jsx)(sa.a,{className:"m-bottom-6",layout:"centered",size:"small"})})]}):Object(r.jsx)(tn.a,{"data-selenium-test":"chicklet-edit-modal",width:500,children:Object(r.jsxs)(oa.a,{onSubmit:j,children:[h,Object(r.jsxs)(on.a,{children:[Object(r.jsx)(ma,{children:Object(r.jsx)(dn.a,{message:"universalSidebar.chicklet.ChickletHoverEditAssociationModal.title"})}),Object(r.jsx)(J.a,{tagName:"p",className:"p-bottom-2",children:Object(r.jsx)(dn.a,{message:"universalSidebar.chicklet.ChickletHoverEditAssociationModal.body"})}),Object(r.jsx)("div",{className:"p-bottom-6",children:Object(r.jsx)(ca.a,{defaultValue:c,multi:!0,onChange:function(e){var t=e.target.value;return b(t)},options:x,dropdownFooter:Object(r.jsx)(I.a,{external:!0,href:"/association-settings/"+l.a.get()+"/",children:Object(r.jsx)(C.a,{message:"universalSidebar.chicklet.ChickletHoverEditAssociationModal.manageLabels"})})})})]}),Object(r.jsxs)(sn.a,{children:[Object(r.jsx)(T.a,{disabled:!(!m||m.length!==c.length||!c.every(function(e){return m.includes(e)})),"data-unit-test":"confirm-association-change",onClick:N,use:"primary",children:Object(r.jsx)(dn.a,{message:"universalSidebar.chicklet.ChickletHoverEditAssociationModal.buttons.update"})}),Object(r.jsx)(T.a,{type:"submit",children:Object(r.jsx)(dn.a,{message:"universalSidebar.chicklet.ChickletHoverEditAssociationModal.buttons.cancel"})})]})]})})};ka.propTypes=ba;var fa=ka,va=n("MO2O"),Oa=function(e){var t=e.toObjectLabel,n=e.onRemoveAssociation,a=Object(o.useContext)(aa.a).primaryDisplayLabel,i=Object(o.useContext)(Dt),s=Object(o.useCallback)(function(){n({onSuccessDispatch:function(){return i({type:Lt})},onFailureDispatch:function(){return i({type:qt})}})},[i,n]),c=Object(o.useCallback)(function(){return i({type:qt})},[i]);return Object(r.jsx)(va.a,{"data-selenium-test":"chicklet-remove-modal",confirmLabel:Object(r.jsx)(C.a,{message:"universalSidebar.chicklet.ChickletRemoveAssociationModal.secondary.confirm"}),description:Object(r.jsx)(C.a,{message:"universalSidebar.chicklet.ChickletRemoveAssociationModal.message",options:{fromObjectName:a,toObjectName:t}}),onConfirm:s,onReject:c,message:Object(r.jsx)(C.a,{message:"universalSidebar.chicklet.ChickletRemoveAssociationModal.secondary.title"}),rejectLabel:Object(r.jsx)(C.a,{message:"universalSidebar.chicklet.ChickletRemoveAssociationModal.secondary.cancel"}),width:500})};Oa.propTypes={onRemoveAssociation:c.a.func.isRequired,toObjectLabel:c.a.string.isRequired};var ya=Oa,ga=function(e){var t=e.objectId,n=e.toObjectType,a=e.toObjectLabel,i=e.primaryDisplayLabelPropertyName,s=e.associationIds,c=e.onRemoveAssociation,d=Object(o.useState)(null),l=Object(Ee.a)(d,2),u=l[0],m=l[1],b=Object(o.useContext)(aa.a),p=b.objectType,j=b.objectId,k=b.primaryDisplayLabel,f=Object(o.useContext)(Dt),v=ea({fromObjectId:+j,fromObjectType:p,toObjectId:u,toObjectType:g.COMPANY,onSuccess:function(){f({type:Lt,primaryAssociationObjectId:u})},onError:function(){Object(nt.a)({mutationFailed:!0});f({type:qt})}}),O=Object(o.useCallback)(function(){c({onSuccessDispatch:v,onFailureDispatch:function(){return f({type:qt})}})},[c,f,v]),y=Object(o.useCallback)(function(){return f({type:qt})},[f]),h=Object(o.useMemo)(function(){var e=function(e){return e.filter(function(e){return e.value!==""+t&&s.includes(e.value)})};return Object(r.jsxs)("div",{children:[Object(r.jsx)(C.a,{message:"universalSidebar.chicklet.ChickletRemoveAssociationModal.primary.prompt",options:{toObjectType:Object(x.a)(n)}}),Object(r.jsx)(Zn,{objectTypeId:F.k[n]||n,filterOptions:e,primaryDisplayLabelPropertyName:i,onChange:function(e){var t=e.target.value;m(t)},value:u}),Object(r.jsx)("div",{className:"p-top-2 m-top-2",children:Object(r.jsx)(J.a,{tagName:"p",children:Object(r.jsx)(C.a,{message:"universalSidebar.chicklet.ChickletRemoveAssociationModal.primary.description",options:{toObjectType:Object(x.a)(n),fromObjectType:Object(x.a)(p)}})})})]})},[s,t,u,p,i,n]),S=Object(o.useMemo)(function(){return Object(r.jsxs)(sn.a,{children:[Object(r.jsx)(T.a,{use:"primary",disabled:!u,onClick:O,"data-unit-test":"update-button",children:Object(r.jsx)(dn.a,{message:"universalSidebar.chicklet.ChickletHoverPrimaryModal.buttons.update"})}),Object(r.jsx)(T.a,{onClick:y,"data-unit-test":"cancel-button",children:Object(r.jsx)(dn.a,{message:"universalSidebar.chicklet.ChickletHoverPrimaryModal.buttons.cancel"})})]})},[u,y,O]);return Object(r.jsxs)(tn.a,{"data-selenium-test":"chicklet-remove-modal",width:500,children:[Object(r.jsxs)(rn.a,{children:[Object(r.jsx)(en.a,{children:Object(r.jsx)(C.a,{message:"universalSidebar.chicklet.ChickletRemoveAssociationModal.primary.confirm"})}),Object(r.jsx)(an.a,{onClick:y})]}),Object(r.jsxs)(on.a,{children:[h,Object(r.jsx)("div",{className:"p-top-4",children:Object(r.jsx)(C.a,{message:"universalSidebar.chicklet.ChickletRemoveAssociationModal.message",options:{fromObjectName:k,toObjectName:a}})})]}),S]})};ga.propTypes={associationIds:c.a.array.isRequired,objectId:c.a.number.isRequired,toObjectType:c.a.string.isRequired,onRemoveAssociation:c.a.func.isRequired,primaryDisplayLabelPropertyName:c.a.string.isRequired,toObjectLabel:c.a.string.isRequired};var ha=ga,Sa=function(e){var t=e.associationIds,n=e.currentState,a=e.objectId,i=e.objectType,o=e.onRemoveAssociation,s=e.primaryDisplayLabelPropertyName,c=e.toObjectLabel;return n===ht?Object(r.jsx)(ha,{associationIds:t,objectId:a,onRemoveAssociation:o,primaryDisplayLabelPropertyName:s,toObjectType:i,toObjectLabel:c}):Object(r.jsx)(ya,{toObjectLabel:c,onRemoveAssociation:o})};Sa.propTypes={associationIds:c.a.array.isRequired,currentState:c.a.string.isRequired,objectId:c.a.number.isRequired,objectType:c.a.string.isRequired,onRemoveAssociation:c.a.func.isRequired,primaryDisplayLabelPropertyName:c.a.string.isRequired,toObjectLabel:c.a.string.isRequired};var Na=Sa,Ca={associationDefinitions:c.a.array.isRequired,associatedObjectsIds:c.a.array.isRequired,fromObjectType:c.a.string.isRequired,objectId:c.a.number.isRequired,objectType:c.a.string.isRequired,onUpdateAssociations:c.a.func,primaryDisplayLabelPropertyName:c.a.string.isRequired,toObjectLabel:c.a.string,currentState:c.a.string.isRequired,modal:c.a.elementType,primaryAssociationObjectInfo:c.a.shape({primaryAssociationObjectId:c.a.number,primaryAssociationPrimaryDisplayLabel:c.a.string}).isRequired,onRemoveAssociation:c.a.func.isRequired},Ta=function(e){var t=e.associationDefinitions,n=e.associatedObjectsIds,a=e.fromObjectType,i=e.objectId,o=e.objectType,s=e.onUpdateAssociations,c=e.toObjectLabel,d=e.primaryAssociationObjectInfo,l=e.primaryDisplayLabelPropertyName,u=e.onRemoveAssociation,m=e.currentState;switch(e.modal){case Tt:return Object(r.jsx)(zn,{children:Object(r.jsx)(ra,{associatedObjectsIds:n,currentState:m,fromObjectType:a,objectId:i,objectType:o,primaryAssociationObjectInfo:d,primaryDisplayLabelPropertyName:l,toObjectLabel:c})});case It:return Object(r.jsx)(Na,{associationDefinitions:t,currentState:m,objectId:i,objectType:o,toObjectLabel:c,primaryDisplayLabelPropertyName:l,associationIds:n,onRemoveAssociation:u});case xt:return Object(r.jsx)(fa,{associationDefinitions:t,objectType:o,currentState:m,onUpdateAssociations:s,toObjectLabel:c,fromObjectType:a});default:return null}};Ta.propTypes=Ca;var Ia=Ta,xa=n("1giK"),Fa={associationDefinitions:c.a.array.isRequired,associatedObjectsIds:c.a.array.isRequired,fromObjectType:c.a.string.isRequired,objectId:c.a.number.isRequired,objectType:c.a.string.isRequired,onUpdateAssociations:c.a.func,primaryDisplayLabelPropertyName:c.a.string.isRequired,toObjectLabel:c.a.string,currentState:c.a.string.isRequired,modal:c.a.elementType,primaryAssociationObjectInfo:c.a.shape({primaryAssociationObjectId:c.a.number,primaryAssociationPrimaryDisplayLabel:c.a.string}).isRequired,onRemoveAssociation:c.a.func.isRequired},Aa=function(e){var t=e.associationDefinitions,n=e.associatedObjectsIds,a=e.fromObjectType,i=e.objectId,s=e.objectType,c=e.onUpdateAssociations,d=e.toObjectLabel,l=e.primaryAssociationObjectInfo,u=e.primaryDisplayLabelPropertyName,m=e.onRemoveAssociation,b=e.currentState,p=e.modal,j=Object(qe.a)();return Object(r.jsxs)(o.Fragment,{children:[Object(r.jsx)(Ia,{associationDefinitions:t,associatedObjectsIds:n,currentState:b,fromObjectType:a,modal:p,objectId:i,objectType:s,onRemoveAssociation:m,onUpdateAssociations:c,primaryAssociationObjectInfo:l,primaryDisplayLabelPropertyName:u,toObjectLabel:d}),i&&Object(r.jsx)(Rt.a,{buttonSize:"xs",buttonText:Object(r.jsx)(C.a,{message:"universalSidebar.chicklet.ChickletHoverActionsDropdown.dropdownButtonText"}),"data-selenium-test":"chicklet-more-btn",placement:"bottom left",buttonUse:j?"tertiary":"tertiary-light",children:Object(r.jsxs)(Pt.a,{children:[(a===g.CONTACT||a===xa.c||a===g.TICKET)&&s===g.COMPANY&&[ft,vt].includes(b)&&Object(r.jsx)($t,{currentState:b,fromObjectType:a,objectType:s}),Object(r.jsx)(Vt,{}),Object(r.jsx)(Qt,{associationDefinitions:t,associatedObjectsIds:n,fromObjectType:a})]})})]})};Aa.propTypes=Fa;var Da=Aa,Ra={associationDefinitions:c.a.arrayOf(c.a.object).isRequired,primaryAssociationObjectInfo:c.a.shape({primaryAssociationObjectId:c.a.number,primaryAssociationPrimaryDisplayLabel:c.a.string}),objectId:c.a.number.isRequired},Pa=function(e){var t=e.associationDefinitions,n=e.primaryAssociationObjectInfo,a=e.objectId,i=Object(o.useReducer)(At,Object.assign({},kt,{currentState:a===n.primaryAssociationObjectId?ft:vt,associationIds:t.map(function(e){return e.associationTypeId}),primaryAssociationObjectId:n.primaryAssociationObjectId})),s=Object(Ee.a)(i,2),c=s[0],d=s[1];return Object(r.jsx)(Dt.Provider,{value:d,children:Object(r.jsx)(Da,Object.assign({primaryAssociationObjectInfo:n},e,{},c))})};Pa.propTypes=Ra;var Ea=Pa,_a=n("d0QT"),wa=n("OW66"),La=function(e){var t=e.associationDefinitions,n=e.associatedObjectsIds,a=e.fromObjectType,i=e.fromObjectId,s=e.onPreview,c=e.onRemoveAssociation,d=e.onCreateAssociation,l=e.onUpdateAssociations,u=e.toObjectLabel,m=e.canView,b=e.primaryDisplayLabelPropertyName,p=e.primaryAssociationObjectInfo,j=void 0===p?{primaryAssociationObjectId:null,primaryAssociationPrimaryDisplayLabel:null}:p,k=e.objectId,f=e.objectType,v=Object(o.useContext)(_a.a),O=v.canEditSubject,y=v.readOnly,g=Object(qe.a)()?wa.a:o.Fragment;return Object(r.jsxs)(g,{children:[Object(r.jsx)(jt,{canView:m,onClick:s}),O&&!y&&Object(r.jsx)(Ea,{associationDefinitions:t,associatedObjectsIds:n,fromObjectType:a,fromObjectId:i,objectId:k,objectType:f,onRemoveAssociation:c,onCreateAssociation:d,onUpdateAssociations:l,toObjectLabel:u||"--",primaryAssociationObjectInfo:j,primaryDisplayLabelPropertyName:b})]})};La.propTypes={associationDefinitions:c.a.array.isRequired,associatedObjectsIds:c.a.array.isRequired,fromObjectType:c.a.string.isRequired,fromObjectId:c.a.number,canView:c.a.bool.isRequired,objectId:c.a.number.isRequired,objectType:c.a.string.isRequired,onPreview:c.a.func.isRequired,onUpdateAssociations:c.a.func,onRemoveAssociation:c.a.func.isRequired,onCreateAssociation:c.a.func,toObjectLabel:c.a.string.isRequired,primaryAssociationObjectInfo:c.a.shape({primaryAssociationObjectId:c.a.number,primaryAssociationPrimaryDisplayLabel:c.a.string}),primaryDisplayLabelPropertyName:c.a.string};var qa=La,Ma=n("Av5o"),Va=function(e){var t=e.onConfirm,n=e.toObjectLabel,a=Object(o.useState)(!1),i=Object(Ee.a)(a,2),s=i[0],c=i[1],d=Object(o.useContext)(aa.a).primaryDisplayLabel,l=Object(qe.a)(),u=Object(o.useCallback)(function(){c(!0)},[c]),m=Object(o.useCallback)(function(){c(!1)},[c]),b=Object(o.useCallback)(function(){m();t()},[m,t]),p=function(){return s?Object(r.jsx)(va.a,{"data-test-id":"remove-association-modal",confirmLabel:Object(r.jsx)(C.a,{message:"universalSidebar.chicklet.ChickletRemoveAssociationButton.dialog.confirmButton"}),onConfirm:b,onReject:m,message:Object(r.jsx)(C.a,{message:"universalSidebar.chicklet.ChickletRemoveAssociationButton.dialog.body",options:{fromObjectName:d,toObjectLabel:n}}),rejectLabel:Object(r.jsx)(C.a,{message:"universalSidebar.chicklet.ChickletRemoveAssociationButton.dialog.rejectButton"})}):null};return Object(r.jsxs)(o.Fragment,{children:[p(),Object(r.jsx)(Ma.a,{"data-selenium-test":"preview-header--remove-button",onClick:u,iconSize:12,size:"xs",useButtonType:l?"tertiary":"tertiary-light"})]})};Va.propTypes={onConfirm:c.a.func.isRequired,toObjectLabel:c.a.string.isRequired};var Ua=Va,Ba=function(e){var t=e.onPreview,n=e.onRemoveAssociation,a=e.toObjectLabel,i=e.canView,s=Object(o.useContext)(_a.a),c=s.canEditSubject,d=s.readOnly,l=Object(qe.a)()?wa.a:o.Fragment;return Object(r.jsxs)(l,{children:[Object(r.jsx)(jt,{canView:i,onClick:t}),n&&c&&!d&&Object(r.jsx)(Ua,{onConfirm:n,toObjectLabel:a||"--"})]})};Ba.propTypes={canView:c.a.bool.isRequired,onPreview:c.a.func.isRequired,onRemoveAssociation:c.a.func,toObjectLabel:c.a.string};var Ha,Ka=Ba,Ya=n("2RhA"),za=n("WbQG"),Qa=n("os+u"),Wa=n("Sx0/"),Ga=n.n(Wa),Ja=n("D4Zn"),Za=n("UAUf"),Xa=n("MH0N"),$a=n("Sebf"),ei=n("ywmj"),ti=n("rsMa"),ni=n("xEfQ"),ai=n("0fP3"),ii=n("t81I"),ri="--",oi=n("WmGg"),si={isKnownGuid:ii.b,getGuidLabel:ii.a},ci=(Ha={},Object(i.a)(Ha,g.VISIT,[Za.d,Za.e]),Object(i.a)(Ha,g.CONTACT,[Za.a,Za.b]),Ha),di=function(e,t){return t===g.DEAL&&"dealstage"===e.name},li=function(e,t){return t===g.TICKET&&"hs_pipeline_stage"===e.name},ui=function(e,t){return"hs_status"===e.name&&t===F.n},mi=function(e,t,n){var a=ci[n];return!!a&&(a.includes(e.name)&&!!t&&Object(ii.b)(t))},bi=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=n.isFromEmailMarketing,i=n.isFromImport,r=n.isFromIntegration;return di(e,t)?pn.L:li(e,t)?pn.Db:Object($a.c)(e,t,{isFromEmailMarketing:a,isFromImport:i,isFromIntegration:r})};function pi(e){var t={};Object.keys(e).forEach(function(n){return 0===n.indexOf("data")?t[n]=e[n]:void 0});return t}var ji=o.forwardRef(function(e,t){var n=e.objectType,a=e.property,i=e.value,o=e.className,s=e.resolver,c=e.placeholder,d=void 0===c?ri:c,l=e.subject,u=e.dateFormat,m=e.dateTimeFormat;if(Object(Ja.b)(a)){var b=Object(jn.d)(l,a.currencyPropertyName);return Object(r.jsx)(Xa.a,Object.assign({currencyCode:b,value:i,className:o,ref:t,placeholder:d},pi(e)))}if(Object(Ja.h)(a))return Object(r.jsx)("span",Object.assign({className:o,ref:t},pi(e),{children:i?Object(oi.a)(i):d}));if(mi(a,i,n))return Object(r.jsx)("span",Object.assign({className:o,ref:t},pi(e),{children:i?Object(ii.a)(i):d}));if(s){var p=Object(jn.d)(l,Za.c),j=Object(jn.d)(l,Za.a);return Object(r.jsx)(ni.a,Object.assign({InputComponent:void 0,objectType:n,onChange:Ga.a,property:a,readOnlySourceData:si,resolver:s,analyticsSource:p,analyticsSourceData1:j,value:i,className:o,placeholder:d,ref:t},pi(e)))}return ui(a,n)?Object(r.jsx)(ei.E,{buttonUse:"link",property:a,readOnly:!0,value:i}):Object(r.jsx)("span",Object.assign({className:o,ref:t},pi(e),{children:Object(ti.a)(a,i,void 0,{dateFormat:u,dateTimeFormat:m})||d}))});ji.propTypes={objectType:h.b.isRequired,property:c.a.instanceOf(Ya.a).isRequired,resolver:c.a.oneOfType([ai.a,Object(Qa.mapOf)(ai.a)]),value:c.a.string,className:c.a.string,placeholder:c.a.node,subject:h.a,dateFormat:c.a.string,dateTimeFormat:c.a.string};var ki=Object(o.memo)(ji);ki.displayName="FormattedPropertyValue";var fi=Object(un.a)(function(e,t){var n=t.property,a=t.objectType,i=t.subject;return{resolver:e[bi(n,a,{isFromImport:Object(Za.g)(i),isFromIntegration:Object(Za.h)(i),isFromEmailMarketing:Object(Za.f)(i)})]}},ki,{forwardRef:!0});fi.displayName="ConnectedFormattedPropertyValue";var vi=Object(kn.a)(Object($a.b)(),fi,{forwardRef:!0,mergeResolvers:!0});vi.displayName="ProvidedConnectedFormattedPropertyValue";var Oi=vi,yi=n("SYgn"),gi=n.n(yi),hi=Rn()(function(e,t){gi.a.captureMessage("customer-data-sidebar: invalid crmObject summary property",{extra:{portalId:l.a.get(),objectType:e,name:t}})}),Si=function(e){var t=e.propertyFormatters,n=void 0===t?{}:t,a=e.summaryProperty,i=e.objectType;if(a&&!a.definition){hi(i,a.name);return null}var o=a.definition,s=a.value,c=a.name,d=Ya.a.fromJS(o),l=n[a.name];return l?l():Object(r.jsxs)(Q.a,{children:[Object(r.jsxs)("span",{className:"p-right-1",children:[o.hubspotDefined?Object(za.b)(o.label):o.label,":"]})," ",Object(r.jsx)(Oi,{objectType:i,property:d,value:s,"data-selenium-test":"formatted-property-"+c})]})};Si.propTypes={pipeline:c.a.shape({pipelineId:c.a.string.isRequired,stages:c.a.array.isRequired}),objectType:c.a.string.isRequired,propertyFormatters:c.a.object,summaryProperty:c.a.shape({definition:c.a.object.isRequired,name:c.a.string.isRequired,value:c.a.string})};var Ni=Si;function Ci(e,t){var n=e.find(function(e){return e.name===t});return n?n.value:void 0}var Ti=n("2I7S"),Ii=n("3Yd4"),xi=n("0HCf"),Fi=n.n(xi),Ai={copyValue:c.a.string,data:c.a.node.isRequired,onClick:c.a.func,propertyName:c.a.string.isRequired},Di=function(e){var t=e.data,n=e.copyValue,a=void 0===n?t:n,i=e.onClick,o=void 0===i?function(){}:i,s=e.propertyName,c=typeof a,d="string"===c||"number"===c;if(!d){Fi.a.warn({message:"[UniversalSidebar]: CopyValue for Property copy must be of type string or number."});gi.a.captureMessage("UniversalSidebar: invalid propType for copyValue: found "+c+" but expected string or number",{extra:{copyValue:a,copyValueType:c}})}return Object(r.jsx)(Q.a,{className:"justify-start",useFlex:!0,fixedChildren:d&&a&&Object(r.jsx)(Ti.a,{className:"m-left-2",responsive:!1,tooltipPlacement:"bottom left",use:"link",value:a,onClick:o,"data-selenium-test":"property-copy-button-"+s,children:Object(r.jsx)(Ii.a,{name:"duplicate",color:"inherit"})}),children:t})};Di.propTypes=Ai;var Ri=Di,Pi=function(e){var t=e.contact,n=e.fromObjectType,a=e.onEmailClick,i=e.onPhoneClick,s=Ci(t.secondaryProperties,"phone"),c=Ci(t.secondaryProperties,"email"),d=Object(o.useCallback)(function(){i();ut.b.log("sidebar-interaction",{type:g.CONTACT,action:"clicked hyperlinked action from card",subAction:"phone"})},[i]),l=Object(o.useCallback)(function(e){if("function"==typeof a){e.preventDefault();a()}ut.b.log("sidebar-interaction",{type:g.CONTACT,action:"clicked hyperlinked action from card",subAction:"email"})},[a]),u=Object(o.useCallback)(function(e){ut.b.log("sidebar-interaction",{action:"click property copy",toObjectType:F.c,fromObjectType:n,propertyName:e})},[n]),m=function(e){return Object(r.jsx)(bt.a,{title:Object(r.jsx)(C.a,{message:"universalSidebar.cards.ContactSecondaryProperties.emailTooltip"}),placement:"bottom left",children:e})},b=function(e){var t=Object(r.jsx)("div",{children:Object(r.jsx)(I.a,{href:"mailto:"+c,"data-selenium-test":"contact-chicklet-email",onClick:l,external:"function"!=typeof a,truncate:!0,children:e})});return"function"==typeof a?m(t):t},p=function(e){return Object(r.jsx)(bt.a,{title:Object(r.jsx)(C.a,{message:"universalSidebar.cards.ContactSecondaryProperties.phoneTooltip"}),placement:"bottom left",children:e})},j=function(e){var t=Object(r.jsx)(T.a,{"data-selenium-test":"contact-chicklet-phone","data-unit-test":"contact-chicklet-phone",use:"link",onClick:d,children:e});return"function"==typeof d?p(t):t},k={email:function(){return c?Object(r.jsx)("div",{className:"justify-between","data-selenium-test":"contact-chicklet-email",children:Object(r.jsx)(Ri,{propertyName:"email",data:b(c),copyValue:c,onClick:O()(u,"email")})}):Object(r.jsx)(C.a,{message:"universalSidebar.cards.ContactSecondaryProperties.emptyEmail"})},phone:function(){return s?Object(r.jsx)("div",{className:"justify-between","data-selenium-test":"contact-chicklet-phone",children:Object(r.jsx)(Ri,{data:j(s),copyValue:s,"data-unit-test":"phoneNumber",onClick:O()(u,"phone"),propertyName:"phone"})}):Object(r.jsx)(o.Fragment,{children:Object(r.jsx)(C.a,{message:"universalSidebar.cards.ContactSecondaryProperties.emptyPhone"})})}},f=function(e){return Object(r.jsx)(Ni,{propertyFormatters:k,summaryProperty:e,objectType:g.CONTACT},e.name)},v=function(){return t.secondaryProperties.map(f)};return Object(r.jsx)(o.Fragment,{children:v()})};Pi.propTypes={onEmailClick:c.a.func,onPhoneClick:c.a.func,contact:c.a.shape({secondaryProperties:c.a.array.isRequired}).isRequired,fromObjectType:c.a.string.isRequired};var Ei=Pi;function _i(e){var t=e.associationCategory,n=e.associationTypeId,a=e.associatedObjectsIds,i=e.cardId,o=e.object,s=e.onEmailClick,c=e.onPhoneClick,d=e.onPreview,l=e.objectId,u=e.objectType,m=Object(B.a)(H.a,!0),b=o.node.id,p=Ge()(["firstname","value"],o.node.defaultProperties),j=Ge()(["lastname","value"],o.node.defaultProperties),k=Ge()(["email","value"],o.node.defaultProperties),f=Ge()(["jobtitle","value"],o.node.defaultProperties),v=Qe()({firstName:p,lastName:j}),O=v||"--",y=Object(mt.c)(o.node.userPermissions),h=function(){Object(nt.a)({messageKey:"universalSidebar.alertHelpers.addMutationResultAlert.removeAssociationMutationSucceeded",messageKeyOptions:{removedObjectLabel:O}});ut.b.log("removeAssociation",{toObjectTypeId:F.k[g.CONTACT],fromObjectTypeId:F.k[u]?F.k[u]:u})},S=o.associationDefinitions?o.associationDefinitions.map(function(e){return{associationTypeId:e.associationTypeId,associationCategory:e.associationCategory}}):[{associationTypeId:n,associationCategory:t}],N=it({fromObjectId:+l,fromObjectType:u,toObjectId:b,toObjectType:g.CONTACT,associationSpecs:S,onSuccess:h,onError:function(){return Object(nt.a)({mutationFailed:!0})}}),C=dt({cardId:i,fromObjectId:+l,fromObjectType:u,toObjectId:b,onError:function(){return Object(nt.a)({mutationFailed:!0})}});function T(){return y?Object(r.jsx)(I.a,{href:Object(lt.a)({objectType:g.CONTACT,objectId:b}),"data-selenium-test":"contact-chicklet-title-link",children:O}):Object(r.jsx)("strong",{"data-selenium-test":"contact-chicklet-title-read-only",children:O})}function x(){return o.node.defaultAssociations.toCompanies.edges[0]}function A(){var e=x();return e?Ge()(["name","value"],e.node.defaultProperties):null}function D(){var e=A();return e||f?Object(r.jsx)("div",{"data-selenium-test":"contact-chicklet-job-title",children:Object(r.jsx)(J.a,{use:"help",className:"m-bottom-1",children:Object(r.jsx)(Je,{companyName:e,jobTitle:f})})}):null}var R=m&&u===g.COMPANY?qa:Ka;return Object(r.jsx)("div",{"data-selenium-test":"contact-chicklet","data-selenium-id":b,children:Object(r.jsx)(Pe,{children:Object(r.jsx)(Ye,{associationDefinitions:o.associationDefinitions,associatedObjectsIds:a,Buttons:R,fromObjectId:+l,fromObjectType:u,onPreview:d,onRemoveAssociation:N,onUpdateAssociations:C,toObjectLabel:v||k,canView:y,objectType:g.CONTACT,objectId:b,primaryDisplayLabelPropertyName:o.node.defaultProperties.firstname&&o.node.defaultProperties.firstname.definition&&Ge()(["firstname","definition","label"],o.node.defaultProperties),children:Object(r.jsx)(Ae,{associationDefinitions:o.associationDefinitions,avatarLookup:{displayName:v,type:"vid",primaryIdentifier:b,secondaryIdentifier:k},avatarProps:{vid:b},primaryIdentifier:T(),secondaryIdentifier:D(),children:Object(r.jsx)(Ei,{contact:o,fromObjectType:F.k[u]?F.k[u]:u,onEmailClick:s,onPhoneClick:c})})})})})}_i.propTypes={associationCategory:c.a.string,associationTypeId:c.a.number,associatedObjectsIds:c.a.array,cardId:c.a.string,object:f({secondaryProperties:!0}),onEmailClick:c.a.func,onPhoneClick:c.a.func,onPreview:c.a.func.isRequired,objectId:c.a.string.isRequired,objectType:c.a.string.isRequired};var wi="phone",Li=function(e,t){switch(t){case g.COMPANY:return"/contacts/"+l.a.get()+"/contacts/list/view/all/?associatedcompanyid="+e;default:return}};function qi(e){var t=e.associationCategory,n=e.associationTypeId,a=e.data,i=e.onViewMore,s=e.onPreview,c=e.associationObjectTypeId,d=e.onEmailClick,l=e.onPhoneClick,u=e.objectType,m=e.objectId,b=function(e){var i=a.associatedObjects.edges.map(function(e){return""+e.node.id}),o=e.node.id;return Object(r.jsx)(_i,{associationCategory:t,associationTypeId:n,associationIds:i,object:e,objectType:u,objectId:m,onEmailClick:d&&O()(d,g.CONTACT,String(o)),onPhoneClick:l&&O()(l,g.CONTACT,String(o),wi),onPreview:O()(s,Object(y.b)({objectTypeId:c,objectId:String(o)}))},o)},p=a.associatedObjects.edges;return p.length?Object(r.jsxs)(o.Fragment,{children:[p.map(b),Object(r.jsx)(q,{data:a,viewAllLink:Li(m,u),onViewMore:i})]}):null}qi.propTypes={associationCategory:c.a.string.isRequired,associationObjectTypeId:S.a.isRequired,associationTypeId:c.a.number.isRequired,data:c.a.shape({associatedObjects:c.a.shape({edges:c.a.arrayOf(f({summaryProperties:!0})).isRequired}).isRequired}).isRequired,onViewMore:c.a.func.isRequired,onPreview:c.a.func.isRequired,onEmailClick:c.a.func,onPhoneClick:c.a.func,objectId:c.a.string.isRequired,objectType:h.b.isRequired};var Mi=function(e){return/^https?:/i.test(e)?e:"http://"+e},Vi=function(e){var t=e.company,n=e.fromObjectType,a=Ci(t.secondaryProperties,"phone"),i=Ci(t.secondaryProperties,"domain"),s=function(e){return Object(r.jsx)("div",{children:Object(r.jsx)(I.a,{"data-selenium-test":"company-chicklet-domain",external:!0,href:Mi(e),truncate:!0,children:e})})},c=Object(o.useCallback)(function(e){ut.b.log("sidebar-interaction",{action:"click property copy",toObjectType:F.b,fromObjectType:n,propertyName:e})},[n]),d={domain:function(){return i?Object(r.jsx)("div",{className:"justify-between",children:Object(r.jsx)(Ri,{copyValue:Mi(i),data:s(i),onClick:O()(c,"domain"),propertyName:"domain"})}):Object(r.jsx)(o.Fragment,{children:Object(r.jsx)(C.a,{message:"universalSidebar.cards.CompanySecondaryProperties.emptyDomain"})})},phone:function(){return a?Object(r.jsx)("div",{className:"justify-between","data-selenium-test":"company-chicklet-phone",children:Object(r.jsx)(Ri,{propertyName:"phone",data:a,onClick:O()(c,"phone")})}):Object(r.jsx)(o.Fragment,{children:Object(r.jsx)(C.a,{message:"universalSidebar.cards.CompanySecondaryProperties.emptyPhone"})})}},l=function(e){return Object(r.jsx)(Ni,{propertyFormatters:d,summaryProperty:e,objectType:g.COMPANY},e.name)},u=function(){return t.secondaryProperties.map(l)};return Object(r.jsx)(o.Fragment,{children:u()})};Vi.propTypes={company:c.a.shape({secondaryProperties:c.a.array.isRequired}).isRequired,fromObjectType:c.a.string.isRequired};var Ui=Vi,Bi=n("7GUQ"),Hi=function(e){var t=e.associationCategory,n=e.associationTypeId,a=e.associatedObjectsIds,i=e.cardId,o=e.object,s=e.isPrimary,c=void 0!==s&&s,d=e.onPhoneClick,l=e.onPreview,u=e.objectId,m=e.objectType,b=e.primaryAssociationObjectInfo,p=void 0===b?{}:b,j=Object(B.a)(H.a,!0),k=Object(Bi.a)(),f=o.node.id,v=Ge()(["name","value"],o.node.defaultProperties),O=Ge()(["domain","value"],o.node.defaultProperties),y=Object(mt.c)(o.node.userPermissions),h=v||"--",S=function(){Object(nt.a)({messageKey:"universalSidebar.alertHelpers.addMutationResultAlert.removeAssociationMutationSucceeded",messageKeyOptions:{removedObjectLabel:h}});ut.b.log("removeAssociation",{toObjectTypeId:F.k[g.COMPANY],fromObjectTypeId:F.k[m]?F.k[m]:m})},N=o.associationDefinitions?o.associationDefinitions.map(function(e){return{associationTypeId:e.associationTypeId,associationCategory:e.associationCategory}}):[{associationTypeId:n,associationCategory:t}],C=it({fromObjectId:+u,fromObjectType:m,toObjectId:f,toObjectType:g.COMPANY,toObjectIsPrimary:c,associationSpecs:N,onSuccess:S,onError:function(){return Object(nt.a)({mutationFailed:!0})}}),T=dt({cardId:i,fromObjectId:+u,fromObjectType:m,toObjectId:f,onError:function(){return Object(nt.a)({mutationFailed:!0})}}),x=function(){return y?Object(r.jsx)(I.a,{href:Object(lt.a)({objectType:g.COMPANY,objectId:f}),"data-selenium-test":"company-chicklet-title-link",children:h}):Object(r.jsx)("strong",{"data-selenium-test":"company-chicklet-title-read-only",children:h})},A=j&&m===g.CONTACT||k&&(m===g.DEAL||m===g.TICKET)?qa:Ka;return Object(r.jsx)("div",{"data-selenium-id":f,children:Object(r.jsx)(Pe,{primaryTagSpacing:c,children:Object(r.jsx)(Ye,{associationDefinitions:o.associationDefinitions,associatedObjectsIds:a,Buttons:A,fromObjectId:+u,fromObjectType:m,objectType:g.COMPANY,objectId:f,onPreview:l,onRemoveAssociation:C,onUpdateAssociations:T,toObjectLabel:v||O,canView:y,primaryAssociationObjectInfo:p,primaryDisplayLabelPropertyName:o.node.defaultProperties.name.definition&&Ge()(["name","definition","label"],o.node.defaultProperties),children:Object(r.jsx)(Ae,{associationDefinitions:o.associationDefinitions,avatarLookup:{type:"companyId",primaryIdentifier:f,secondaryIdentifier:O},avatarProps:{companyId:f},isPrimary:c,primaryIdentifier:x(),nestChildren:!0,children:Object(r.jsx)(Ui,{company:o,fromObjectType:F.k[m]?F.k[m]:m,onPhoneClick:d})})})})})};Hi.propTypes={associationCategory:c.a.string.isRequired,associationTypeId:c.a.number.isRequired,associatedObjectsIds:c.a.array,cardId:c.a.string,object:f({secondaryProperties:!0}),isPrimary:c.a.bool,onPhoneClick:c.a.func,onPreview:c.a.func.isRequired,objectId:c.a.string.isRequired,objectType:c.a.string.isRequired,primaryAssociationObjectInfo:c.a.shape({primaryAssociationObjectId:c.a.number,primaryAssociationPrimaryDisplayLabel:c.a.string})};var Ki=Hi,Yi="phone";function zi(e){var t=e.associationCategory,n=e.associationObjectTypeId,a=e.associationTypeId,i=e.data,s=e.onViewMore,c=e.onPreview,d=e.onPhoneClick,l=e.objectType,u=e.objectId,m=function(e){var i=e.node.id;return Object(r.jsx)(Ki,{associationCategory:t,associationTypeId:a,object:e,objectType:l,objectId:u,onPhoneClick:d&&O()(d,g.COMPANY,String(i),Yi),onPreview:O()(c,Object(y.b)({objectTypeId:n,objectId:String(i)}))},i)},b=i.associatedObjects.edges;if(!b.length)return null;if(Object(A.a)(l)){var p=m(b[0]);return Object(r.jsx)(o.Fragment,{children:p})}return Object(r.jsxs)(o.Fragment,{children:[b.map(m),Object(r.jsx)(q,{data:i,onViewMore:s})]})}zi.propTypes={associationCategory:c.a.string.isRequired,associationObjectTypeId:S.a.isRequired,associationTypeId:c.a.number.isRequired,data:c.a.shape({associatedObjects:c.a.shape({edges:c.a.arrayOf(f({summaryProperties:!0}))})}).isRequired,onViewMore:c.a.func.isRequired,onPreview:c.a.func.isRequired,onPhoneClick:c.a.func,objectId:c.a.string.isRequired,objectType:h.b.isRequired};var Qi=n("KcZi"),Wi=n.n(Qi),Gi=n("lv1D"),Ji=n("cqEQ"),Zi=n("MDyi"),Xi=n("6CQU"),$i=n("lWsH"),er=function(e){var t=e.fieldLevelAccess,n=e.children;return t===$i.b?n:Object(r.jsx)(o.Fragment,{children:Object(r.jsx)(bt.a,{disabled:!1,"data-unit-test":"field-level-permission-tooltip",title:Object(r.jsx)(C.a,{message:"universalSidebar.permissions.READ_ONLY"}),children:Object(r.jsx)("span",{children:n})})})};er.propTypes={fieldLevelAccess:c.a.oneOf([$i.b,$i.c,$i.a]).isRequired,children:c.a.node.isRequired};var tr=er;function nr(e,t){return e.displayOrder>t.displayOrder?1:-1}var ar=function(e){var t=e.pipeline,n=t.stages,a=t.pipelineId,i=e.currentStage,s=e.fieldLevelAccess,c=e.objectType,d=e.objectId,l=e.objectLabel,u=e.stagePropertyName,m=e.readOnly,b=Object(o.useContext)(Gi.a),p=Object(o.useState)(Zi.d),j=Object(Ee.a)(p,2),k=j[0],f=j[1],v=Object(Le.b)(),O=Object(o.useCallback)(function(){Object(nt.a)({mutationFailed:!1});f(Zi.c)},[f]),y=Object(o.useCallback)(function(){Object(nt.a)({mutationFailed:!0});f(Zi.a)},[f]),g=Object(Ji.a)({objectType:c,objectId:d,propertySourceInfo:b,onError:y,onSuccess:O}),h=Object(o.useCallback)(function(e){f(Zi.b);g(e)},[f,g]),S=Object(Xi.a)({stageChangeStatus:k,stagePropertyName:u,objectId:d,objectLabel:l,objectTypeId:F.k[c]||c,onConfirm:h}),N=Object(Ee.a)(S,2),C=N[0],T=N[1],I=Object(o.useCallback)(function(e){var t=e.target.value;f(Zi.d);T(t);ut.b.log("sidebar-interaction",{type:c,action:"clicked hyperlinked action from card",subAction:"deal stage"})},[T,c]),x=Object(o.useMemo)(function(){return n.slice().sort(nr).map(function(e){return{text:Object(za.d)({label:e.label,objectType:c,pipelineId:a,stageId:e.stageId}),value:e.stageId}})},[c,a,n]);return m||v?Object(za.d)({label:i.label,objectType:c,pipelineId:a,stageId:i.stageId}):Object(r.jsxs)(tr,{fieldLevelAccess:s,children:[C,Object(r.jsx)(ca.a,{buttonUse:"link",menuWidth:250,onChange:I,options:x,value:i.stageId,"data-selenium-test":"base-chicklet-select",disabled:s!==$i.b})]})};ar.propTypes={currentStage:c.a.shape({stageId:c.a.string.isRequired,label:c.a.string.isRequired}),fieldLevelAccess:c.a.oneOf([$i.b,$i.c,$i.a]).isRequired,pipeline:c.a.shape({pipelineId:c.a.string.isRequired,stages:c.a.arrayOf(c.a.shape({label:c.a.string.isRequired,displayOrder:c.a.number.isRequired,stageId:c.a.string.isRequired})).isRequired}).isRequired,objectType:c.a.oneOf([g.DEAL,g.TICKET]),objectId:c.a.number.isRequired,objectLabel:c.a.string.isRequired,stagePropertyName:c.a.string.isRequired,readOnly:c.a.bool};var ir=Object(o.memo)(ar),rr=n("sld6"),or=V.a.div.withConfig({displayName:"TicketChickletSecondaryProperties__StyledOwnerLabel",componentId:"nzcd4y-0"})(["&&{padding-right:8px !important;}"]),sr=function(e){var t=e.ticket,n=e.fieldLevelAccess,a=Object(o.useContext)(_a.a).readOnly,i=Ge()(["subject","value"],t.node.defaultProperties),s=Ci(t.secondaryProperties,"hs_pipeline_stage"),c=t.node.pipelineInfo&&t.node.pipelineInfo.pipeline,d=c&&c.stages&&c.stages.find(function(e){return e.stageId===s}),l=Object(mt.b)(t.node.userPermissions),u=t.node.id,m=function(){try{var e=Ge()(["node","defaultProperties","hubspot_owner_id","referencedObject"],t),n=e.firstName,a=e.lastName;return Object(r.jsx)(Wi.a,{givenName:n,familyName:a})}catch(e){return null}},b={hs_pipeline_stage:function(){return c&&d?Object(r.jsxs)(o.Fragment,{children:[Object(r.jsx)(C.a,{message:"universalSidebar.chicklet.TicketChickletSecondaryProperties.statusLabel"}),Object(r.jsx)(ir,{pipeline:c,currentStage:d,objectType:g.TICKET,objectId:u,stagePropertyName:"hs_pipeline_stage",readOnly:!l||a,objectLabel:i,fieldLevelAccess:n})]}):null},hubspot_owner_id:function(){return Object(r.jsxs)(rr.a,{align:"center","data-selenium-test":"ticket-chicklet-owner-select",children:[Object(r.jsx)(or,{children:Object(r.jsx)(C.a,{message:"universalSidebar.chicklet.TicketChicklet.owner"})}),m()]})}},p=function(e){return Object(r.jsx)(Ni,{propertyFormatters:b,summaryProperty:e,objectType:g.TICKET},e.name)},j=function(){return t.secondaryProperties.map(p)};return Object(r.jsx)(o.Fragment,{children:j()})};sr.propTypes={fieldLevelAccess:c.a.oneOf([$i.b,$i.c,$i.a]).isRequired,ticket:c.a.object.isRequired};var cr=sr;function dr(e){if(void 0!==e){var t=parseFloat(e);return!isNaN(t)&&isFinite(e)?t:null}}var lr=function(e){var t=e.associationCategory,n=e.associationTypeId,a=e.associatedObjectsIds,i=e.cardId,o=e.object,s=e.onPreview,c=e.objectId,d=e.objectType,l=e.primaryAssociationObjectInfo,u=void 0===l?{}:l,m=Object(Bi.a)(),b=o.node.id,p=Ge()(["subject","value"],o.node.defaultProperties),j=Ge()(["content","value"],o.node.defaultProperties),k=dr(Ge()(["closed_date","value"],o.node.defaultProperties)),f=Ge()(["createdate"],o.node.defaultProperties),v=o.associationDefinitions,O=function(){return k?Object(r.jsx)(C.a,{message:"universalSidebar.chicklet.TicketChicklet.closeDate","data-unit-test":"ticket-chicklet-closed-date",options:{date:z.a.moment.userTz(k).format("L")}}):Object(r.jsx)(C.a,{message:"universalSidebar.chicklet.TicketChicklet.timeOpen","data-selenium-test":"ticket-chicklet-open-duration",options:{duration:z.a.moment.userTz(parseInt(f.value,10)).fromNow(!0)}})},y=p||j||"--",h=Object(mt.c)(o.node.userPermissions),S=Ge()(["hs_pipeline_stage","permission","accessLevel"],o.node.defaultProperties),N=function(){Object(nt.a)({messageKey:"universalSidebar.alertHelpers.addMutationResultAlert.removeAssociationMutationSucceeded",messageKeyOptions:{removedObjectLabel:y}});ut.b.log("removeAssociation",{toObjectTypeId:F.k[g.TICKET],fromObjectTypeId:F.k[d]?F.k[d]:d})},T=o.associationDefinitions?o.associationDefinitions.map(function(e){return{associationTypeId:e.associationTypeId,associationCategory:e.associationCategory}}):[{associationTypeId:n,associationCategory:t}],x=it({fromObjectId:+c,fromObjectType:d,toObjectId:b,toObjectType:g.TICKET,associationSpecs:T,onSuccess:N}),A=dt({cardId:i,fromObjectId:+c,fromObjectType:d,toObjectId:b,onError:function(){return Object(nt.a)({mutationFailed:!0})}}),D=function(){return h?Object(r.jsx)(I.a,{href:Object(lt.a)({objectType:g.TICKET,objectId:b}),"data-selenium-test":"ticket-chicklet-title-link",children:y}):Object(r.jsx)("strong",{"data-selenium-test":"ticket-chicklet-title-read-only",children:y})},R=m&&d===g.COMPANY?qa:Ka;return Object(r.jsx)("div",{"data-selenium-id":b,children:Object(r.jsx)(Pe,{children:Object(r.jsxs)(Ye,{associationDefinitions:v,associatedObjectsIds:a,fromObjectId:+c,fromObjectType:d,objectType:g.TICKET,objectId:b,Buttons:R,canView:h,onPreview:s,onRemoveAssociation:x,onUpdateAssociations:A,toObjectLabel:p||j,primaryAssociationObjectInfo:u,primaryDisplayLabelPropertyName:o.node.defaultProperties.subject.definition&&Ge()(["subject","definition","label"],o.node.defaultProperties),children:[Object(r.jsx)("div",{"data-selenium-test":"ticket-chicklet-title",children:D()}),O(),Object(r.jsx)(cr,{fieldLevelAccess:S,ticket:o}),m&&Object(r.jsx)(Te,{associationDefinitions:v})]})})})};lr.propTypes={associationCategory:c.a.string.isRequired,associationTypeId:c.a.number.isRequired,cardId:c.a.string,object:f({summaryProperties:!0,defaultProperties:!0}).isRequired,onPreview:c.a.func.isRequired,objectId:c.a.string.isRequired,objectType:c.a.string.isRequired,associatedObjectsIds:c.a.array,primaryAssociationObjectInfo:c.a.object};var ur=lr,mr=n("5b5O"),br=n.n(mr),pr=function(e){var t=e.deal,n=Object(o.useContext)(_a.a).readOnly,a=t.node.id,i=Ge()(["dealname","value"],t.node.defaultProperties),s=dr(Ci(t.secondaryProperties,"closedate")),c=dr(Ge()(["amount","value"],t.node.defaultProperties)),d=Ge()(["deal_currency_code","value"],t.node.defaultProperties),l=Ge()(["dealstage","value"],t.node.defaultProperties),u=t.node.pipelineInfo&&t.node.pipelineInfo.pipeline,m=u&&u.stages&&u.stages.find(function(e){return e.stageId===l}),b=Object(mt.b)(t.node.userPermissions),p={dealstage:function(){if(!u||!m)return null;var e=Ge()(["dealstage","permission","accessLevel"],t.node.defaultProperties),o="universalSidebar.chicklet.DealChicklet.DealChickletSummaryProperties.stageLabel";return Object(r.jsxs)("div",{"data-selenium-test":"deal-chicklet-stage-select",children:[Object(r.jsx)(dn.a,{message:o})," ",Object(r.jsx)(ir,{currentStage:m,objectType:g.DEAL,objectId:a,stagePropertyName:"dealstage",readOnly:n||!b,objectLabel:i,fieldLevelAccess:e,pipeline:u})]})},closedate:function(){var e=s?Object(r.jsx)(br.a,{value:s,type:"userTz",format:"LL"}):"--",t="universalSidebar.chicklet.DealChicklet.DealChickletSummaryProperties.closeDateLabel";return Object(r.jsxs)("div",{"data-selenium-test":"deal-chicklet-close-date",children:[Object(r.jsx)(dn.a,{message:t})," ",e]})},amount:function(){var e=c?Object(r.jsx)(Xa.a,{currencyCode:d,simplifyCurrency:!1,value:c}):ri,t="universalSidebar.chicklet.DealChicklet.DealChickletSecondaryProperties.amount";return Object(r.jsxs)("div",{children:[Object(r.jsx)(C.a,{message:t}),e]})}},j=function(e){return Object(r.jsx)(Ni,{propertyFormatters:p,summaryProperty:e,objectType:g.DEAL},e.name)},k=function(e){return e},f=function(){var e=t.secondaryProperties;return k(e).map(j)};return Object(r.jsx)(o.Fragment,{children:f()})};pr.propTypes={deal:f({defaultProperties:!0}).isRequired};var jr=pr,kr=function(e){var t=e.associationCategory,n=e.associationTypeId,a=e.associatedObjectsIds,i=e.cardId,o=e.object,s=e.onPreview,c=e.objectId,d=e.objectType,l=e.primaryAssociationObjectInfo,u=void 0===l?{}:l,m=Object(Bi.a)(),b=o.associationDefinitions,p=o.node.id,j=Ge()(["dealname","value"],o.node.defaultProperties)||"--",k=Object(mt.c)(o.node.userPermissions),f=function(){Object(nt.a)({messageKey:"universalSidebar.alertHelpers.addMutationResultAlert.removeAssociationMutationSucceeded",messageKeyOptions:{removedObjectLabel:j||"--"}});ut.b.log("removeAssociation",{toObjectTypeId:F.k[g.DEAL],fromObjectTypeId:F.k[d]?F.k[d]:d})},v=b?b.map(function(e){return{associationTypeId:e.associationTypeId,associationCategory:e.associationCategory}}):[{associationTypeId:n,associationCategory:t}],O=it({fromObjectId:+c,fromObjectType:d,toObjectId:p,toObjectType:g.DEAL,associationSpecs:v,onSuccess:f}),y=dt({cardId:i,fromObjectId:+c,fromObjectType:d,toObjectId:p,onError:function(){return Object(nt.a)({mutationFailed:!0})}}),h=function(){return k?Object(r.jsx)(I.a,{href:Object(lt.a)({objectType:g.DEAL,objectId:p}),"data-selenium-test":"deal-chicklet-title-link",children:j}):Object(r.jsx)("strong",{"data-selenium-test":"deal-chicklet-title-read-only",children:j})},S=m&&d===g.COMPANY?qa:Ka;return Object(r.jsx)("div",{"data-selenium-test":"deal-chicklet","data-selenium-id":p,children:Object(r.jsx)(Pe,{children:Object(r.jsxs)(Ye,{associationDefinitions:b,associatedObjectsIds:a,fromObjectId:+c,fromObjectType:d,objectType:g.DEAL,objectId:p,Buttons:S,canView:k,onPreview:s,onRemoveAssociation:O,onUpdateAssociations:y,toObjectLabel:j,primaryAssociationObjectInfo:u,primaryDisplayLabelPropertyName:o.node.defaultProperties.dealname.definition&&Ge()(["dealname","definition","label"],o.node.defaultProperties),children:[Object(r.jsx)("div",{"data-selenium-test":"deal-chicklet-title",children:h()}),Object(r.jsx)(jr,{deal:o}),m&&Object(r.jsx)(Te,{associationDefinitions:b})]})})})};kr.propTypes={associationCategory:c.a.string.isRequired,associationTypeId:c.a.number.isRequired,cardId:c.a.string,object:f({defaultProperties:!0}).isRequired,onPreview:c.a.func.isRequired,objectId:c.a.string.isRequired,objectType:c.a.string.isRequired,associatedObjectsIds:c.a.array,primaryAssociationObjectInfo:c.a.object};var fr=kr,vr="phone",Or=function(e){var t=e.associationObjectTypeId,n=e.primaryAssociation;switch(t){case F.k[g.COMPANY]:return n&&n.node.defaultProperties.name&&n.node.defaultProperties.name.value;case F.k[g.TICKET]:return n&&n.node.defaultProperties.subject&&n.node.defaultProperties.subject.value;case F.k[g.DEAL]:return n&&n.node.defaultProperties.dealname&&n.node.defaultProperties.dealname.value;case F.k[g.CONTACT]:return n&&n.node.defaultProperties&&Qe()({firstName:Ge()(["firstname","value"],n.node.defaultProperties),lastName:Ge()(["lastname","value"],n.node.defaultProperties)});default:return"--"}};function yr(e){var t,n=e.associationCategory,a=e.associationObjectTypeId,s=e.associationTypeId,c=e.data,d=e.onEmailClick,l=e.onPhoneClick,u=e.onPreview,m=e.onViewMore,b=e.objectType,p=e.objectId,j=c.associatedObjects.edges.map(function(e){return""+e.node.id}),k=c.associatedObjects.primaryEdge,f=c.associatedObjects.secondaryEdges,v=k&&k.node.id,h=Or({primaryAssociation:k,associationObjectTypeId:a}),S=(t={},Object(i.a)(t,F.k[g.COMPANY],Ki),Object(i.a)(t,F.k[g.CONTACT],_i),Object(i.a)(t,F.k[g.TICKET],ur),Object(i.a)(t,F.k[g.DEAL],fr),t)[a],N=Object(o.useContext)($e.a).client,C=Object(o.useCallback)(function(){N.query({fetchPolicy:"network-only",query:rt.b,variables:{objectType:b,subjectId:+p,cardId:c.cardId}})},[N,b,p,c.cardId]),T=function(e){var t=e.object,i=e.isPrimary,o=t.node.id;return Object(r.jsx)(S,{associationCategory:n,associatedObjectsIds:j,associationTypeId:s,cardId:c.cardId,object:t,isPrimary:i,objectType:b,objectId:p,onEmailClick:d&&O()(d,F.j[a],String(o)),onPhoneClick:l&&O()(l,F.j[a],String(o),vr),onPreview:O()(u,Object(y.b)({objectTypeId:a,objectId:String(o)})),primaryAssociationObjectInfo:{primaryAssociationObjectId:v,primaryAssociationPrimaryDisplayLabel:h}},o)};return Object(r.jsxs)(ia.Provider,{value:C,children:[k&&T({object:k,isPrimary:!0}),f.length>0&&f.map(function(e){return T({object:e,isPrimary:!1})}),Object(r.jsx)(q,{data:c,onViewMore:m})]})}yr.propTypes={associationCategory:c.a.string.isRequired,associationObjectTypeId:S.a.isRequired,associationTypeId:c.a.number.isRequired,data:c.a.shape({cardId:c.a.string.isRequired,associatedObjects:c.a.shape({edges:c.a.arrayOf(f({summaryProperties:!0})),primaryEdge:f({summaryProperties:!0}),secondaryEdges:c.a.arrayOf(f({summaryProperties:!0}))})}).isRequired,onViewMore:c.a.func.isRequired,onPreview:c.a.func.isRequired,onEmailClick:c.a.func,onPhoneClick:c.a.func,objectId:c.a.string.isRequired,objectType:h.b.isRequired};var gr=function(e,t){switch(t){case g.CONTACT:return"/contacts/"+l.a.get()+"/deals/list/view/all/?associations-contact="+e;case g.COMPANY:return"/contacts/"+l.a.get()+"/deals/list/view/all/?associations-company="+e;default:return}};function hr(e){var t=e.associationCategory,n=e.associationTypeId,a=e.data,i=e.onViewMore,s=e.onPreview,c=e.associationObjectTypeId,d=e.objectType,l=e.objectId,u=function(e){return Object(r.jsx)(fr,{associationCategory:t,associationTypeId:n,object:e,objectType:d,objectId:l,onPreview:O()(s,Object(y.b)({objectTypeId:c,objectId:String(e.node.id)}))},e.node.id)},m=a.associatedObjects.edges;return m.length?Object(r.jsxs)(o.Fragment,{children:[m.map(u),Object(r.jsx)(q,{data:a,viewAllLink:gr(l,d),onViewMore:i})]}):null}hr.propTypes={associationCategory:c.a.string.isRequired,associationObjectTypeId:S.a.isRequired,associationTypeId:c.a.number.isRequired,data:c.a.shape({associatedObjects:c.a.shape({edges:c.a.arrayOf(f({summaryProperties:!0,defaultProperties:!0})).isRequired}).isRequired}).isRequired,onViewMore:c.a.func.isRequired,onPreview:c.a.func.isRequired,objectId:c.a.string.isRequired,objectType:h.b.isRequired};var Sr=function(e,t){switch(t){case g.CONTACT:return"/contacts/"+l.a.get()+"/tickets/list/view/all/?associations-contact="+e;case g.COMPANY:return"/contacts/"+l.a.get()+"/tickets/list/view/all/?associations-company="+e;default:return}},Nr=function(e){var t=e.associationCategory,n=e.associationTypeId,a=e.data,i=e.onViewMore,s=e.onPreview,c=e.associationObjectTypeId,d=e.objectType,l=e.objectId,u=function(e){return Object(r.jsx)(ur,{associationCategory:t,associationTypeId:n,object:e,objectType:d,objectId:l,onPreview:O()(s,Object(y.b)({objectTypeId:c,objectId:String(e.node.id)}))},e.node.id)},m=a.associatedObjects.edges;return m.length?Object(r.jsxs)(o.Fragment,{children:[m.map(u),Object(r.jsx)(q,{data:a,viewAllLink:Sr(l,d),onViewMore:i})]}):null};Nr.propTypes={associationCategory:c.a.string.isRequired,associationObjectTypeId:S.a.isRequired,associationTypeId:c.a.number.isRequired,data:c.a.shape({associatedObjects:c.a.shape({edges:c.a.arrayOf(f({summaryProperties:!0,defaultProperties:!0})).isRequired}).isRequired}).isRequired,onViewMore:c.a.func.isRequired,onPreview:c.a.func.isRequired,objectId:c.a.string.isRequired,objectType:h.b.isRequired};var Cr=Nr,Tr=Rn()(function(e,t){gi.a.captureMessage("customer-data-sidebar: invalid crmObject summary property",{extra:{portalId:l.a.get(),objectTypeId:e,name:t}})}),Ir=function(e){var t=e.associationCategory,n=e.associationTypeId,a=e.canView,i=e.objectTypeId,s=e.objectId,c=e.primaryDisplayProperty,d=e.secondaryProperties,l=e.onPreview,u=Object(o.useContext)(aa.a),m=function(){Object(nt.a)({messageKey:"universalSidebar.alertHelpers.addMutationResultAlert.removeAssociationMutationSucceeded",messageKeyOptions:{removedObjectLabel:c.value&&Object(ti.a)(Ya.a.fromJS(c.definition),c.value)}});ut.b.log("removeAssociation",{toObjectTypeId:i,fromObjectTypeId:F.k[u.objectType]?F.k[u.objectType]:u.objectType})},b=it({fromObjectId:+u.objectId,fromObjectType:u.objectType,toObjectId:+s,toObjectType:i,associationSpecs:[{associationTypeId:n,associationCategory:t}],onSuccess:m}),p=Object(o.useCallback)(function(e){ut.b.log("sidebar-interaction",{action:"click property copy",toObjectType:i,fromObjectType:F.k[u.objectType]?F.k[u.objectType]:u.objectType,propertyName:e})},[i,u.objectType]),j=function(e){var t=e.name,n=e.definition,a=e.value;if(!n){Tr(i,t);return null}var o=F.j[i]||i,s=Ya.a.fromJS(n),c=n.hubspotDefined?Object(za.b)(n.label):n.label,d=Object(r.jsx)(Oi,{objectType:o,property:s,value:a,"data-selenium-test":"property-input-"+t});return Object(r.jsx)(Ri,{copyValue:a,data:Object(r.jsxs)("span",{children:[Object(r.jsxs)("span",{className:"p-right-2",children:[c,":"]}),d]}),onClick:O()(p,n.name),propertyName:n.name},t)},k=function(e){if(!e||!e.definition)return null;var t=e.definition,n=e.definition.name,o=e.value,c=F.j[i]||i,d=Ya.a.fromJS(t),l=Object(r.jsx)(Oi,{objectType:c,property:d,value:o,"data-selenium-test":"property-input-"+n});return a&&i!==F.n?Object(r.jsx)(I.a,{href:Object(lt.a)({objectTypeId:i,objectId:s}),"data-selenium-test":"crmobject-chicklet-title-link",children:l}):Object(r.jsx)("strong",{"data-selenium-test":"crmobject-chicklet-title-read-only","data-unit-test":"crmobject-chicklet-title-read-only",children:l})};return Object(r.jsx)("div",{"data-selenium-id":s,children:Object(r.jsx)(Pe,{children:Object(r.jsx)(Ye,{Buttons:Ka,onPreview:l,onRemoveAssociation:b,canView:a,toObjectLabel:c&&c.definition&&Object(ti.a)(Ya.a.fromJS(c.definition),c.value),children:Object(r.jsxs)("div",{children:[k(c),d.map(j)]})})})})};Ir.propTypes={associationCategory:c.a.string.isRequired,associationTypeId:c.a.number.isRequired,canView:c.a.bool.isRequired,objectTypeId:S.a.isRequired,objectId:c.a.string.isRequired,primaryDisplayProperty:c.a.object.isRequired,secondaryProperties:c.a.array.isRequired,onPreview:c.a.func.isRequired};var xr=Ir,Fr=function(e){var t=e.associationCategory,n=e.associationTypeId,a=e.data,i=e.onViewMore,s=e.onPreview,c=e.associationObjectTypeId,d=function(e){return Object(r.jsx)(xr,{associationCategory:t,associationTypeId:n,objectId:String(e.node.id),objectTypeId:c,onPreview:O()(s,Object(y.b)({objectTypeId:c,objectId:String(e.node.id)})),canView:Object(mt.c)(e.node.userPermissions),primaryDisplayProperty:e.node.primaryDisplayProperty,secondaryProperties:e.secondaryProperties},e.node.id)},l=a.associatedObjects.edges;return l.length?Object(r.jsxs)(o.Fragment,{children:[l.map(d),Object(r.jsx)(q,{data:a,onViewMore:i})]}):null};Fr.propTypes={associationCategory:c.a.string.isRequired,associationObjectTypeId:S.a.isRequired,associationTypeId:c.a.number.isRequired,data:c.a.shape({associatedObjects:c.a.shape({edges:c.a.array.isRequired}).isRequired}).isRequired,onViewMore:c.a.func.isRequired,onPreview:c.a.func.isRequired};var Ar=Fr,Dr=function(e){var t=e.fromObjectTypeId,n=e.toObjectTypeId,a=e.toObjectTypeDefinition,i=Object(B.a)(H.a,!0),o=Object(Bi.a)(),s=function(){return Object(r.jsx)(C.a,{message:"universalSidebar.cards.AssociatedObjectsCard.emptyState.CONTACT.default"})},c=function(){var e=i&&t===F.k[g.CONTACT]||o&&(t===F.k[g.DEAL]||t===F.k[g.TICKET])?"universalSidebar.cards.AssociatedObjectsCard.emptyState.COMPANY_WITH_PLURAL.fromRecord":"universalSidebar.cards.AssociatedObjectsCard.emptyState.COMPANY.fromRecord";return Object(r.jsx)(C.a,{message:e})},d=function(){return Object(r.jsx)(C.a,{options:{toPluralForm:a.pluralForm},message:"universalSidebar.cards.AssociatedObjectsCard.emptyState.GENERIC.default"})},l=function(){switch(n){case F.k[g.CONTACT]:return s();case F.k[g.COMPANY]:return c();case F.k[g.DEAL]:return Object(r.jsx)(C.a,{message:"universalSidebar.cards.AssociatedObjectsCard.emptyState.DEAL"});case F.k[g.TICKET]:return Object(r.jsx)(C.a,{message:"universalSidebar.cards.AssociatedObjectsCard.emptyState.TICKET"});default:return d()}};return Object(r.jsx)("div",{"data-selenium-test":"associated-objects-card-empty-state",children:l()})};Dr.propTypes={fromObjectTypeId:c.a.string,toObjectTypeId:c.a.string,toObjectTypeDefinition:c.a.shape({pluralForm:c.a.string,singularForm:c.a.string})};var Rr,Pr=Dr,Er=n("lAFI"),_r=n.n(Er);n.d(t,"viewMore",function(){return Ur});var wr=(Rr={},Object(i.a)(Rr,F.k[g.CONTACT],qi),Object(i.a)(Rr,F.k[g.COMPANY],zi),Object(i.a)(Rr,F.k[g.DEAL],hr),Object(i.a)(Rr,F.k[g.TICKET],Cr),Rr),Lr=function(e){return function(t,n){return e.includes(t)&&e.includes(n)}},qr=Lr([F.k[g.COMPANY],F.k[g.CONTACT]]),Mr=Lr([F.k[g.COMPANY],F.k[g.DEAL]]),Vr=Lr([F.k[g.COMPANY],F.k[g.TICKET]]),Ur=function(e,t){var n=t.objectType,i=t.subjectId,r=t.cardId,o=t.cursor;return e({query:rt.b,variables:{objectType:n,subjectId:i,cardId:r,cursor:o},updateQuery:function(e,t){var n=t.fetchMoreResult.crmObject.card;if(!n)return e;var i=e.crmObject.cards.findIndex(function(e){return e.cardId===r});return _r()(["crmObject","cards",i],function(e){return Object.assign({},e,{associatedObjects:Object.assign({},e.associatedObjects,{edges:[].concat(Object(a.a)(e.associatedObjects.edges),Object(a.a)(n.associatedObjects.edges)),secondaryEdges:[].concat(Object(a.a)(e.associatedObjects.secondaryEdges),Object(a.a)(n.associatedObjects.secondaryEdges)),pageInfo:n.associatedObjects.pageInfo})})},e)}})},Br=function(e){var t=e.data,n=e.objectType,a=e.objectId,i=e.onEmailClick,s=e.onPhoneClick,c=t.associationDefinitions[0],d=c.toObjectTypeId,l=c.associationTypeId,u=c.associationCategory,m=Object(o.useContext)(y.a).setPreviewConfig,b=Object(o.useContext)($e.a).fetchMore,p=t.cardId,j=+a,k=t.associatedObjects.pageInfo.endCursor,f=Object(B.a)(H.a,!0),v=Object(Bi.a)(),O=Object(o.useCallback)(function(){return Ur(b,{objectType:n,subjectId:j,cardId:p,cursor:k})},[b,n,j,p,k]);if(!t.associatedObjects.edges.length)return Object(r.jsx)(Pr,{fromObjectTypeId:F.k[n]||n,toObjectTypeId:d,toObjectTypeDefinition:c.toObjectTypeDefinition});var g=wr[d]||Ar,h=F.k[n]||n,S=qr(h,d),N=Mr(h,d),C=Vr(h,d);(f&&S||v&&(N||C))&&(g=yr);return Object(r.jsx)("div",{children:Object(r.jsx)(g,{associationCategory:u,associationObjectTypeId:d,associationTypeId:l,data:t,onViewMore:O,objectType:n,onPreview:m,subjectId:a,objectId:a,onEmailClick:i,onPhoneClick:s})})},Hr={data:c.a.object.isRequired,objectId:c.a.string.isRequired,objectType:h.b.isRequired,onEmailClick:c.a.func,onPhoneClick:c.a.func};Br.propTypes=Hr;t.default=Br},dW5E:function(e,t,n){"use strict";n.d(t,"g",function(){return j});n.d(t,"c",function(){return f});n.d(t,"e",function(){return v});n.d(t,"a",function(){return O});n.d(t,"f",function(){return y});n.d(t,"b",function(){return g});n.d(t,"d",function(){return h});var a=n("fFSu"),i=n("eVil"),r=n.n(i),o=n("omic"),s=n.n(o),c=n("QYOI"),d=n("rBqy"),l=n("2RhA"),u=n("zzHy"),m=n("/Xfk"),b=n("lWsH"),p=function(e){var t={};return e.filter(function(e){if("FragmentDefinition"!==e.kind)return!0;var n=e.name.value;if(t[n])return!1;t[n]=!0;return!0})},j=function(e,t){var n,i=t.crmObject,o=i&&Object(d.f)(e,i),p=r()("favoriteProperties",i),j=function(){return b.b};if(p){var k=p.filter(function(e){return r()("definition",e)&&!s()(["definition","deleted"],e)&&!s()(["definition","hidden"],e)&&!m.a.contains(e.name)});n=k.map(function(e){var t=e.source,n=e.sourceId,i=e.timestamp,r=e.definition,o=r.options,s=void 0===o?[]:o,d=Object(a.a)(r,["options"]);return Object(l.a)(Object.assign({source:t,sourceId:n,timestamp:i},d,{options:Object(c.List)(s.map(function(e){return Object(u.a)(e)}))}))});var f=k.reduce(function(e,t){var n=t.definition,a=t.permissions;n&&a&&(e[n.name]=a.readOnlyValue?b.c:b.b);return e},{});j=function(e){return f[e]||b.b}}return{subject:o,getPropertyPermission:j,favorites:n}},k={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"PropertyDefinition_Fields"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"PropertyValue"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"definition"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"type"}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"deleted"}},{kind:"Field",name:{kind:"Name",value:"textDisplayHint"}},{kind:"Field",name:{kind:"Name",value:"showCurrencySymbol"}},{kind:"Field",name:{kind:"Name",value:"currencyPropertyName"}},{kind:"Field",name:{kind:"Name",value:"label"}},{kind:"Field",name:{kind:"Name",value:"fieldType"}},{kind:"Field",name:{kind:"Name",value:"formField"}},{kind:"Field",name:{kind:"Name",value:"hidden"}},{kind:"Field",name:{kind:"Name",value:"hubspotDefined"}},{kind:"Field",name:{kind:"Name",value:"groupName"}},{kind:"Field",name:{kind:"Name",value:"externalOptions"}},{kind:"Field",name:{kind:"Name",value:"displayOrder"}},{kind:"Field",name:{kind:"Name",value:"displayMode"}},{kind:"Field",name:{kind:"Name",value:"description"}},{kind:"Field",name:{kind:"Name",value:"calculated"}},{kind:"Field",name:{kind:"Name",value:"objectTypeId"}},{kind:"Field",name:{kind:"Name",value:"readOnlyDefinition"}},{kind:"Field",name:{kind:"Name",value:"readOnlyValue"}},{kind:"Field",name:{kind:"Name",value:"referencedObjectType"}},{kind:"Field",name:{kind:"Name",value:"numberDisplayHint"}},{kind:"Field",name:{kind:"Name",value:"mutableDefinitionNotDeletable"}},{kind:"Field",name:{kind:"Name",value:"options"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"description"}},{kind:"Field",name:{kind:"Name",value:"displayOrder"}},{kind:"Field",name:{kind:"Name",value:"doubleData"}},{kind:"Field",name:{kind:"Name",value:"hidden"}},{kind:"Field",name:{kind:"Name",value:"label"}},{kind:"Field",name:{kind:"Name",value:"readOnly"}},{kind:"Field",name:{kind:"Name",value:"value"}}]}}]}},{kind:"Field",name:{kind:"Name",value:"permissions"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"readOnlyValue"}}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"AboutCard_Fields"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"CrmObject"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Company"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"defaultProperties"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"hs_additional_domains"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"value"}}]}},{kind:"Field",name:{kind:"Name",value:"hs_analytics_source"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"value"}}]}},{kind:"Field",name:{kind:"Name",value:"hs_analytics_source_data_1"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"value"}}]}}]}},{kind:"Field",name:{kind:"Name",value:"favoriteProperties"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"value"}},{kind:"Field",name:{kind:"Name",value:"source"}},{kind:"Field",name:{kind:"Name",value:"sourceId"}},{kind:"Field",name:{kind:"Name",value:"timestamp"}},{kind:"FragmentSpread",name:{kind:"Name",value:"PropertyDefinition_Fields"}}]}}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Contact"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"defaultProperties"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"createdate"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"value"}}]}},{kind:"Field",name:{kind:"Name",value:"email"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"value"}}]}},{kind:"Field",name:{kind:"Name",value:"hs_additional_emails"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"value"}}]}},{kind:"Field",name:{kind:"Name",value:"firstname"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"value"}}]}},{kind:"Field",name:{kind:"Name",value:"hs_analytics_source"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"value"}}]}},{kind:"Field",name:{kind:"Name",value:"hs_analytics_source_data_1"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"value"}}]}}]}},{kind:"Field",name:{kind:"Name",value:"favoriteProperties"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"value"}},{kind:"Field",name:{kind:"Name",value:"source"}},{kind:"Field",name:{kind:"Name",value:"sourceId"}},{kind:"Field",name:{kind:"Name",value:"timestamp"}},{kind:"FragmentSpread",name:{kind:"Name",value:"PropertyDefinition_Fields"}}]}}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Deal"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"defaultProperties"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"pipeline"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"value"}}]}},{kind:"Field",name:{kind:"Name",value:"dealstage"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"value"}}]}},{kind:"Field",name:{kind:"Name",value:"deal_currency_code"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"value"}}]}},{kind:"Field",name:{kind:"Name",value:"hs_analytics_source"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"value"}}]}},{kind:"Field",name:{kind:"Name",value:"hs_analytics_source_data_1"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"value"}}]}}]}},{kind:"Field",name:{kind:"Name",value:"favoriteProperties"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"value"}},{kind:"Field",name:{kind:"Name",value:"source"}},{kind:"Field",name:{kind:"Name",value:"sourceId"}},{kind:"Field",name:{kind:"Name",value:"timestamp"}},{kind:"FragmentSpread",name:{kind:"Name",value:"PropertyDefinition_Fields"}}]}}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"FeedbackSubmission"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"defaultProperties"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"hs_survey_type"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"value"}}]}}]}},{kind:"Field",name:{kind:"Name",value:"favoriteProperties"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"value"}},{kind:"Field",name:{kind:"Name",value:"source"}},{kind:"Field",name:{kind:"Name",value:"sourceId"}},{kind:"Field",name:{kind:"Name",value:"timestamp"}},{kind:"FragmentSpread",name:{kind:"Name",value:"PropertyDefinition_Fields"}}]}}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Ticket"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"defaultProperties"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"hs_pipeline_stage"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"value"}}]}},{kind:"Field",name:{kind:"Name",value:"hs_pipeline"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"value"}}]}}]}},{kind:"Field",name:{kind:"Name",value:"favoriteProperties"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"value"}},{kind:"Field",name:{kind:"Name",value:"source"}},{kind:"Field",name:{kind:"Name",value:"sourceId"}},{kind:"Field",name:{kind:"Name",value:"timestamp"}},{kind:"FragmentSpread",name:{kind:"Name",value:"PropertyDefinition_Fields"}}]}}]}}]}}]},f={id:"4a81b8b49e101a65982c0fd1d9655f5e927d65360facd7e585f69d0105cf4a6b",kind:"Document",definitions:p([{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"AboutCard_Query"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"objectType"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"subjectId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Long"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"isVisit"}},type:{kind:"NamedType",name:{kind:"Name",value:"Boolean"}},defaultValue:{kind:"BooleanValue",value:!1}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"crmObject"},arguments:[{kind:"Argument",name:{kind:"Name",value:"type"},value:{kind:"Variable",name:{kind:"Name",value:"objectType"}}},{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"subjectId"}}}],directives:[{kind:"Directive",name:{kind:"Name",value:"skip"},arguments:[{kind:"Argument",name:{kind:"Name",value:"if"},value:{kind:"Variable",name:{kind:"Name",value:"isVisit"}}}]}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"FragmentSpread",name:{kind:"Name",value:"AboutCard_Fields"}}]}}]}}].concat(k.definitions))},v={id:"13ba6006d8008c804a2cbd0d66514c9bb139ccf3733392a635d03d7345e1aa62",kind:"Document",definitions:p([{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"AboutCard_UpdateProperties"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"propertyUpdatesInput"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"UpdateCrmObjectPropertiesInput"}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"updateResponse"},name:{kind:"Name",value:"updateCrmObjectProperties"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"propertyUpdatesInput"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"updatedObject"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"FragmentSpread",name:{kind:"Name",value:"AboutCard_Fields"}}]}},{kind:"Field",name:{kind:"Name",value:"userErrors"}}]}}]}}].concat(k.definitions))},O={id:"e9da4910d718fbed097cc919574aabc2ad7ba69a683e4090eb664666822096cd",kind:"Document",definitions:p([{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"AboutCard_CreateEmail"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"createEmailInput"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"CreateContactSecondaryEmailAddressInput"}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"updateResponse"},name:{kind:"Name",value:"createContactSecondaryEmailAddress"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"createEmailInput"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"updatedObject"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"FragmentSpread",name:{kind:"Name",value:"AboutCard_Fields"}}]}},{kind:"Field",name:{kind:"Name",value:"userErrors"}}]}}]}}].concat(k.definitions))},y={id:"a8e847360f25a566e7dc762dedf9fd5cddd773619b7c455814a2cec0ddb518f8",kind:"Document",definitions:p([{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"AboutCard_UpdateEmail"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"updateEmailInput"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"UpdateContactSecondaryEmailAddressInput"}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"updateResponse"},name:{kind:"Name",value:"updateContactSecondaryEmailAddress"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"updateEmailInput"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"updatedObject"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"FragmentSpread",name:{kind:"Name",value:"AboutCard_Fields"}}]}},{kind:"Field",name:{kind:"Name",value:"userErrors"}}]}}]}}].concat(k.definitions))},g={id:"8f3e50560078d023b9bc798cf0109c75e38e7983ece7cf3ad3edf6220dce5fed",kind:"Document",definitions:p([{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"AboutCard_DeleteEmail"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"deleteEmailInput"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"DeleteContactSecondaryEmailAddressInput"}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"updateResponse"},name:{kind:"Name",value:"deleteContactSecondaryEmailAddress"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"deleteEmailInput"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"updatedObject"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"FragmentSpread",name:{kind:"Name",value:"AboutCard_Fields"}}]}},{kind:"Field",name:{kind:"Name",value:"userErrors"}}]}}]}}].concat(k.definitions))},h={id:"bb17babcd5beed086e5e2558bcea3cec6af5e89a646ef04f809af30a0f9c6b0a",kind:"Document",definitions:p([{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"AboutCard_PromoteEmail"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"promoteEmailInput"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"PromoteContactSecondaryEmailAddressInput"}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"updateResponse"},name:{kind:"Name",value:"promoteContactSecondaryEmailAddress"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"promoteEmailInput"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"updatedObject"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"FragmentSpread",name:{kind:"Name",value:"AboutCard_Fields"}}]}},{kind:"Field",name:{kind:"Name",value:"userErrors"}}]}}]}}].concat(k.definitions))}},hsdY:function(e,t,n){"use strict";var a=n("MQNR"),i=n("eUxV"),r=n("37ae"),o=n.n(r),s="--",c=function(e,t){var n=e.find(function(e){return e.name===t});return n&&n.value},d=function(e,t){var n,r=t.objectTypeDefinition.objectSummaryPropertyNames,d=t.allProperties;if(e===a.CONTACT||e===i.c){var l=c(d,"firstname"),u=c(d,"lastname"),m=c(d,"email");return o()({firstName:l,lastName:u})||m||s}if(e===a.COMPANY||e===i.b){var b=c(d,"name"),p=c(d,"domain");return b||p||s}r.find(function(e){return n=d.find(function(t){return t.name===e&&t.value})});return n&&n.value||s};t.a=d},"i+U4":function(e,t,n){"use strict";var a=n("OwGx"),i=n("vTCD"),r=n("k8Et"),o=n("mNyx"),s=n("txVw"),c=n("pGTB"),d=n("QgEn"),l=n("Ktcs"),u=n("os+u"),m=n.n(u),b=n("VfuR"),p=n.n(b),j=n("nDpY"),k=n.n(j),f=n("j/Up"),v=n("QYOI"),O=n("6l6v"),y=n.n(O),g=n("eVil"),h=n.n(g),S=n("mDbF"),N=n.n(S),C=n("jqvl"),T=n.n(C),I=n("46u0"),x=n.n(I),F=n("rsMa"),A=n("P4dz"),D=n("1RCs"),R=n("pPiP"),P=n.n(R),E=n("aitF"),_=n.n(E),w=n("Uh/y"),L=n("t81I"),q=n("WbQG"),M=n("bCAt"),V=n("fwDr"),U=n("nqVS"),B=n("b9B6"),H=n("sSdB"),K=n("uzdC"),Y=n("9xhK"),z=n("sld6"),Q=n("rWb3"),W=n("LZPL"),G=n.n(W),J="applicable_onboarding_goals",Z="business_goals",X="closed_lost_reason_multiselect",$="competitors",ee="ripout_",te="who_did_we_lose_to_",ne=1598996482e3,ae="1996175",ie="5211240",re=["7e267087-ac36-47d2-95c1-3c48b8a1fc1c","06880eae-6712-480a-a089-9099bc58e253","a4953c0c-59f4-4f35-80e4-dd5afd1b08ed","5fc6c126-df7e-4a57-a224-4dc678c37e00","25d12143-2f2c-43c2-8b67-cc52e0b91179","5bff4093-8e1a-49dd-a5d5-cb6839d84ed5","0aeba8be-7c87-490d-a3c2-5c03f85342c7","359dc482-2b54-4be7-b273-b45e7c2a1841","1205403","1996999","1996181","closedwon"],oe=["10bdf595-c784-4b52-9ed0-e13937b5f33c","a905e2f9-03c5-4e41-b0b5-0e6336ac0c6c","b7313974-1ced-440f-89c2-defedf013c86","b242923b-e1a7-480f-b059-438c4c06d0ba","8f996bf5-e073-4951-806c-5cee79f665b5","9ad94510-31e8-4ddd-804b-2c5080717726","e8b4d558-d53b-4594-8451-69ad8d0abc1c","40ac60cd-eaab-46b4-880d-323e8eadc20a","227e3b2f-8c8f-4623-b7a1-ece7b5731a7a","3ca81706-5e22-42e0-8baf-35c9cf8f6480","5211230","5211246"],se=["fdd7cca3-ff14-4479-88ec-f19011bd5b24","94d29ab5-9fa9-4757-ac63-50a6a694e1f4","5d79a601-1509-46fc-9c5f-66f0613c5140","b7879922-feda-4f67-aaef-177a03dcbe1f","075d6493-c914-45e5-aa6a-80fd4fc61583","518b6f04-bbfa-4a18-aa4b-8a017d9b542d","a063d7cf-b7bf-4591-9edf-832a074c4dc1","118251b5-e1ce-4caf-bf8f-5423bf1f2fd8","ea230232-e63b-4523-a5a5-cf43d7050255","closedlost","1996182","1205404","1997000"],ce=["e350d3ef-f64e-4c7c-ab94-c48f0759dc0c","7a49ee11-da21-4e9f-bc71-29453781125a","c4bf3747-e75d-4388-b764-3c2cc9f5a3d4","76cff0fa-e196-4aa8-b898-8c938252bbe2","137b8391-a3a5-4c3c-ad54-5703a1533ba5","d5812a2f-a86e-4ac7-ae63-d6f5caea3f22","ebe0fe63-a0c1-4167-b2d7-b06156616b17","ce74f39b-10b3-416d-8797-b2a875ccb8cf","2e235bac-b435-4834-a6ba-f9d7ee0a7393","df5bbbee-38e0-4685-9b4d-47f2c065da2d","5211231","5211247"];function de(e){return Object(A.d)(e,"pipeline")||0}function le(e){return G.a.isQa()?se.includes(e):ce.includes(e)}function ue(e){return G.a.isQa()?re.includes(e):oe.includes(e)}function me(e){var t=de(e);return G.a.isQa()?ae===t:ie===t}var be=function(e){Object(c.a)(t,e);function t(){Object(i.a)(this,t);return Object(o.a)(this,Object(s.a)(t).apply(this,arguments))}Object(r.a)(t,[{key:"renderClosedLostHeader",value:function(e){return le(e)?Object(d.jsxs)("div",{"data-selenium-test":"revenue-closed-lost-stage-change-header",children:[Object(d.jsx)("p",{children:Object(d.jsx)(T.a,{message:"revenue.StageChangeDialog.closeLost.cheer"})}),Object(d.jsx)("p",{children:Object(d.jsx)(T.a,{message:"revenue.StageChangeDialog.closeLost.explanation"})})]}):null}},{key:"renderClosedWonHeader",value:function(e){return Object(d.jsxs)(z.a,{"data-selenium-test":"revenue-closed-won-stage-change-header",align:"center",direction:"column",children:[Object(d.jsx)(Y.a,{name:"open-door",width:"30%"}),Object(d.jsx)("h5",{className:"m-all-0",children:Object(d.jsx)(x.a,{message:"revenue.dealStageChangeModal.closedWon.heading"})}),me(e)&&Object(d.jsx)(Q.a,{className:"m-top-5 m-bottom-5",type:"warning",closeable:!1,children:Object(d.jsx)(x.a,{message:"revenue.dealStageChangeModal.closedWon.starterClose"})}),Object(d.jsx)("p",{children:Object(d.jsx)(T.a,{message:"revenue.dealStageChangeModal.closedWon.message"})})]})}},{key:"renderHeading",value:function(e,t,n){return ue(e)?this.renderClosedWonHeader(n):Object(d.jsxs)("div",{children:[this.renderClosedLostHeader(e),Object(d.jsx)("p",{children:Object(d.jsx)(x.a,{message:"revenue.dealStageChangeModal.heading"})}),Object(d.jsx)("h5",{children:t})]})}},{key:"render",value:function(){var e=this.props,t=e.subject,n=e.nextStageId,a=e.nextStageLabel;return Object(d.jsx)("div",{children:this.renderHeading(n,a,t)})}}]);return t}(l.Component);be.propTypes={nextStageLabel:p.a.string.isRequired,nextStageId:p.a.string.isRequired,subject:m.a.record.isRequired};var pe,je=be;function ke(e,t,n){var a=t.completed,i=Object(v.Set)(a).map(function(e){return e.name}).contains(e),r=Object(v.Set)(n).contains(e);return i||r}function fe(e,t){return!ke(X,e,t)}function ve(e,t){return!ke($,e,t)}function Oe(){return!0}var ye,ge=Object(v.Map)((pe={},Object(a.a)(pe,te,fe),Object(a.a)(pe,ee,ve),Object(a.a)(pe,J,Oe),pe));function he(e,t,n){if(ge.has(e)){return ge.get(e)(t,n)}return!1}var Se,Ne=Object(v.Map)((ye={},Object(a.a)(ye,$,ne),Object(a.a)(ye,ee,ne),Object(a.a)(ye,te,ne),ye));function Ce(e){return!!Ne.has(e)&&new Date<new Date(Ne.get(e))}function Te(e,t){if(t.has($)){var n=new v.Set(t.get($).split(";"));return e.get("options").filter(function(e){return n.has(e.get("value"))})}return new v.List}function Ie(e,t){if(t.get(J)){var n=new v.Set(t.get(J).split(","));return n?e.get("options").filter(function(e){return n.has(e.get("value"))}):e.get("options")}return new v.List}var xe=Object(v.Map)((Se={},Object(a.a)(Se,ee,Te),Object(a.a)(Se,Z,Ie),Se)),Fe=function(e,t){return e.has(J)&&xe.has(t)};function Ae(e,t){if(!Fe(t,e.name)&&e.name===Z)return e;if(xe.has(e.name)){var n=xe.get(e.name);return e.set("options",n(e,t))}return e}function De(e,t){if(!Fe(t,e.name))return!1;if(xe.has(e.name)){return 0===xe.get(e.name)(e,t).length}return!1}var Re,Pe=n("fFSu"),Ee=n("t6nY"),_e=n.n(Ee),we=n("Sx0/"),Le=n.n(we),qe=n("VHfn"),Me=n.n(qe),Ve=n("0fP3"),Ue=n("MQNR"),Be=n("SsHI"),He=n("FU4R"),Ke=n("D4Zn"),Ye=n("UAUf"),ze=n("dxYZ"),Qe=n("2RhA"),We=n("Sebf"),Ge=n("ywmj"),Je=n("B0Kw"),Ze=n("tPYf"),Xe={associatedcompanyid:!0,"associations.company":!0,hs_parent_company_id:!0,salesforcecampaignids:!0,"listMemberships.listId":!0,hs_analytics_first_touch_converting_campaign:!0,hs_analytics_last_touch_converting_campaign:!0},$e=Object(v.fromJS)((Re={},Object(a.a)(Re,Ue.VISIT,[Ye.d,Ye.e]),Object(a.a)(Re,Ue.CONTACT,[Ye.a,Ye.b]),Re)),et=function(e,t){return Object(We.d)(t.resolverType,e,t)},tt=function(e,t){return"associatedcompanyid"===e.name&&t===Ue.CONTACT||"hs_parent_company_id"===e.name&&t===Ue.COMPANY},nt=function(e,t){return t===Ue.DEAL&&"pipeline"===e.name},at=function(e,t){return t===Ue.DEAL&&"dealstage"===e.name},it=function(e){return"deal_currency_code"===e.name},rt=function(e,t){return t===Ue.TICKET&&"hs_pipeline"===e.name},ot=function(e,t){return t===Ue.TICKET&&"hs_pipeline_stage"===e.name},st=function(e){return e.hubspotDefined&&("hs_ticket_priority"===e.name||"hs_task_priority"===e.name||"hs_priority"===e.name)},ct=function(e,t){return t===Ue.CONTACT&&"email"===e.name},dt=function(e){return"primary_point_of_contact_email"===e.name},lt=function(e,t){return t===Ue.CONTACT&&"hs_persona"===e.name},ut=function(e){return["hubspot_owner_id","engagement.ownerId"].includes(e.name)||e.referencedObjectType===Be.OWNER},mt=function(e,t){return t===Ue.TASK&&"hs_timestamp"===e.name},bt=function(e,t){return t===Ue.TASK&&"hs_task_reminders"===e.name},pt=function(e,t){return t===Ue.TASK&&"hs_queue_membership_ids"===e.name},jt=function(e,t){return t===Ue.DEAL&&("createdate"===e.name||"closedate"===e.name)||t===Ue.TICKET&&("createdate"===e.name||"closed_date"===e.name)},kt=function(e){return"domain"===e.name},ft=_()(function(e,t,n){var a=$e.get(n);return!!a&&(a.includes(e.name)&&!!t&&Object(L.b)(t))}),vt=function(e,t){return t===Ue.CONTACT&&"hs_marketable_reason_id"===e.name},Ot=function(e){return!!["enumeration","bool"].includes(e.type)||!!Xe[e.name]},yt=function(e,t){return t===Ue.CONTACT&&["firstname","lastname"].includes(e.name)},gt=function(e){return"file_upload_"===e.name},ht=function(e){return"number"===e.get("type")},St=function(e,t,n,a,i,r){return nt(e,t)?{pipelineId:Object(ze.d)(a,"pipeline"),stageId:Object(ze.d)(a,"dealstage"),subject:a}:at(e,t)?{pipeline:Object(ze.d)(a,"pipeline")||h()("pipeline",a)}:rt(e,t)?{pipelineId:Object(ze.d)(a,"hs_pipeline"),stageId:Object(ze.d)(a,"hs_pipeline_stage"),subject:a}:ot(e,t)?{pipeline:Object(ze.d)(a,"hs_pipeline")||h()("hs_pipeline",a)}:n&&ct(e,t)?{additionalEmails:Object(ze.d)(a,"hs_additional_emails")||"",subject:a}:Object(Ke.b)(e)?{subjectCurrencyCode:Object(ze.d)(a,e.currencyPropertyName)||h()(e.currencyPropertyName,a)}:i||Object(Ke.n)(e)?{analyticsSource:Object(ze.d)(a,Ye.c),analyticsSourceData1:Object(ze.d)(a,Ye.a)}:n&&kt(e)&&t===Ue.COMPANY?{additionalDomains:r("hs_additional_domains"),subject:a}:null},Nt={actions:Object(u.mapOf)(p.a.object,p.a.string),autoFocus:p.a.bool,className:p.a.string,componentResolver:p.a.func,id:p.a.string,isInline:p.a.bool.isRequired,objectType:Ze.b.isRequired,onBlur:p.a.func,onChange:p.a.func,onFocus:p.a.func,onInvalidProperty:p.a.func,onKeyUp:p.a.func,onTracking:p.a.func,property:p.a.instanceOf(Qe.a).isRequired,propertyIndex:p.a.number,readOnly:p.a.bool,resolver:p.a.oneOfType([Ve.a,Object(u.mapOf)(Ve.a)]),resolverType:p.a.string,showError:p.a.bool,showPlaceholder:p.a.bool,subject:p.a.oneOfType([Ze.a,p.a.instanceOf(v.Map)]),subjectId:p.a.string,value:p.a.node,wrappers:Object(u.mapOf)(p.a.node,p.a.string),componentConfig:p.a.object},Ct={actions:Object(v.Map)(),isInline:!1,wrappers:Object(v.Map)()},Tt=["componentResolver","wrappers","onTracking","resolverType"],It=function(e){Object(c.a)(t,e);function t(){var e;Object(i.a)(this,t);(e=Object(o.a)(this,Object(s.a)(t).call(this))).inputRef=Object(l.createRef)();return e}Object(r.a)(t,[{key:"focus",value:function(){this.inputRef.current&&"function"==typeof this.inputRef.current.focus&&this.inputRef.current.focus()}},{key:"getComponent",value:function(){var e=this.props,t=e.objectType,n=e.property,a=e.subjectId;if(dt(n))return Ge.g;if("function"==typeof this.props.componentResolver){var i=this.props.componentResolver.call(this);if(i)return i}return Object(Ke.e)(n)?Ge.B:Object(Ke.d)(n)?Ge.f:Object(Ke.i)(n)?Ge.y:Object(Ke.a)(n,t)?Ge.C:Object(Ke.q)(n)?Ge.I:Object(Ke.b)(n)?Ge.m:Object(Ke.h)(n)?Ge.n:ht(n)?Ge.u:vt(n,t)?Ge.p:nt(n,t)?Ge.d:at(n,t)?Ge.x:it(n)?Ge.q:rt(n,t)?Ge.H:ot(n,t)?Ge.x:st(n)?Ge.z:ut(n)?Ge.v:lt(n,t)?Ge.w:mt(n,t)?Ge.D:bt(n,t)?Ge.G:pt(n,t)?Ge.F:ft(n,this.getValue(),t)?Ge.o:a&&ct(n,t)?Ge.s:this.getIsReadOnly()?gt(n)?Ge.l:Ge.A:Ot(n)&&Object(Ke.k)(n)?Ge.j:Ot(n)?Ge.i:ct(n,t)?Ge.h:tt(n,t)?Ge.a:a&&kt(n)&&t===Ue.COMPANY?Ge.r:kt(n)?Ge.e:jt(n,t)?Ge.b:Object(Ke.c)(n)?Ge.c:yt(n,t)?Ge.t:Ge.k}},{key:"getIsReadOnly",value:function(){return this.props.readOnly||Object(Ke.n)(this.props.property)}},{key:"getValue",value:function(){var e=this.props.property,t=this.props.value;"number"===e.type&&!Object(Ke.b)(e)&&t&&e.numberDisplayHint!==He.c&&(t=isNaN(Number(t))?N.a.parseNumber(t,{precision:5}):Number(t));return t}},{key:"render",value:function(){var e=this.props.wrappers.get(this.props.property.name),t=this.getComponent();e&&(t=e(t));var n=Me()(Tt,this.props);return Object(d.jsx)(t,Object.assign({},n,{actions:this.props.actions.get(this.props.property.name),autoFocus:this.props.autoFocus,className:_e()(this.props.className,this.props.isInline&&"isInline"),id:this.props.id,"data-field":this.props.property.name,objectType:this.props.objectType,onBlur:this.props.onBlur,onChange:this.props.onChange,onInvalidProperty:this.props.onInvalidProperty,onFocus:this.props.onFocus,onKeyUp:this.props.onKeyUp,propertyIndex:this.props.propertyIndex,showError:this.props.showError,value:this.getValue(),readOnly:this.getIsReadOnly(),ref:this.inputRef,"data-selenium-test":"property-input-"+this.props.property.name,onTracking:this.props.onTracking}))}}]);return t}(l.Component);It.propTypes=Nt;It.defaultProps=Ct;var xt=Object(l.memo)(It),Ft=Object(f.a)(et,xt,{forwardRef:!0}),At=Object(Je.a)(Object(We.b)(),Ft,{forwardRef:!0,mergeResolvers:!0}),Dt={property:p.a.instanceOf(Qe.a).isRequired,objectType:Ze.b.isRequired,subjectId:p.a.string,subject:p.a.oneOfType([Ze.a,p.a.instanceOf(v.Map)]),readOnly:p.a.bool,propertyDependencies:p.a.object,getSecondaryPropertyValue:p.a.func},Rt=Object(l.forwardRef)(function(e,t){var n=e.property,a=e.objectType,i=e.subjectId,r=e.subject,o=e.readOnly,s=e.propertyDependencies,c=e.getSecondaryPropertyValue,l=void 0===c?Le.a:c,u=Object(Pe.a)(e,["property","objectType","subjectId","subject","readOnly","propertyDependencies","getSecondaryPropertyValue"]),m=Object(We.c)(n,a,{isFromImport:Object(Ye.g)(r),isFromIntegration:Object(Ye.h)(r),isFromEmailMarketing:Object(Ye.f)(r)}),b=s;void 0===b&&(b=St(n,a,i,r,o,l));return Object(d.jsx)(At,Object.assign({ref:t,resolverType:m,property:n,objectType:a,subjectId:i,readOnly:o},u,{},b))});Rt.propTypes=Dt;var Pt=Object(l.memo)(Rt),Et=function(e){return null==e||0===(""+e).trim().length},_t="deals::sync_company_lifecyclestage",wt=function(e){return!0===e||"true"===e},Lt="hs_analytics_source_data_1",qt="hs_analytics_source_data_2",Mt=["primary_point_of_contact_email"],Vt=function(e){return Object(A.d)(e,Lt)===D.i},Ut=function(e){return Object(A.d)(e,Lt)===D.h&&!isNaN(Object(A.d)(e,qt))},Bt=function(e){Object(c.a)(t,e);function t(e){var n;Object(i.a)(this,t);(n=Object(o.a)(this,Object(s.a)(t).call(this,e))).getIsSaveDisabled=function(){var e=n.props.properties,t=n.state,a=t.draft,i=t.failedValidation,r=t.hasOnboardingGoals;return e.some(function(e){if(!e.get("required"))return!1;if(e.get("property")===Z&&!r)return!1;var t=a.get(e.get("property"));return Et(t)})||i};n.handleConfirm=function(){var e=n.state.draft.toJS(),t=Object.keys(e).reduce(function(t,i){return n.state.changedInSession.has(i)?Object.assign({},t,Object(a.a)({},i,e[i])):t},{}),i=n.shouldUpdateDealCloseDateOnSave(n.state.changedInSession.has("closedate"))?Object.assign({},t,{closedate:N.a.moment.userTz().valueOf()}):t;return n.props.onConfirm(i)};n.handleChange=function(e,t){var a=null!=t.target?t.target.value:void 0;a=F.d(e,a);n.setState(function(t){return{draft:t.draft.set(e.name,a),changedInSession:t.changedInSession.add(e.name),failedValidation:Mt.includes(e.name)}})};n.setPropertyValidState=function(e,t,a){"invalidEmail"===t&&Mt.includes(e)&&n.setState(function(){return{failedValidation:a}})};n.renderProperty=function(e){var t=n.props,a=t.nextProperties,i=t.objectType,r=t.resolvers,o=t.subject,s=t.subjectProperties,c=t.getPropertyInputResolver,l=n.state,u=l.changedInSession,m=l.draft,b=l.propertiesByType,p=s.get(e.get("property")),j=p.name;if(!p||he(j,b,u))return null;var f="dealstage"===j?{nextPipeline:a.get("pipeline")}:void 0,v=c(r,p,i,{isIntegration:Vt(o),isImport:Ut(o)}),O=Ae(p,m),y=!De(p,m)&&e.get("required");return Object(d.jsx)(K.a,{label:n.renderLabel(p,m),help:n.renderDescription(p,m),required:y,children:Object(d.jsx)(Pt,Object.assign({baseUrl:"/contacts/"+k.a.get()+"/contact/email/",readOnlySourceData:{isKnownGuid:L.b,getGuidLabel:L.a},objectType:i,property:O,resolver:v,value:m.get(j),onChange:n.partial(n.handleChange,p),subjectId:""+Object(A.a)(o),subject:o,onInvalidProperty:n.partial(n.setPropertyValidState,p.name),showError:!0,hasBlurred:!0,disabled:De(p,m)},f))},j)};n.partial=_()(P.a);if(!e.subject)return Object(o.a)(n);var r=e.properties.reduce(function(t,n){var a=n.get("property");if(t.has(a))return t;var i=e.nextProperties.get(a)||Object(A.d)(e.subject,a),r=e.prevStage&&e.prevStage.get("probability")&&+e.prevStage.get("probability"),o=e.nextStage.get("probability")&&+e.nextStage.get("probability");"closedate"===a&&[0,1].includes(o)&&r!==o&&(i=N.a.moment.userTz().valueOf());return t.set(a,i)},Object(v.Map)()),c=Object(v.List)(),l=Object(v.List)();e.properties.forEach(function(e){var t=r.get(e.get("property"));Et(t)?l=l.push(e):c=c.push(e)});var u=r.get(J);n.state={changedInSession:Object(v.Set)(),draft:r,hasOnboardingGoals:u,failedValidation:!1,propertiesByType:{completed:c,empty:l}};return n}Object(r.a)(t,[{key:"shouldUpdateDealCloseDateOnSave",value:function(e){if(e)return!1;var t=this.props.nextStage.get("probability")&&Number(this.props.nextStage.get("probability")),n=[0,1].includes(t),a=Number(h()("probability",this.props.prevStage));return!(!n||a===t)}},{key:"renderIsSyncedMessage",value:function(){var e=this.props,t=e.settings;return 1===e.nextProperties.get("probability")&&t&&wt(t.get(_t))?Object(d.jsx)("p",{children:Object(d.jsx)(T.a,{message:"revenue.dealClosedModal.syncMessage"})}):null}},{key:"renderLabel",value:function(e){var t=e.hubspotDefined?Object(q.b)(e.label):e.label;return Object(d.jsxs)("span",{children:[t,Ce(e.name)&&Object(d.jsx)(B.a,{use:"new",className:"m-left-1",children:Object(d.jsx)(T.a,{message:"revenue.StageChangeDialog.newBadgeLabel"})})]})}},{key:"renderDescription",value:function(e,t){return De(e,t)?N.a.text("dingSidebar.form.noGoalsExist"):e.description?Object(d.jsx)(V.a,{children:e.hubspotDefined?Object(q.a)(e.label,e.description):e.description}):""}},{key:"renderEmptyProperties",value:function(e){return y()(e)?null:Object(d.jsx)(H.a,{children:e.map(this.renderProperty)})}},{key:"renderCompletedProperties",value:function(e,t,n){return y()(e)?null:Object(d.jsx)(U.a,{className:"p-y-3",defaultOpen:y()(t)||ue(n),size:"small",title:Object(d.jsx)(x.a,{message:"revenue.StageChangeDialog.completedProperties"}),children:e.map(this.renderProperty)})}},{key:"render",value:function(){var e=this.props,t=e.nextStage,n=e.onReject,a=e.subject,i=this.state.propertiesByType,r=i.completed,o=i.empty,s=t.get("stageId");return Object(d.jsxs)(w.a,{confirmDisabled:this.getIsSaveDisabled(),onConfirm:this.handleConfirm,onReject:n,title:Object(d.jsx)("h3",{children:Object(d.jsx)(x.a,{message:ue(s)?"revenue.dealStageChangeModal.closedWon.title":"revenue.dealStageChangeModal.title"})}),children:[Object(d.jsx)(je,{nextStageId:s,nextStageLabel:t.get("label"),subject:a}),this.renderIsSyncedMessage(),this.renderEmptyProperties(o),this.renderCompletedProperties(r,o,s)]})}}]);return t}(l.Component);Bt.propTypes=Object.assign({getPropertyInputResolver:p.a.func.isRequired,prevStage:m.a.map,nextStage:m.a.map.isRequired,objectType:p.a.string.isRequired,prevProperties:m.a.map.isRequired,nextProperties:m.a.map.isRequired,properties:m.a.list.isRequired,PropertyInput:p.a.elementType.isRequired,subject:m.a.record.isRequired,subjectProperties:m.a.map.isRequired,settings:m.a.map.isRequired,getPropertyPermission:p.a.func.isRequired},M.a);t.a=Object(f.a)(function(e){return{resolvers:e}},Bt)},inIR:function(e,t,n){"use strict";n.d(t,"a",function(){return a});var a="association"},ioGg:function(e,t,n){"use strict";var a=n("MZef"),i=n("QYOI"),r=n("19qb"),o=n("6Djj"),s=function(e){var t=e.threadId;return o.a.get("messages/v3/threads/"+t)},c=n("fzi9"),d=n("Ktcs"),l=n("emzX"),u=n.n(l),m=n("8IxZ"),b=n("szyC"),p=n("kbdb"),j=n("OP22"),k=n("Pda3"),f=function(e){return"function"==typeof e},v=function(e){return"object"==typeof e&&!Array.isArray(e)},O=function(e){var t=e.requestFn,n=e.toRecordFn,r=void 0===n?i.fromJS:n,o=e.requestArgs,s=e.preloadedData,l=void 0===s?new a.a:s;u()(f(t),'createAsyncAction Expected requestFn to be a Function. Got: "'+t+'"');u()(f(r),'createAsyncAction expected toRecordFn to be a Function. Got: "'+r+'"');u()(!o||v(o),"requestArgs must be an Object. Received "+typeof o);Object(m.a)(l);var O=Object(d.useState)(l),y=Object(c.a)(O,2),g=y[0],h=y[1],S=Object(d.useCallback)(function(){l&&Object(k.e)(l)?h(l):t(o).then(function(e){h(Object(b.a)(function(){return r(e)},g))},function(e){h(Object(p.a)(e,g))}).done()},[o,t,g,r,l]),N=Object(j.a)({asyncData:g,fetcher:S}).retryFailed;return{asyncData:g,retryFailed:N}},y=n("+Q4j"),g=n("KXN9"),h=n("Q16b"),S=n("/N35"),N=n("VToG");n.d(t,"a",function(){return C});var C=function(e){var t=e.threadId,n=Object(r.useSelector)(function(e){return Object(h.a)(e,{threadId:t})}),o=n&&Object(S.z)(n)&&new a.a({data:n,status:N.d}),c=O({requestFn:s,toRecordFn:i.fromJS,requestArgs:{threadId:t},preloadedData:o}).asyncData,d=Object(g.a)(c);return{isLiveChat:Object(S.z)(d)===y.LIVE_CHAT,source:Object(S.z)(d)}}},iu95:function(e,t,n){"use strict";var a=n("fFSu"),i=n("MyjV"),r=n("3W4S"),o={id:"8300da235538040923baa35f6cd03288c6f7131475ff900c736591145dd6f607",kind:"Document",definitions:function(e){var t={};return e.filter(function(e){if("FragmentDefinition"!==e.kind)return!0;var n=e.name.value;if(t[n])return!1;t[n]=!0;return!0})}([{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"fetchObjectProperties"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"objectType"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"objectId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Long"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"propertyNames"}},type:{kind:"NonNullType",type:{kind:"ListType",type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"crmObject"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"objectId"}}},{kind:"Argument",name:{kind:"Name",value:"type"},value:{kind:"Variable",name:{kind:"Name",value:"objectType"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"properties"},arguments:[{kind:"Argument",name:{kind:"Name",value:"names"},value:{kind:"Variable",name:{kind:"Name",value:"propertyNames"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"FragmentSpread",name:{kind:"Name",value:"PropertyValueFields"}}]}}]}}]}}].concat(r.a.definitions))};n.d(t,"a",function(){return s});var s=function(e){var t=e.objectType,n=e.objectId,r=e.propertyNames,s=e.onError,c=Object(i.useQuery)(o,{variables:{objectType:t,objectId:n,propertyNames:r},onError:s,fetchPolicy:"network-only"}),d=c.data,l=Object(a.a)(c,["data"]);return Object.assign({properties:d&&d.crmObject?d.crmObject.properties:null},l)}},"j/PO":function(e,t){e.exports={zorseTicketSearchInteraction:{name:"Zorse ticket search interaction",class:"interaction",namespace:"zorse-ticket-search",version:"1",properties:{action:"string",payload:{type:"string",isOptional:!0},source:{type:"string",isOptional:!0},state:{type:["initiated","succeeded"],isOptional:!0}}},zorseTicketSearchUsage:{name:"Zorse ticket search usage",class:"usage",namespace:"zorse-ticket-search",version:"1",properties:{action:"string",payload:{type:"string",isOptional:!0},source:{type:"string",isOptional:!0},state:{type:["initiated","succeeded"],isOptional:!0}}}}},jklr:function(e,t,n){"use strict";n.r(t);var a=n("fFSu"),i=n("QgEn"),r=n("Ktcs"),o=n("eVil"),s=n.n(o),c=n("VfuR"),d=n.n(c),l=n("19qb"),u=n("Pda3"),m=n("KXN9"),b=n("/N35"),p=n("UxsU"),j=n("G2pp"),k=n("H6Ig"),f=n("GEiH"),v=n("fogE"),O=n("LwoF"),y=n("EvX1"),g=n.n(y),h=n("eiRy"),S=Object(f.a)({requestFn:O.e,actionTypes:h.d,toRecordFn:g.a,failureMetaActionCreator:v.a}),N=n("zCvm"),C=n("vTCD"),T=n("k8Et"),I=n("mNyx"),x=n("txVw"),F=n("pGTB"),A=n("eP/i"),D=n("9f1P"),R=n.n(D),P=n("DqRu"),E=n("CUpT"),_=n("3Yd4"),w=n("mDbF"),L=n.n(w),q=n("jqvl"),M=n.n(q),V=n("WJiN"),U=n("+O8Q"),B=n("om9w"),H=R()(_.a).withConfig({displayName:"ContactSidebarAsyncError__Icon",componentId:"sc-9y68c1-0"})(["width:30px;text-align:center;"]),K=R.a.div.withConfig({displayName:"ContactSidebarAsyncError__Wrapper",componentId:"sc-9y68c1-1"})(["height:100%;background-color:",";position:absolute;right:0;width:","px;overflow-y:auto;"],A.OLAF,U.d),Y=R.a.div.withConfig({displayName:"ContactSidebarAsyncError__PaddingWrapper",componentId:"sc-9y68c1-2"})(["padding:0 20px;display:flex;align-items:center;flex-direction:column;flex-grow:1;flex-shrink:0;flex-basis:100%;"]),z=function(e){Object(F.a)(t,e);function t(){Object(C.a)(this,t);return Object(I.a)(this,Object(x.a)(t).apply(this,arguments))}Object(T.a)(t,[{key:"renderCollapsedContent",value:function(){return Object(i.jsx)(H,{name:"warning"})}},{key:"render",value:function(){var e=this.props,t=e.collapsed,n=e.isLocked,a=e.toggleSidebar,r=e.retry;return Object(i.jsxs)(K,{children:[Object(i.jsx)(V.a,{alignment:U.k.RIGHT,isLocked:n,collapsed:t,onClick:a,children:t?this.renderCollapsedContent():null}),Object(i.jsx)(B.a,{hide:this.props.collapsed,children:Object(i.jsx)(Y,{children:Object(i.jsxs)(E.a,{title:L.a.text("conversations-inbox-ui.contactLoadingError.title"),illustrationProps:{width:"100"},children:[Object(i.jsx)("p",{children:Object(i.jsx)(M.a,{message:"conversations-inbox-ui.contactLoadingError.message"})}),Object(i.jsx)(P.a,{use:"tertiary",size:"xs",onClick:r,children:Object(i.jsx)(M.a,{message:"conversations-inbox-ui.contactLoadingError.retryButtonLabel"})})]})})})]})}}]);return t}(r.PureComponent);z.propTypes={retry:d.a.func.isRequired};var Q,W=n("mKxs"),G=n("MQNR"),J=n("KP7b"),Z=n("+Q4j"),X=n("s+AV"),$=n("4TVJ"),ee=n("ZFBm"),te=n("KlJG"),ne=n("fzi9"),ae=n("OwGx"),ie="contactPrompt",re="dealPrompt",oe="ticketPrompt",se="disassociatePrompt",ce="blockThreadPrompt",de=function(e,t){var n=t.prompt,a=t.value;return Object.assign({},e,Object(ae.a)({},n,a))},le=(Q={},Object(ae.a)(Q,ie,!1),Object(ae.a)(Q,re,!1),Object(ae.a)(Q,oe,!1),Object(ae.a)(Q,se,!1),Object(ae.a)(Q,ce,!1),Q),ue=function(){var e=Object(r.useReducer)(de,le),t=Object(ne.a)(e,2),n=t[0],a=t[1];return{promptStatus:n,openPrompt:function(e){return a({prompt:e,value:!0})},closePrompt:function(e){return a({prompt:e,value:!1})}}},me=n("os+u"),be=n.n(me),pe=n("bCAt"),je=n("nDpY"),ke=n.n(je),fe={create:"oc",associate:"ASSOCIATE_PANEL_EVENT"},ve=1,Oe=function(e){var t="create"===e?"creator":"associator";try{return"true"===localStorage.getItem("CRM:object-"+t+":local")}catch(e){return!1}},ye=function(){return window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:"")},ge=function(){return window.origin||ye()},he=function(e){return e.replace("app","local")},Se=function(e){return e.replace("local","app")},Ne=function(e){return Se(ge())===Se(e)},Ce=function(e,t){var n=e.type,a=e.version;return n===fe[t]&&a>0&&a<=ve},Te=function(){var e=ge();return Oe()?he(e):Se(e)},Ie=function(e,t){return Object.assign({},e,{type:fe[t],version:ve})},xe=function(e,t){var n=e.origin,a=e.data;return Ne(n)&&Ce(a,t)},Fe=function(e){return Te()+"/embed/"+ke.a.get()+"/object/"+e},Ae=n("Zwtj"),De=n("aeBh"),Re=n("Q6fd"),Pe=n("2IIJ"),Ee=n("QYOI"),_e=Object(Ee.Record)({objectType:null,objectId:null},"ObjectCreatorAssociation"),we=Object(Ee.Record)({name:"",hubspot_owner_id:null},"CompanyCreatorProperties"),Le=Object(Ee.Record)({associatedcompanyid:"",associatedcontactid:"",hubspot_owner_id:null},"DealCreatorProperties"),qe=Object(Ee.Record)({firstname:"",lastname:"",email:"",hubspot_owner_id:null},"ContactCreatorProperties"),Me=Object(Ee.Record)({associatedcompanyid:"",associatedcontactid:"",content:"",hs_conversations_originating_thread_id:null,hubspot_owner_id:null,source_type:"",subject:""},"TicketCreatorProperties"),Ve=Object(Ee.Record)({object:null,error:null,createAnother:!1},"ObjectCreatorResult"),Ue=n("Uh/y"),Be=n("aJmV"),He=n("n+BK"),Ke=n("r1tY"),Ye=n.n(Ke),ze=n("Fse9"),Qe=R.a.iframe.withConfig({displayName:"ModalFrame__Frame",componentId:"gywkvs-0"})(["display:",";top:","px;height:100%;width:100%;border:0;position:absolute;z-index:9999999;"],function(e){return e.frameReady?void 0:"none"},function(e){return e.scrollTop});function We(e){var t=e.src,n=e.onMessage,a=e.renderLoadingModal,o=e.setLoadFrame,s=e.id,c=Object(r.useRef)(null),d=Object(r.useRef)(0),l=Object(ze.c)(),u=Object(ne.a)(l,2),m=u[0],b=m.frameReady,p=m.showParentModal,j=m.frameDimensions,k=u[1];Object(r.useEffect)(function(){var e=function(e){if(Object(He.f)(c,e)){Object(He.d)(e,"FRAME_READY")&&(d.current=document.documentElement.scrollTop);Object(He.d)(e,"CLOSE_FRAME")&&o(!1);Object(He.d)(e,"RELOAD_PARENT")&&window.location.reload(!0);"string"==typeof e.data&&ze.a.includes(e.data)?k({type:e.data}):"object"==typeof e.data&&ze.a.includes(e.data.type)&&k({type:e.data.type,payload:Object.assign({},e.data.dimensions,{},e.data.data)});n&&n(e)}};window.addEventListener("message",e);return function(){window.removeEventListener("message",e)}},[n,k,o]);return Object(i.jsxs)(r.Fragment,{children:[a&&a({frameReady:b,modalWidth:j.width,modalHeight:j.height,showParentModal:p,wrapContentSize:!0}),Object(i.jsx)(Qe,{id:s,src:t,ref:c,frameReady:b,scrollTop:d.current})]})}var Ge=We;function Je(e){var t=e.src,n=e.onMessage,a=e.renderLoadingModal,o=e.id,s=Object(r.useRef)(document.createElement("div")),c=Object(r.useState)(!1),d=Object(ne.a)(c,2),l=d[0],u=d[1];Object(r.useEffect)(function(){if(l){var e=s.current;document.body.appendChild(e);Ye.a.render(Object(i.jsx)(Ge,{id:o,setLoadFrame:u,src:t,onMessage:n,renderLoadingModal:a}),e);return function(){Ye.a.unmountComponentAtNode(e);document.body.removeChild(e)}}return function(){}},[t,l,n,a,o]);return{setLoadFrame:u}}var Ze,Xe=n("zsrv");!function(e){e.OPEN_MODAL="__ui_addon_upgrades_OPEN_MODAL"}(Ze||(Ze={}));function $e(e){var t=Object(He.a)(e),n=Object(He.c)(e),a=Je({id:"ui-addon-upgrade-modal-frame",src:t,renderLoadingModal:Xe.a}).setLoadFrame;Object(r.useEffect)(function(){n.then(function(t){if(t&&!He.e[e]){He.e[e]=!0;Be.c.track("interaction",Object.assign({action:"viewed upgrade point"},Object(He.b)(t)))}})},[e,n]);return{openUpgradeModal:Object(r.useCallback)(function(){if(window.self!==window.top)window.top.postMessage({modalKey:e,event:Ze.OPEN_MODAL},"*");else{a(!0);n.then(function(e){e&&Be.c.track("interaction",Object.assign({action:"clicked upgrade point"},Object(He.b)(e)))})}},[a,e,n])}}var et,tt=function(){var e=Object(r.useState)({inner:""}),t=Object(ne.a)(e,2),n=t[0],a=t[1],i=$e(n.inner).openUpgradeModal;Object(r.useEffect)(function(){var e=function(e){var t=e.data,n=t.modalKey;switch(t.event){case Ze.OPEN_MODAL:a({inner:n})}};window.addEventListener("message",e);return function(){return window.removeEventListener("message",e)}},[]);Object(r.useEffect)(function(){n.inner&&i()},[n,i])},nt=function(){tt();return null},at=Object.assign({association:d.a.instanceOf(_e).isRequired,objectType:d.a.oneOf([G.CONTACT,G.COMPANY,G.DEAL,G.TICKET]).isRequired,properties:d.a.oneOfType([d.a.instanceOf(we),d.a.instanceOf(qe),d.a.instanceOf(Le),d.a.instanceOf(Me),Object(me.mapOf)(d.a.any,d.a.string)]).isRequired,sourceApp:d.a.string.isRequired,shouldDefaultOwnerId:d.a.bool,shouldRenderConfirmAndAddButton:d.a.bool,use:d.a.oneOf(["sidebar","panel"]),via:d.a.string},pe.a),it={association:_e(),shouldDefaultOwnerId:!0,use:"panel"},rt=(et={},Object(ae.a)(et,G.COMPANY,Ae.a),Object(ae.a)(et,G.CONTACT,De.a),Object(ae.a)(et,G.DEAL,Re.a),Object(ae.a)(et,G.TICKET,Pe.a),et),ot=600,st=function(e){Object(F.a)(t,e);function t(){var e;Object(C.a)(this,t);(e=Object(I.a)(this,Object(x.a)(t).call(this))).handleReceiveMessage=function(t){xe(t,"create")&&(t.data.ready?e.processCreatorReady():e.processCreatorResult(t.data))};e.iframe=null;return e}Object(T.a)(t,[{key:"UNSAFE_componentWillMount",value:function(){window.addEventListener("message",this.handleReceiveMessage,!1)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("message",this.handleReceiveMessage)}},{key:"createParams",value:function(){var e=this.props,t=e.association,n=e.objectType,a=e.properties,i=e.shouldDefaultOwnerId,r=e.shouldRenderConfirmAndAddButton,o=e.sourceApp,s=e.via;return Ie({association:t.toJS(),objectType:n,properties:a.toJS(),shouldDefaultOwnerId:i,shouldRenderConfirmAndAddButton:r,sourceApp:o,via:s},"create")}},{key:"createObjectRecord",value:function(e){return rt[this.props.objectType].fromJS(e)}},{key:"processCreatorReady",value:function(){this.iframe.contentWindow.postMessage(this.createParams(),Te())}},{key:"processCreatorResult",value:function(e){var t=this.props,n=t.onConfirm,a=t.onReject,i=e.close,r=e.createAnother,o=e.error,s=e.object;i?a():o&&!s?a(o):n(Ve({object:this.createObjectRecord(s),error:o,createAnother:r}))}},{key:"renderIframe",value:function(){var e=this;return Object(i.jsx)("iframe",{"data-selenium-test":"object-creator-dialog",className:"flex-grow-1",frameBorder:0,ref:function(t){e.iframe=t},scrolling:"no",src:Fe("create")})}},{key:"render",value:function(){var e=this.props.use;return Object(i.jsxs)(Ue.a,{includeFooter:!1,showCloseButton:!1,use:e,width:ot,className:"EmbeddedObjectCreatorDialog-"+e+" p-all-0",bodyClassName:"p-all-0 display-flex",children:[Object(i.jsx)(nt,{}),this.renderIframe()]})}}]);return t}(r.Component);st.propTypes=at;st.defaultProps=it;var ct,dt,lt=st,ut=n("Q16b"),mt=n("0jxi"),bt=n("6Djj"),pt=n("+LtA"),jt=n("tyhE"),kt=n("0IK8"),ft=n("aitF"),vt=n.n(ft),Ot=n("iPDb"),yt=n("C3IS"),gt=n("/OK6"),ht=vt()(function(e){return Object(Ot.a)(e).find(function(e){return Object(yt.c)(e)&&Object(gt.b)(e)})}),St=function(e,t){if(e===jt.a.EMAIL){var n=ht(t);return n?Object(kt.G)(n):""}return""},Nt=function(e,t){if(e===jt.a.EMAIL){var n=ht(t);return n?Object(kt.v)(n):""}return""},Ct=function(e){switch(e){case Z.LIVE_CHAT:return"CHAT";default:return e}},Tt=function(e){var t=e.threadId;return bt.a.get("messages/v3/threads/"+t)},It=function(e){var t=e.threadId;return bt.a.get("messages/v3/history/"+t+"/agent",{query:{limit:2,sortDirection:"ASCENDING"}})},xt=function(e){var t=e.threadId;return Promise.all([Tt({threadId:t}),It({threadId:t})]).then(function(e){var t=Object(ne.a)(e,2),n=t[0],a=t[1],i=Object(b.z)(n),r=new pt.a(a);return{source:Ct(i),ticketContent:Nt(i,r),ticketSubject:St(i,r)}})},Ft=Object(f.a)({requestFn:xt,actionTypes:h.f,toRecordFn:function(e){return e},failureMetaActionCreator:v.a}),At=n("MBJP"),Dt=n("x1JE"),Rt=n("omic"),Pt=n.n(Rt),Et=n("4rzL"),_t=Pt()(Et.d),wt=function(e,t){return t.threadId},Lt=Object(At.a)([_t,wt],function(e,t){return Object(Dt.b)(t,e)}),qt=function(e){var t=e.threadId,n=Object(mt.a)({action:Ft,selector:Lt,id:t,idTransform:function(e){return{threadId:e}}});return{asyncTicketData:n.asyncData,retryFailed:n.retryFailed}},Mt=n("Iie8"),Vt=n.n(Mt),Ut=n("8QMF"),Bt=n.n(Ut),Ht=n("0SHK"),Kt=n("2RhA"),Yt=n("P1Hv"),zt=Object(Kt.a)({displayOrder:-1,externalOptions:!0,favoritedOrder:-1,fieldType:Ht.i,formField:!1,groupName:"dealinformation",hubspotDefined:!0,label:"Associated company",mutableDefinitionNotDeletable:!0,name:"associations.company",readOnlyDefinition:!0,readOnlyValue:!0,type:Yt.NUMBER}),Qt=Object(Kt.a)({displayOrder:-1,externalOptions:!0,favoritedOrder:-1,fieldType:Ht.i,formField:!1,groupName:"dealinformation",hubspotDefined:!0,label:"Associated contact",mutableDefinitionNotDeletable:!0,name:"associations.contact",readOnlyDefinition:!0,readOnlyValue:!0,type:Yt.NUMBER}),Wt=Object(Kt.a)({displayOrder:-1,externalOptions:!0,favoritedOrder:-1,fieldType:Ht.f,formField:!0,groupName:"contactinformation",hidden:!1,hubspotDefined:!0,label:"Form submission",name:"formSubmissions.formId",readOnlyDefinition:!0,readOnlyValue:!0,type:Yt.ENUMERATION}),Gt=n("SsHI"),Jt=Object(Kt.a)({displayOrder:-1,externalOptions:!0,favoritedOrder:-1,fieldType:Ht.f,formField:!0,groupName:"contactinformation",hidden:!1,hubspotDefined:!0,label:"Import",name:"_inbounddbio.importid_",readOnlyDefinition:!0,readOnlyValue:!0,referencedObjectType:Gt.INBOUND_DB_IMPORT,type:Yt.ENUMERATION}),Zt=Object(Kt.a)({displayOrder:-1,externalOptions:!0,favoritedOrder:-1,fieldType:Ht.f,groupName:"contactinformation",hubspotDefined:!0,label:"List membership",name:"listMemberships.listId",readOnlyDefinition:!0,readOnlyValue:!0,type:Yt.ENUMERATION}),Xt=Object(Kt.a)({displayOrder:-1,externalOptions:!0,favoritedOrder:-1,fieldType:Ht.f,groupName:"listmembership",hubspotDefined:!0,label:"List membership",name:"ilsListMemberships.listId",readOnlyDefinition:!0,readOnlyValue:!0,referencedObjectType:Gt.INBOUND_DB_LIST,type:Yt.ENUMERATION}),$t=Object(Kt.a)({displayOrder:-1,externalOptions:!0,favoritedOrder:-1,fieldType:Ht.h,formField:!1,groupName:"task",hubspotDefined:!0,label:"Associated with",mutableDefinitionNotDeletable:!0,name:"relatesTo",readOnlyDefinition:!0,readOnlyValue:!0,type:Ht.h}),en=n("h/hJ"),tn=n("8ctk"),nn=n.n(tn),an=n("xHov"),rn=n("McTk"),on=n.n(rn),sn=n("pPiP"),cn=n.n(sn),dn=n("U0V+"),ln=n.n(dn),un=n("emzX"),mn=n.n(un),bn=n("8qhJ"),pn=n.n(bn),jn=n("Sz0g"),kn=n("V36O"),fn=n.n(kn),vn=Object(Kt.a)({displayOrder:-1,externalOptions:!0,favoritedOrder:-1,fieldType:Ht.e,formField:!0,groupName:"dealinformation",hidden:!1,hubspotDefined:!0,label:"Deal Stage Probability",name:"dealstage.probability",readOnlyDefinition:!0,readOnlyValue:!0,type:Yt.NUMBER}),On=n("eUxV");ct={},Object(ae.a)(ct,G.COMPANY,"properties/v2/company/properties"),Object(ae.a)(ct,G.CONTACT,"properties/v2/contact/properties"),Object(ae.a)(ct,G.DEAL,"properties/v2/deal/properties"),Object(ae.a)(ct,G.TICKET,"properties/v2/ticket/properties");pn()(Kt.a.savableFields);var yn=(dt={},Object(ae.a)(dt,G.COMPANY,"properties/v2/company/groups"),Object(ae.a)(dt,G.CONTACT,"properties/v2/contact/groups"),Object(ae.a)(dt,G.DEAL,"properties/v2/deal/groups"),Object(ae.a)(dt,G.TICKET,"properties/v2/ticket/groups"),Object(ae.a)(dt,G.PRODUCT,"properties/v2/product/groups"),Object(ae.a)(dt,G.LINE_ITEM,"properties/v2/line_item/groups"),dt);function gn(e){if(Object(On.p)(e))return"properties/v2/"+e+"/groups";mn()(Object.prototype.hasOwnProperty.call(yn,e),"no API is defined for objectTypeOrId `%s`",e);return yn[e]}function hn(e){var t=Object(Ee.Map)(e.reduce(function(e,t){var n=t.properties.map(function(e){return e.name});e[t.name]=jn.a.fromJS(Object.assign({},t,{properties:n}));return e},{})),n=Object(Ee.Map)(e.reduce(function(e,t){return(t.properties||Object(Ee.List)()).reduce(function(e,t){e[t.name]=Kt.a.fromJS(t);return e},e)},{}));return Object(Ee.Map)({groups:t,properties:n})}function Sn(e){return e.toJS?Object(Ee.Map)({groups:e.reduce(function(e,t){return e.set(t.get("name"),jn.a.fromJS(t.set("properties",ln()("name",t.get("properties"))).toJS()))},Object(Ee.Map)()),properties:e.reduce(function(e,t){return(t.get("properties")||Object(Ee.List)()).reduce(function(e,t){return e.set(t.get("name"),Kt.a.fromJS(t.toJS()))},e)},Object(Ee.Map)())}):hn(e)}var Nn=Ee.Set.of("address1","address2","dnsresolves","email","latitude","longitude","numcontacts","organization"),Cn=Bt()(fn.a,nn()(function(e){var t=e.name;return Nn.contains(t)}),on()(Pt()(["name"]))),Tn="prospects";function In(e){var t=Cn(e);return Object(Ee.Map)({groups:Object(Ee.Map)(Object(ae.a)({},Tn,Object(jn.a)({displayName:"Prospect properties",displayOrder:0,name:Tn,properties:t.keySeq().toList()}))),properties:t.map(function(e){return Kt.a.fromJS(Object.assign({},e,{groupName:Tn,isBidenProperty:!0,readOnlyValue:!0}))}).toMap()})}var xn="engagement";function Fn(e){var t=Object(en.d)(G.ENGAGEMENT,e.map(Kt.a.fromJS));return Object(Ee.Map)({groups:Object(Ee.Map)(Object(ae.a)({},xn,Object(jn.a)({displayName:"Engagements",displayOrder:0,hubspotDefined:!0,name:xn,properties:t.keySeq().toList()}))),properties:t})}var An="task";function Dn(e){var t=Object(en.d)(G.TASK,e.map(Kt.a.fromJS));return Object(Ee.Map)({groups:Object(Ee.Map)(Object(ae.a)({},An,Object(jn.a)({displayName:"Tasks",displayOrder:0,hubspotDefined:!0,name:An,properties:t.keySeq().toList()}))),properties:t})}var Rn="companyVisits";function Pn(e){var t=Cn(e);return Object(Ee.Map)({groups:Object(Ee.Map)(Object(ae.a)({},Rn,Object(jn.a)({displayName:"Visit properties",displayOrder:1,name:Rn,properties:t.keySeq().toList()}))),properties:t.map(function(e){return Kt.a.fromJS(Object.assign({},e,{groupName:Rn,isBidenProperty:!0,readOnlyValue:!0}))}).toMap()})}function En(e){var t;if(!e.hasIn(["groups",An])&&!e.hasIn(["groups",xn]))return e;t=e.hasIn(["groups",An])?["groups",An,"properties"]:["groups",xn,"properties"];return e.setIn(t,e.getIn(t).push($t.name)).setIn(["properties",$t.name],$t)}function _n(e,t){if(!t.hasIn(["groups",e]))return t;var n=["groups",e,"properties"];return t.setIn(n,t.getIn(n).push(zt.name)).setIn(["properties",zt.name],zt)}function wn(e,t){if(!t.hasIn(["groups",e]))return t;var n=["groups",e,"properties"];return t.setIn(n,t.getIn(n).push(Qt.name)).setIn(["properties",Qt.name],Qt)}function Ln(e){if(!e.hasIn(["groups","dealinformation"]))return e;var t=["groups","dealinformation","properties"];return e.setIn(t,e.getIn(t).push(vn.name)).setIn(["properties",vn.name],vn)}function qn(e){if(!e.hasIn(["groups","contactinformation"]))return Promise.resolve(e);var t=["groups","contactinformation","properties"];return Promise.resolve(e.setIn(t,e.getIn(t).push(Wt.name)).setIn(["properties",Wt.name],Wt))}function Mn(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"contactinformation",t=arguments.length>1?arguments[1]:void 0;if(!t.hasIn(["groups",e]))return Promise.resolve(t);var n=["groups",e,"properties"];return Promise.resolve(t.setIn(n,t.getIn(n).push(Jt.name)).setIn(["properties",Jt.name],Jt))}function Vn(e){if(!e.hasIn(["groups","contactinformation"]))return Promise.resolve(e);var t=["groups","contactinformation","properties"];return Promise.resolve(e.setIn(t,e.getIn(t).push(Zt.name)).setIn(["properties",Zt.name],Zt))}function Un(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"contactinformation",t=arguments.length>1?arguments[1]:void 0;if(!t.hasIn(["groups",e]))return Promise.resolve(t);var n=["groups",e,"properties"];return Promise.resolve(t.setIn(n,t.getIn(n).push(Xt.name)).setIn(["properties",Xt.name],Xt))}function Bn(e){if(!e.hasIn(["groups","ticketinformation"]))return Promise.resolve(e);var t=e.getIn(["properties","hs_pipeline"]).set("hidden",!1),n=e.getIn(["properties","hs_pipeline_stage"]).set("hidden",!1);return Promise.resolve(e.setIn(["properties","hs_pipeline"],t).setIn(["properties","hs_pipeline_stage"],n))}function Hn(e){var t=e.objectType;return an.c("properties/v2/engagements/properties",{},t===G.TASK?Dn:Fn).then(function(e){return En(e)})}function Kn(e){var t=e.objectType;if(t===G.TASK||t===G.ENGAGEMENT)return Hn({objectType:t});if(t===G.VISIT)return Promise.all([an.c("biden/v1/properties",{},In),an.c("companyprospects/v1/prospects/search/properties",{},Pn)]).then(function(e){var t=Object(ne.a)(e,2),n=t[0],a=t[1];return n.mergeDeep(a)});var n=an.c(gn(t),{includeProperties:!0},Sn);return t===G.COMPANY?n.then(cn()(Mn,"companyinformation")).then(cn()(Un,"companyinformation")):t===G.CONTACT?n.then(qn).then(cn()(Mn,"contactinformation")).then(Vn).then(cn()(Un,"contactinformation")):t===G.DEAL?n.then(cn()(_n,"dealinformation")).then(cn()(wn,"dealinformation")).then(cn()(Mn,"dealinformation")).then(cn()(Un,"dealinformation")).then(Ln):t===G.TICKET?n.then(cn()(_n,"ticketinformation")).then(cn()(wn,"ticketinformation")).then(Bn).then(cn()(Un,"ticketinformation")):n}var Yn=Object(f.a)({requestFn:Kn,toRecordFn:function(e){return e},actionTypes:h.g,failureMetaActionCreator:v.a}),zn=Pt()(Et.e),Qn=Bt()(m.a,Pt()(["properties","source_type","options"]),Vt()(Pt()(["value"]))),Wn=function(){var e=Object(mt.a)({action:Yn,selector:zn,id:G.TICKET,idTransform:function(e){return{objectType:e}}}),t=e.asyncData;return{asyncTicketSources:t,retryFailed:e.retryFailed,validSourceTypes:Object(u.e)(t)?Qn(t):null}},Gn=function(e){var t=e.userId;return Object(O.d)(t)},Jn=Object(f.a)({requestFn:Gn,actionTypes:h.e,toRecordFn:g.a,failureMetaActionCreator:v.a}),Zn=Pt()(Et.c),Xn=function(e,t){return t.userId},$n=Object(At.a)([Zn,Xn],function(e,t){return Object(Dt.b)(t,e)}),ea=function(e){var t=e.userId,n=Object(mt.a)({action:Jn,selector:$n,id:t,idTransform:function(e){return{userId:e}}}).asyncData;return{ownerId:Object(m.a)(n)}},ta=n("whis"),na=function(e){var t=e.contact,n=e.threadId,a=Object(l.useSelector)(ta.a),i=Object(l.useSelector)(function(e){return Object(ut.a)(e,{threadId:n})}),r=Object(b.e)(i),o=ea({userId:r||a}).ownerId,c=qt({threadId:n}).asyncTicketData,d=Wn().validSourceTypes;if(!n||!d)return Me();var u=Object(te.c)(t),p=s()("source",Object(m.a)(c)),j=s()("ticketContent",Object(m.a)(c)),k=s()("ticketSubject",Object(m.a)(c));return Me({associatedcompanyid:u?""+u:"",content:j,subject:k,source_type:d&&d.includes(p)?p:"",hs_conversations_originating_thread_id:n,hubspot_owner_id:r?o:null})},aa=n("kPoh"),ia=n("uuST"),ra=function(e){var t=e.contact,n=e.onConfirm,a=e.onReject,r=e.threadId,o=Object(ia.a)(t)?_e({objectType:G.CONTACT,objectId:Object(te.l)(t)}):void 0,s=na({contact:t,threadId:r});return Object(i.jsx)(lt,{association:o,objectType:G.TICKET,onConfirm:n,onReject:a,properties:s,sourceApp:aa.a,shouldDefaultOwnerId:!1,shouldRenderConfirmAndAddButton:!1})},oa=function(e){var t=e.contact,n=e.onConfirm,a=e.onReject,r=Object(ia.a)(t)?_e({objectType:G.CONTACT,objectId:Object(te.l)(t)}):void 0,o=Object(te.c)(t),s=Le({associatedcompanyid:o?""+o:""});return Object(i.jsx)(lt,{association:r,objectType:G.DEAL,onConfirm:n,onReject:a,properties:s,sourceApp:aa.a})},sa=n("Ubk/"),ca=n("dIqZ"),da=n("4plp"),la=s()("contacts"),ua=(Object(At.a)(la,m.a),Object(At.a)(la,m.c),n("J8zT")),ma=n("IqVT"),ba=n("ByB/"),pa=Object(ma.createAction)(ua.a.UNINITIALIZED),ja=Object(f.a)({requestFn:ba.a,actionTypes:ua.a,toRecordFn:function(e){return e}}),ka=n("3JiJ"),fa=n("iJaT"),va=n("WLqE"),Oa=n("GBWN"),ya=n("Sshb"),ga=n("Ryvg"),ha=n("BiPx"),Sa=n("V4AE"),Na=n("lS0L"),Ca=n("uzdC"),Ta=n("l52g"),Ia=n("kZyb"),xa=n("QhRM"),Fa=n("LdnN"),Aa=n("yYAF");function Da(e){return Object(Aa.getFullUrl)("app")+"/contacts/"+ke.a.get()+"/contact/"+e}var Ra=n("37ae"),Pa=n.n(Ra),Ea=n("P4dz");function _a(e){if(!e)return null;var t=Object(Ea.d)(e,"firstname"),n=Object(Ea.d)(e,"lastname");return Pa()({firstName:t,lastName:n})||Object(Ea.d)(e,"email")}function wa(e,t){return _a(e)||t}var La=function(e){return wa(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:L.a.text("conversations-inbox-ui.default.contactName"))},qa=n("YM6t"),Ma=n("UMxk"),Va=n("lfVx"),Ua=function(e){var t=e.promptName,n=e.trackingEventParams,a=void 0===n?Va.m:n;return function(e){var n,o;if(!t){console.error("TrackedPrompt requires that { promptName: `string` } be set in the first argurment");return null}if("function"!=typeof a&&"object"!=typeof a){console.error("TrackedPrompt requires that { trackingEventParams } be set to an object or function");return null}return o=n=function(n){Object(F.a)(r,n);Object(T.a)(r,null,[{key:"propTypes",get:function(){return{ctaConfirmAction:d.a.oneOfType([d.a.string,d.a.func]),ctaRejectAction:d.a.oneOfType([d.a.string,d.a.func]),onConfirm:d.a.func.isRequired,onReject:d.a.func.isRequired}}},{key:"defaultProps",get:function(){return{ctaConfirmAction:"confirmed",ctaRejectAction:"canceled"}}}]);function r(e){var t;Object(C.a)(this,r);(t=Object(I.a)(this,Object(x.a)(r).call(this,e))).handleConfirm=t.handleConfirm.bind(Object(Ma.a)(t));t.handleReject=t.handleReject.bind(Object(Ma.a)(t));return t}Object(T.a)(r,[{key:"track",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return"function"==typeof a?Object($.c)(a({ctaAction:"string"==typeof e?e:e.apply(void 0,Object(qa.a)(n)),subscreen2:t})):Object($.c)(a)}},{key:"handleReject",value:function(){for(var e=this.props,t=e.onReject,n=e.ctaRejectAction,a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];this.track(n,i);t.apply(void 0,i)}},{key:"handleConfirm",value:function(){for(var e=this.props,t=e.onConfirm,n=e.ctaConfirmAction,a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];this.track(n,i);t.apply(void 0,i)}},{key:"render",value:function(){return Object(i.jsx)(e,Object.assign({},this.props,{onConfirm:this.handleConfirm,onReject:this.handleReject}))}}]);return r}(r.Component),n.displayName="TrackedPrompt",o}},Ba=function(e,t){return t&&Object(te.a)(t).map(function(e){return e.toLowerCase()}).includes(e.toLowerCase())},Ha=function(e){Object(F.a)(t,e);function t(e){var n;Object(C.a)(this,t);(n=Object(I.a)(this,Object(x.a)(t).call(this,e))).handleConfirm=function(){var e=n.props.onConfirm,t=n.state,a=t.email,i=t.firstName,r=t.lastName;if(n.hasProperInput()){n.setState({submitted:!0});e({email:a||null,firstName:i||null,lastName:r||null})}};n.handleEmailChange=function(e){var t=(e.target.value||"").trim(),a=!Fa.a.test(t);n.setState({email:t,emailError:a,displayEmailError:!1,exisitingEmail:!1});n.updateEmailError(a);if(t&&!a){n.setState({waitingForEmail:!0});n.searchForContact(t)}};n.handleFirstNameChange=function(e){var t=e.target.value;n.setState({firstName:t})};n.handleLastNameChange=function(e){var t=e.target.value;n.setState({lastName:t})};n.state={email:"",firstName:"",lastName:"",emailError:!1,generalError:null,waitingForEmail:!1,submitted:!1,exisitingEmail:!1};return n}Object(T.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.searchForContact;this.searchForContact=Object(ka.a)(e,1250);this.updateEmailError=Object(ka.a)(this.updateEmailErrorState.bind(this),500)}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=e.asyncContact;(Object(u.e)(t)||Object(u.a)(t))&&this.setState({waitingForEmail:!1});Object(u.e)(t)&&Object(m.a)(t)&&this.setState({exisitingEmail:!0})}},{key:"componentWillUnmount",value:function(){this.props.clearContact()}},{key:"updateEmailErrorState",value:function(e){this.setState({displayEmailError:e})}},{key:"hasProperInput",value:function(){var e=this.props.asyncContact,t=this.state,n=t.emailError,a=t.email,i=t.firstName,r=t.lastName,o=t.waitingForEmail,s=t.submitted,c=t.exisitingEmail,d=Object(m.a)(e);return!s&&(!o&&(!d||c))&&(!n&&a||i&&r)}},{key:"renderContactInfo",value:function(e){var t=La(e,Object(te.f)(e)),n=Object(te.g)(e)||Object(te.i)(e)?Object(te.f)(e):null;return Object(i.jsxs)("div",{children:[Object(i.jsx)(xa.a,{className:"flex-row",href:Da(Object(te.d)(e)),external:!0,children:Object(i.jsx)("h5",{className:"m-bottom-1",children:t})}),Object(i.jsx)("div",{children:n}),Object(i.jsx)(Ia.a,{use:"help",children:Object(te.e)(e)})]})}},{key:"renderExistingContact",value:function(){var e=this.props.asyncContact,t=this.state,n=t.email,a=t.submitted;if(Object(u.d)(e))return Object(i.jsx)(Ta.a,{use:"primary",grow:!0});var r=Object(m.a)(e);return r&&Ba(n,r)?Object(i.jsxs)("div",{"data-test-id":"existing-contact-wrapper",children:[Object(i.jsx)("div",{className:"text-center p-x-10",children:Object(i.jsx)(M.a,{message:"conversations-inbox-ui.contactPrompt.holdThePhone",options:{email:n}})}),Object(i.jsxs)("div",{className:"m-top-4 p-all-4 display-table",type:"tip",style:{border:"solid 1px",borderRadius:"4px",borderColor:A.BATTLESHIP},children:[Object(i.jsx)("h5",{children:L.a.text("conversations-inbox-ui.contactPrompt.contactExists")}),Object(i.jsxs)("div",{className:"display-flex justify-between align-center m-top-3",children:[this.renderContactInfo(r),Object(i.jsx)(P.a,{use:"primary",onClick:this.handleConfirm,disabled:a,"data-test-id":"existing-contact-confirm-button",children:L.a.text("conversations-inbox-ui.contactPrompt.existsButton")})]})]})]}):null}},{key:"renderFirstNameInput",value:function(){var e=this.props.asyncContact,t=this.state,n=t.email,a=t.firstName,r=Object(m.a)(e),o=Object(te.g)(r),s=Boolean(null!==r&&Ba(n,r)&&o),c=s?o:a,d=r&&!o?L.a.text("conversations-inbox-ui.contactPrompt.addFirstname"):null;return Object(i.jsx)(Sa.a,{placeholder:d,onChange:this.handleFirstNameChange,disabled:s,value:c})}},{key:"renderLastNameInput",value:function(){var e=this.props.asyncContact,t=this.state,n=t.email,a=t.lastName,r=Object(m.a)(e),o=Object(te.i)(r),s=Boolean(null!==r&&Ba(n,r)&&o),c=s?o:a,d=r&&!o?L.a.text("conversations-inbox-ui.contactPrompt.addLastname"):null;return Object(i.jsx)(Sa.a,{placeholder:d,onChange:this.handleLastNameChange,disabled:s,value:c})}},{key:"renderCreateButton",value:function(){var e=this.state.exisitingEmail;return Object(i.jsx)(P.a,{use:"primary",onClick:this.handleConfirm,"date-test-id":"create-new-contact-button",disabled:!(this.hasProperInput()&&!e),children:Object(i.jsx)(M.a,{message:"conversations-inbox-ui.buttons.createContact"})})}},{key:"render",value:function(){var e=this.props.onReject,t=this.state.displayEmailError,n=t?L.a.text("conversations-inbox-ui.input.email.error"):null;return Object(i.jsxs)(fa.a,{className:"message-name-prompt",size:"short",width:540,children:[Object(i.jsxs)(Oa.a,{children:[Object(i.jsx)(ha.a,{onClick:e}),Object(i.jsx)(va.a,{className:"m-bottom-1",children:Object(i.jsx)(M.a,{message:"conversations-inbox-ui.contactPrompt.header"})})]}),Object(i.jsxs)(ya.a,{className:"message-name-prompt-body",children:[Object(i.jsx)("p",{className:"m-bottom-3",children:Object(i.jsx)(M.a,{message:"conversations-inbox-ui.contactPrompt.description"})}),Object(i.jsx)("div",{className:"text-left",children:Object(i.jsxs)(Na.a,{children:[Object(i.jsx)(Ca.a,{label:"Email address",error:t,validationMessage:n,children:Object(i.jsx)(Sa.a,{"data-test-id":"email-input-field",onChange:this.handleEmailChange})}),Object(i.jsx)(Ca.a,{label:"First Name",children:this.renderFirstNameInput()}),Object(i.jsx)(Ca.a,{label:"Last Name",children:this.renderLastNameInput()})]})}),Object(i.jsx)("div",{className:"m-top-4",children:this.renderExistingContact()})]}),Object(i.jsxs)(ga.a,{align:"left",children:[this.renderCreateButton(),Object(i.jsx)(P.a,{use:"secondary",onClick:e,children:Object(i.jsx)(M.a,{message:"conversations-inbox-ui.buttons.cancel"})})]})]})}}]);return t}(r.Component);Ha.propTypes={asyncContact:Object(W.a)("AsyncData").isRequired,clearContact:d.a.func.isRequired,onConfirm:d.a.func.isRequired,onReject:d.a.func.isRequired,searchForContact:d.a.func.isRequired};Ha.displayName="ContactPrompt";var Ka=Ua({promptName:"associate-contact-prompt"})(Ha),Ya={searchForContact:function(e){return ja({email:e})},clearContact:pa},za=function(e){return{asyncContact:la(e)}},Qa=Object(l.connect)(za,Ya)(Ka);function Wa(e){var t=e.contact,n=e.onReject,a=e.onConfirm;return Object(i.jsxs)(fa.a,{use:"danger",children:[Object(i.jsxs)(Oa.a,{children:[Object(i.jsx)(ha.a,{onClick:n}),Object(i.jsx)(va.a,{children:Object(i.jsx)(M.a,{message:"conversations-inbox-ui.crm-integration.disassociatePrompt.title",options:{name:La(t)}})})]}),Object(i.jsx)(ya.a,{}),Object(i.jsxs)(ga.a,{children:[Object(i.jsx)(P.a,{use:"danger",onClick:a,"data-test-id":"disassociate-modal-confirm",children:Object(i.jsx)(M.a,{message:"conversations-inbox-ui.crm-integration.disassociatePrompt.save"})}),Object(i.jsx)(P.a,{use:"tertiary-light",onClick:n,children:Object(i.jsx)(M.a,{message:"conversations-inbox-ui.crm-integration.disassociatePrompt.cancel"})})]})]})}Wa.displayName="DisassociateModal";Wa.propTypes={contact:Object(W.a)("ContactRecord"),onConfirm:d.a.func.isRequired,onReject:d.a.func.isRequired};var Ga=Ua({promptName:"disassociate-contact-prompt"})(Wa),Ja=n("91cS"),Za=n("VA+L"),Xa="CREATE_DEAL_SUCCESS",$a="CREATE_DEAL_FAILED",ei="CREATE_TICKET_SUCCESS",ti="CREATE_TICKET_FAILED",ni="ASSOCIATE_DEAL",ai="ASSOCIATE_DEAL_SUCCEEDED",ii="ASSOCIATE_DEAL_FAILED",ri=function(e,t){return bt.a.put("/messages/v2/thread/"+e+"/association/deal/"+t)},oi=Object(ma.createAction)(ni),si=Object(ma.createAction)(ai),ci=Object(ma.createAction)(ii),di=function(e,t){return function(n){n(oi());var a=ri(e,t.dealId).then(function(){return n(si(t))},function(e){n(ci(e));throw e});a.done();return a}},li=function(e){var t=e.email,n=e.firstName,a=e.lastName,i=e.threadId;return bt.a.post("messages/v2/associations/contact/thread/"+i,{data:{email:t,firstName:n,lastName:a}})},ui=Object(f.a)({requestFn:li,actionTypes:h.a,toRecordFn:function(){},failureMetaActionCreator:function(){return{error:{type:"danger",titleText:L.a.text("conversations-inbox-ui.contactAssociation.failed")}}}}),mi=function(e){var t=e.email,n=e.firstName,a=e.lastName,i=e.threadId;return function(e){e(ui({email:t,firstName:n,lastName:a,threadId:i}));Object($.c)(Object(ee.a)())}},bi=n("Sx0/"),pi=n.n(bi),ji=n("dd+0"),ki=n.n(ji),fi=Object(ma.createAction)(Xa,pi.a,function(){return{notification:{message:Object(i.jsx)(ki.a,{message:"conversations-inbox-ui.alerts.DEAL_CREATE_SUCCESS.description"}),titleText:L.a.text("conversations-inbox-ui.alerts.DEAL_CREATE_SUCCESS.title"),type:"success"}}}),vi=Object(ma.createAction)($a,pi.a,function(){return{notification:{message:Object(i.jsx)(ki.a,{message:"conversations-inbox-ui.alerts.DEAL_CREATE_FAILED.description"}),titleText:L.a.text("conversations-inbox-ui.alerts.DEAL_CREATE_FAILED.title"),type:"danger"}}}),Oi=Object(ma.createAction)(ei,pi.a,function(){return{notification:{message:Object(i.jsx)(ki.a,{message:"conversations-inbox-ui.alerts.TICKET_CREATE_SUCCESS.description"}),titleText:L.a.text("conversations-inbox-ui.alerts.TICKET_CREATE_SUCCESS.title"),type:"success"}}}),yi=Object(ma.createAction)(ti,pi.a,function(){return{notification:{message:Object(i.jsx)(ki.a,{message:"conversations-inbox-ui.alerts.TICKET_CREATE_FAILED.description"}),titleText:L.a.text("conversations-inbox-ui.alerts.TICKET_CREATE_FAILED.title"),type:"danger"}}}),gi=function(e){var t=e.threadId;return bt.a.delete("/messages/v2/associations/contact/thread/"+t)},hi=Object(f.a)({requestFn:gi,actionTypes:h.b,toRecordFn:function(e){return e},successMetaActionCreator:function(e){var t=e.requestArgs.contactName;return{notification:{type:"success",titleText:L.a.text("conversations-inbox-ui.alerts.disassociationSuccess.title",{name:t})}}},failureMetaActionCreator:function(e){var t=e.requestArgs.contactName;return{error:{type:"danger",titleText:L.a.text("conversations-inbox-ui.alerts.disassociationFailure.title",{name:t})}}}}),Si=function(e){var t=e.contactName,n=e.threadId;return function(e){e(hi({contactName:t,threadId:n}));Object($.c)(Object(ee.i)({associationType:G.CONTACT}))}},Ni=function(e){var t=e.closePrompt,n=e.contact,a=e.openCreateDealModal,o=e.openCreateTicketModal,c=e.promptStatus,d=e.threadId,u=Object(l.useDispatch)(),m=Object(Za.a)({threadId:d}).conversationId,b=Object(l.useSelector)(ca.h),p=Object(Ja.a)({conversationId:m,isUngatedForReadV2Associations:b,threadId:d}).associateTicket,j=Object(r.useCallback)(function(e){var i=e.object,r=e.error,o=e.createAnother;r?u(vi()):u(di(d,i)).then(function(){Object($.c)(Object(ee.f)({objectType:G.DEAL}));u(fi());t(re);Object(sa.b)({query:da.a,variables:{objectType:G.CONTACT,subjectId:Object(te.d)(n),conversationId:""+d}});o&&setTimeout(a)}).done()},[t,n,d,u,a]),k=Object(r.useCallback)(function(e){var n=e.object,a=e.error,i=e.createAnother;a?u(yi()):p(n).then(function(){Object($.c)(Object(ee.f)({objectType:G.TICKET}));u(Oi());t(oe);i&&setTimeout(o)}).done()},[t,u,o,p]),f=Object(r.useCallback)(function(e){var n=e.email,a=e.firstName,i=e.lastName;u(mi({email:n,firstName:a,lastName:i,threadId:d}));t(ie)},[t,d,u]),v=Object(r.useCallback)(function(){u(Si({contactName:La(n),threadId:d}));t(se)},[t,n,u,d]);return s()(oe,c)?Object(i.jsx)(ra,{contact:n,onConfirm:k,onReject:function(){return t(oe)},threadId:d}):s()(re,c)?Object(i.jsx)(oa,{contact:n,onConfirm:j,onReject:function(){return t(re)}}):s()(ie,c)?Object(i.jsx)(Qa,{ctaConfirmAction:function(e){return e.isNewContact?"confirmed create contact":"confirmed existing contact"},onConfirm:f,onReject:function(){return t(ie)}}):s()(se,c)?Object(i.jsx)(Ga,{contact:n,onConfirm:v,onReject:function(){return t(se)}}):null};Ni.displayName="ContactSidebarPrompts";Ni.propTypes={closePrompt:d.a.func.isRequired,contact:Object(W.a)("ContactRecord"),openCreateDealModal:d.a.func.isRequired,openCreateTicketModal:d.a.func.isRequired,promptStatus:d.a.object.isRequired,threadId:d.a.string.isRequired};var Ci=Ni,Ti=n("xRv3"),Ii=n("47ul"),xi=n.n(Ii);function Fi(){return Object(i.jsx)(E.a,{type:"403",illustration:"errors/general",illustrationProps:{width:150},className:"reagan-test-sidebar-error",children:Object(i.jsx)("p",{className:"p-x-5",children:Object(i.jsx)(xi.a,{message:"customerDataSidebar.sidebarError_jsx",options:{href:window.location.href},elements:{Link:xa.a}})})})}var Ai=n("0HCf"),Di=n.n(Ai),Ri=n("MyjV"),Pi=n("4cYC"),Ei=n("EeNa"),_i=n("d0QT"),wi=n("pc04"),Li=n("aOQL"),qi=n("p8zD"),Mi=n("EipP"),Vi=n("wQtI"),Ui=n("okd+"),Bi=n("cWXR"),Hi=n("cuUD"),Ki=n("geqf"),Yi=n("jvNT"),zi=n("REBV"),Qi=n("FCA6"),Wi="8px",Gi=A.BATTLESHIP,Ji=A.GYPSUM,Zi="20px",Xi=A.CALYPSO,$i=A.BUTTON_DISABLED_TEXT,er=A.LINK_HOVER,tr="24px",nr="44px",ar="4px",ir="20px",rr=n("KmIv"),or={default:nr,compact:ir,none:0},sr=R.a.div.withConfig({displayName:"UIExpandableContents",componentId:"i1of7z-0"})(["padding-bottom:",";padding-left:",";padding-right:",";padding-top:",";>:last-child{margin-bottom:0;}"],tr,function(e){var t=e.indentation;return"number"==typeof t?Object(rr.l)(t):or[t]},function(e){return"none"===e.indentation?0:ir},function(e){var t=e.indentation,n=e.use;return"none"===t?0:"enclosed"===n?Zi:ar});sr.propTypes={children:d.a.node,indentation:d.a.oneOfType([d.a.number,d.a.oneOf(Object.keys(or))])};sr.defaultProps={indentation:"default"};sr.displayName="UIExpandableContents";var cr=sr,dr=["default","enclosed"],lr=Object(D.css)(["background-color:",";border-width:1px 0;margin-bottom:-1px;"],Ji),ur=R.a.div.withConfig({displayName:"UIExpandableSection__ExpandableActions",componentId:"jpb2kk-0"})(["align-items:center;display:flex;margin-left:",";*:first-child > * + *{margin-left:",";}"],Wi,Wi),mr=R.a.div.withConfig({displayName:"UIExpandableSection__ExpandableWrapper",componentId:"jpb2kk-1"})([""]),br=R.a.div.withConfig({displayName:"UIExpandableSection__ExpandableHeader",componentId:"jpb2kk-2"})(["border-color:",";border-style:solid;border-width:1px 0 0 0;display:flex;justify-content:space-between;padding-left:0;padding-right:",";position:relative;",";&::after{content:'';height:54px;margin-left:-1px;width:1px;}"],Gi,ir,function(e){return"enclosed"===e.use?lr:null});br.propTypes={use:d.a.oneOf(dr)};var pr=R()(Li.a).withConfig({displayName:"UIExpandableSection__ExpandableButton",componentId:"jpb2kk-3"})(["color:",";align-items:center;display:flex;flex:1 1 auto;padding:10px 0;transition:color "," ease-out;user-select:none;&:hover:not([aria-disabled='true']){color:",";}"],function(e){return e.disabled?$i:void 0},wi.f,er),jr=R()(function(e){var t=e.className,n=e.titleText;return Object(i.jsx)(Ui.a,{"aria-level":null,className:t,role:"presentation",children:n})}).withConfig({displayName:"UIExpandableSection__ExpandableTitle",componentId:"jpb2kk-4"})(["margin-bottom:0;"]);jr.propTypes={titleText:d.a.node};var kr=R.a.span.withConfig({displayName:"UIExpandableSection__ExpandableCaretHolder",componentId:"jpb2kk-5"})(["display:flex;flex-shrink:0;justify-content:center;width:",";"],nr),fr=R()(Hi.a).attrs({color:Xi,viewBoxHeight:Bi.a,viewBoxWidth:Bi.b,height:12,width:5}).withConfig({displayName:"UIExpandableSection__ExpandableCaret",componentId:"jpb2kk-6"})(["transition:all "," ease-in-out;transform:",";"],wi.f,function(e){return e.open?"rotate(90deg)":null}),vr=R.a.span.withConfig({displayName:"UIExpandableSection__ExpandableDragHandleHolder",componentId:"jpb2kk-7"})(["left:8px;opacity:",";position:absolute;top:50%;transform:translateY(-50%);transition:opacity "," ease-out;"],function(e){return e.hovered?"1":"0"},wi.f),Or=function(e){var t=e.open,n=e.children,a=e.className,r=e.indentation,o=e.use;return Object(i.jsx)(cr,{"aria-hidden":t?"false":"true",className:a,indentation:r,use:o,children:n})};Or.propTypes={open:d.a.bool,children:d.a.node,indentation:cr.propTypes.indentation,use:d.a.oneOf(dr)};var yr=function(e){var t=e.open;return Object(i.jsx)(fr,{open:t})},gr=function(e){var t=e.actions,n=e.Caret,r=e.children,o=e.contentClassName,s=e.ContentWrapper,c=e.disabled,d=e.DragHandle,l=e.draggable,u=e.Header,m=(e.hovered,e.indentation),b=e.onOpenChange,p=e.open,j=e.Opener,k=e.titleText,f=e.Title,v=e.use,O=Object(a.a)(e,["actions","Caret","children","contentClassName","ContentWrapper","disabled","DragHandle","draggable","Header","hovered","indentation","onOpenChange","open","Opener","titleText","Title","use"]);return Object(i.jsx)(Ki.a,Object.assign({},e,{children:function(e){var y=e.hovered,g=Object(a.a)(e,["hovered"]);return Object(i.jsxs)(mr,Object.assign({},O,{},g,{children:[Object(i.jsxs)(u,{use:v,children:[l?Object(i.jsx)(vr,{hovered:y,children:Object(i.jsx)(d,{})}):null,k?Object(i.jsxs)(j,{"aria-expanded":p?"true":"false",disabled:c,onClick:function(){b(Object(qi.a)(!p))},children:[Object(i.jsx)(kr,{children:Object(i.jsx)(n,{open:p})}),Object(i.jsx)(f,{titleText:k})]}):null,t?Object(i.jsx)(ur,{children:t}):null]}),r?Object(i.jsx)(Yi.a,{open:p,children:Object(i.jsx)(s,{open:p,className:o,indentation:m,use:v,children:r})}):null]}))}}))};gr.propTypes={actions:d.a.node,children:d.a.node,Caret:d.a.elementType,contentClassName:d.a.string,ContentWrapper:Object(Qi.a)(Or).isRequired,disabled:d.a.bool.isRequired,draggable:d.a.bool.isRequired,DragHandle:d.a.elementType,Header:Object(Qi.a)(br).isRequired,hovered:Object(zi.a)(d.a.bool),indentation:cr.propTypes.indentation,onOpenChange:d.a.func,open:d.a.bool,Opener:d.a.elementType,titleText:jr.propTypes.titleText,Title:Object(Qi.a)(jr).isRequired,use:d.a.oneOf(dr)};gr.defaultProps={Caret:yr,ContentWrapper:Or,disabled:!1,draggable:!1,DragHandle:Vi.a,Header:br,indentation:cr.defaultProps.indentation,open:!1,Opener:pr,Title:jr,use:"default"};gr.displayName="UIExpandableSection";var hr=Object(Mi.a)(gr,["open"]),Sr=Object(r.createContext)(null);Sr.Provider.propTypes={value:d.a.shape({onCardOpenChange:d.a.func,onCardOrderChange:d.a.func}).isRequired};var Nr=function(e){switch(e.associationDefinitions&&e.associationDefinitions[0].toObjectTypeId){case"0-1":return"Contacts";case"0-2":return"Company";case"0-3":return"Deals";case"0-5":return"Tickets";default:return e.label}},Cr=function(e){var t=e.__typename,n=e.label;switch(t){case"AssociatedObjectsCard":return Nr(e);default:return n}},Tr=R.a.div.withConfig({displayName:"UniversalSidebarCard__ExpandableSectionWrapper",componentId:"nv2k2x-0"})([""," position:relative;"],function(e){return e.isDragging?"opacity: 0;":""}),Ir=function(e){var t=e.objectType,n=e.objectId,a=e.data,o=e.draggable,s=e.Title,c=e.Actions,d=e.Content,l=e.isDragging,u=e.DragHandle,m=void 0===u?Vi.a:u,b=e.Header,p=e.cardProps,j=void 0===p?{}:p,k=Object(r.useContext)(Sr).onCardOpenChange,f=Object(r.useContext)(_i.a),v=f.canEditSubject,O=f.readOnly,y=!a.isCollapsed,g=a.legacyCardName,h=Object(r.useCallback)(function(e){var t=e.target.value;k({legacyCardName:g,cardId:a.cardId,isOpen:t})},[k,g,a.cardId]);return Object(i.jsx)(Ti.a,{ErrorComponent:Ei.a,boundaryName:"UniversalSidebarCard_SidebarError",showRefreshAlert:!1,children:Object(i.jsx)(Tr,{isDragging:l,children:Object(i.jsx)(hr,{actions:c&&Object(i.jsx)(c,Object.assign({data:a,objectType:t,subjectId:n,objectId:n,isEditable:v&&!O},j)),titleText:Object(i.jsx)(Ti.a,{boundaryName:"UniversalSidebarCard_SidebarError_titleText",children:Object(i.jsx)("span",{"data-selenium-test":"universal-sidebar-card-title",children:Object(i.jsx)(s,Object.assign({subjectId:n,objectId:n,objectType:t,data:a},j))})}),titleSize:"small",indentation:"compact",draggable:o,"data-sidebar-card-label":Cr(a),"data-sidebar-card-type":a.__typename,"data-sidebar-key":g,"data-selenium-expanded":y,onOpenChange:h,DragHandle:m,Header:b,defaultOpen:!l&&y,children:Object(i.jsx)(Ti.a,{ErrorComponent:Ei.a,boundaryName:"UniversalSidebarCard_SidebarError_Content",showRefreshAlert:!1,children:Object(i.jsx)("div",{"data-selenium-test":"universal-sidebar-card-content",children:Object(i.jsx)(d,Object.assign({subjectId:n,objectId:n,objectType:t,data:a,isEditable:v&&!O},j))})})})})})};Ir.propTypes={Content:d.a.func.isRequired,Title:d.a.func.isRequired,Actions:d.a.func,cardProps:d.a.object,data:d.a.shape({__typename:d.a.string.isRequired,label:d.a.string,isCollapsed:d.a.bool,legacyCardName:d.a.string,cardId:d.a.string.isRequired}).isRequired,objectType:d.a.string.isRequired,objectId:d.a.string.isRequired,isDragging:d.a.bool,DragHandle:d.a.elementType,Header:d.a.elementType,draggable:d.a.bool};var xr=Ir,Fr=n("zmx5"),Ar=n("LljG"),Dr=n.n(Ar),Rr=n("MPy6"),Pr=n.n(Rr),Er=n("yvRk"),_r=n.n(Er),wr=n("Mr4n"),Lr=n("4im5"),qr={drop:function(e,t){null!=e.onDrop&&e.onDrop(t.getItem(),t)},hover:function(e,t,n){var a=t.getItem().index,i=e.index,r=e.listKey,o=e.dragDirection;if(-1!==a&&t.getItem().listKey===r){if(a!==i){var s=Object(Ke.findDOMNode)(n).getBoundingClientRect();if(o===Lr.HORIZONTAL){var c=s.right-s.left,d=t.getClientOffset().x-s.left;if(a>i&&d>.9*c||a<i&&d<.1*c)return}else{var l=(s.bottom-s.top)/2,u=t.getClientOffset().y-s.top;if(a<i&&u<l||a>i&&u>l)return}e.onMove(a,i,t.getItem());t.getItem().index=i}}else{e.onAddOption(t.getItem(),i,r);"function"==typeof e.onRemoveOption&&e.onRemoveOption(t.getItem());t.getItem().index=i;t.getItem().listKey=r}}},Mr=function(){return{}},Vr=function(e){var t,n,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Mr,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if("object"==typeof e){t=e.itemTypeSource;n=e.itemTypeTarget}else{n=e;t=e}var o=Pr()(r,{beginDrag:function(e){return{index:e.index,originalIndex:e.index,listKey:e.listKey,data:a(e),useCustomDragLayer:e.useCustomDragLayer}},endDrag:function(e,t){var n=t.getItem(),a=n.originalIndex,i=n.index;if(!t.didDrop()){e.onMove(i,a,t.getItem());null!=e.onInvalidDrop&&e.onInvalidDrop(i,a,t.getItem())}}});return function(e){var a=e.displayName||e.name,r=_r()({displayName:"DnDListWrapper("+a+")",propTypes:{index:d.a.number.isRequired,dragDirection:d.a.oneOf(Object.keys(Lr))},getDefaultProps:function(){return{dragDirection:Lr.VERTICAL}},render:function(){return Object(i.jsx)(e,Object.assign({},this.props))}});return Dr()(Object(wr.DragSource)(t,o,function(e,t){return{connectDragSource:e.dragSource(),isDragging:t.isDragging(),connectDragPreview:e.dragPreview(),itemTypeSource:t.internalMonitor.store.getState().dragOperation.itemType}}),Object(wr.DropTarget)(n,qr,function(e,t){return{connectDropTarget:e.dropTarget(),isOver:t.isOver(),isOverCurrent:t.isOver({shallow:!0})}}))(r)}},Ur=function(e){Object(r.useEffect)(e,[])},Br=R()(hr.defaultProps.Header).withConfig({displayName:"UniversalSidebarCardDnDWrapper__BorderlessHeader",componentId:"sc-1tf67v2-0"})(["border-top-width:0;"]),Hr=Object(D.css)(["border-color:",";border-style:solid;border-width:2px 0 0 0;"],A.CALYPSO),Kr=Object(D.css)(["border-color:",";border-style:solid;border-width:0 0 2px 0;"],A.CALYPSO),Yr=Object(D.css)(["background-color:",";"],A.GYPSUM),zr=R.a.section.withConfig({displayName:"UniversalSidebarCardDnDWrapper__CardWrapper",componentId:"sc-1tf67v2-1"})(["border-color:",";"," "," ",""],A.GYPSUM,function(e){return e.isDragging&&Yr},function(e){return e.draggingInFront&&Hr},function(e){return e.draggingBehind&&Kr}),Qr=function(e){return e?hr.defaultProps.Header:Br},Wr=vt()(function(e){return function(t){return e(Object(i.jsx)("div",{children:Object(i.jsx)(Vi.a,Object.assign({},t))}))}}),Gr=vt()(function(e,t){return function(n){var a=Qr(t);return e(Object(i.jsx)("div",{children:Object(i.jsx)(a,Object.assign({},n))}))}}),Jr=function(e){var t=e.isBordered,n=e.Actions,a=e.Content,o=e.cardProps,s=e.data,c=e.draggable,d=e.isDragging,l=e.objectId,u=e.objectType,m=e.Title,b=e.connectDragPreview,p=e.connectDragSource,j=e.connectDropTarget,k=e.draggingFromIndex,f=e.draggingToIndex,v=e.index;Ur(function(){b(Object(Fr.getEmptyImage)(),{captureDraggingState:!0})});if(!c)return Object(i.jsx)(xr,{objectType:u,objectId:l,Title:m,Actions:n,Content:a,cardProps:o,data:s,Header:Qr(t),isDragging:!1,draggable:!1});var O=f===v;return Object(i.jsx)(r.Fragment,{children:j(Object(i.jsx)("div",{children:Object(i.jsx)(zr,{isDragging:d,draggingInFront:O&&f<k,draggingBehind:O&&f>k,children:Object(i.jsx)(xr,{objectType:u,objectId:l,Title:m,Actions:n,Content:a,cardProps:o,data:s,DragHandle:Wr(p),Header:Gr(p,t),isDragging:d,draggable:c})})}))})};Jr.propTypes={Content:d.a.func.isRequired,Title:d.a.func.isRequired,Actions:d.a.func,cardProps:d.a.object,data:d.a.object.isRequired,objectType:d.a.string.isRequired,objectId:d.a.string.isRequired,isDragging:d.a.bool,isBordered:d.a.bool,draggable:d.a.bool,connectDragSource:d.a.func.isRequired,connectDropTarget:d.a.func.isRequired,connectDragPreview:d.a.func.isRequired,index:d.a.number.isRequired,draggingFromIndex:d.a.number,draggingToIndex:d.a.number};var Zr=vt()(function(e){var t=Vr(e,g.a)(Jr);t.displayName="UniversalSidebarCardDnDWrapper("+e+")";return t}),Xr=Object(r.createContext)({cardLocation:null,parentCardLocation:null});Xr.Provider.propTypes={value:d.a.shape({cardLocation:d.a.string.isRequired,parentCardLocation:d.a.string}).isRequired};var $r=function(){return Object(r.useContext)(Xr)},eo={position:"fixed",pointerEvents:"none",zIndex:0,left:0,top:0,width:"100%",height:"100%"};function to(e){var t=e.initialOffset,n=e.currentOffset;if(!t||!n)return{display:"none"};var a="translate("+n.x+"px, "+n.y+"px)";return{transform:a,WebkitTransform:a}}var no=function(e){Object(F.a)(t,e);function t(){Object(C.a)(this,t);return Object(I.a)(this,Object(x.a)(t).apply(this,arguments))}Object(T.a)(t,[{key:"renderItem",value:function(){var e=this.props,t=e.item,n=e.children;if(!t.useCustomDragLayer)return null;var a=r.Children.only(n);return Object(r.cloneElement)(a,{item:t})}},{key:"render",value:function(){var e=this.props,t=e.isDragging,n=e.itemType,a=e.namespace;return!t||a&&a!==n?null:Object(i.jsx)("div",{style:eo,children:Object(i.jsx)("div",{style:to(this.props),children:this.renderItem()})})}}]);return t}(r.Component);no.propTypes={namespace:d.a.string,children:d.a.node,isDragging:d.a.bool.isRequired,item:d.a.object,itemType:d.a.string,initialOffset:d.a.shape({x:d.a.number,y:d.a.number}),currentOffset:d.a.shape({x:d.a.number,y:d.a.number})};var ao=Object(wr.DragLayer)(function(e){return{item:e.getItem(),itemType:e.getItemType(),initialOffset:e.getInitialSourceClientOffset(),currentOffset:e.getSourceClientOffset(),isDragging:e.isDragging()}})(no),io=n("ju9H"),ro=n("lKVG"),oo=n("leqx"),so=R()(hr).withConfig({displayName:"UniversalSidebarCardDragPreview__PreviewExpandableSection",componentId:"sc-199t3qc-0"})(["background-color:",";"],A.OLAF),co=function(e){var t=e.item.data,n=e.width,a=t.Title,r=t.Actions,o=t.objectId,s=t.objectType,c=t.data,d=t.cardProps;return Object(i.jsx)(so,{open:!1,titleText:Object(i.jsx)(a,Object.assign({data:c,objectId:o,objectType:s,subjectId:o},d)),actions:r&&Object(i.jsx)(r,{data:c,objectType:s,objectId:o}),style:{width:n}})};co.propTypes={item:d.a.shape({data:d.a.shape({Title:d.a.elementType.isRequired,Actions:d.a.elementType,objectId:d.a.string.isRequired,objectType:d.a.oneOfType([oo.a,ro.a]).isRequired,data:d.a.object})}),width:d.a.number};var lo=co,uo=Object(r.createContext)(null);uo.Provider.propTypes={value:d.a.shape({sourceApp:d.a.string}).isRequired};var mo=n("SYgn"),bo=n.n(mo),po=n("qvRI"),jo=function(e){var t=e.cards,n=e.cardProps,a=e.draggable,o=e.objectId,s=e.objectType,c=e.cardComponents,d=Object(r.useContext)(Xr).cardLocation,l=Object(r.useContext)(uo).sourceApp,u=Object(r.useContext)(Sr).onCardOrderChange,m=Object(r.useState)(null),b=Object(ne.a)(m,2),p=b[0],j=b[1],k=Object(r.useState)(null),f=Object(ne.a)(k,2),v=f[0],O=f[1],y=Object(r.useState)(null),g=Object(ne.a)(y,2),h=g[0],S=g[1],N=Object(r.useCallback)(function(e,t){null===p&&j(e);O(t)},[p,j,O]),C=Object(r.useCallback)(function(){if(null!==v){var e=Object(qa.a)(t),n=e.splice(p,1),a=Object(ne.a)(n,1)[0];e.splice(v,0,a);j(null);O(null);u(e);po.b.log("sidebar-interaction",{action:"reorder cards"})}},[t,p,v,j,O,u]),T=Object(r.useCallback)(function(e){Object(Ke.findDOMNode)(e)&&S(Object(Ke.findDOMNode)(e).clientWidth)},[S]);return Object(i.jsxs)(io.a,{ref:T,children:[t.map(function(e,t){var r=c[e.__typename];if(!r){var u=e.__typename;Di.a.warn({message:"[UniversalSidebarCards] no card found for "+u+" ("+d+")",key:"UniversalSidebarCards:"+u});bo.a.captureMessage("UniversalSidebar: no config found for card",{extra:{cardType:u,cardLocation:d,sourceApp:l}});return null}var m=n?n[e.__typename]:null,b=Zr(d);return Object(i.jsx)(b,{Actions:r.Actions,cardProps:m,Content:r.Content,data:e,draggable:a,isBordered:t>0,objectType:s,objectId:o,Title:r.Title,index:t,draggingFromIndex:p,draggingToIndex:v,dragId:e.cardId,onMove:N,onDrop:C,useCustomDragLayer:!0},e.cardId)}),Object(i.jsx)(ao,{namespace:d,children:Object(i.jsx)(lo,{width:h})})]})};jo.propTypes={cards:d.a.arrayOf(d.a.shape({__typename:d.a.string.isRequired,cardId:d.a.string.isRequired,isCollapsed:d.a.bool.isRequired,label:d.a.string})).isRequired,cardProps:d.a.object,objectType:d.a.string.isRequired,cardComponents:d.a.object,objectId:d.a.string.isRequired,draggable:d.a.bool};var ko=Object(r.memo)(jo),fo=n("R3au"),vo=n("gTuk"),Oo={id:"767de048f5cf0d5a17762835920f4a90ae271171a5bdc6098f2c865a21dcc084",kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"fetchClosedCards"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"userAttributeKey"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"userAttributeValues"},arguments:[{kind:"Argument",name:{kind:"Name",value:"keys"},value:{kind:"ListValue",values:[{kind:"Variable",name:{kind:"Name",value:"userAttributeKey"}}]}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"value"}}]}}]}}]},yo=function(e){return(On.k[e]||e)+":sidebar_settings"},go=function(e){var t=e.cardId,n=e.userAttributeValuesUpdateQuery,a=e.updateQuery,i=e.isOpen,r=e.newClosedCards;n(function(e){return{userAttributeValues:[Object.assign({},e.userAttributeValues[0],{value:JSON.stringify(r)})]}});a(function(e){var n=e.crmObject.cards.map(function(e){return e.cardId===t?Object.assign({},e,{isCollapsed:!i}):e});return Object.assign({},e,{crmObject:Object.assign({},e.crmObject,{cards:n})})})},ho=function(e){var t=e.objectType,n=e.updateQuery,a=(On.k[t]||t)+":sidebar_settings",i=Object(Ri.useQuery)(Oo,{variables:{userAttributeKey:a}}),o=i.data,s=i.updateQuery,c=o&&o.userAttributeValues&&o.userAttributeValues.length&&JSON.parse(o.userAttributeValues[0].value)||[];return Object(r.useCallback)(function(e){var a=e.cardId,i=e.isOpen,r=e.legacyCardName,o=c;i?o=c.filter(function(e){return e!==a&&e!==r}):c.includes(r)||c.includes(a)||(o=[].concat(Object(qa.a)(c),[a]));Object(vo.b)(yo(t),Object(Ee.List)(o)).catch(function(e){Di.a.warn({message:"Failed to save card collapsed state: "+e.message,key:"CardsSidebar::handleClosedCardsChange"})}).done();go({cardId:a,updateQuery:n,userAttributeValuesUpdateQuery:s,isOpen:i,newClosedCards:o});po.b.log("sidebar-interaction",{action:"expand/collapse individual side card",subAction:i?"expand":"collapse",card:r})},[c,t,s,n])},So=function(e){var t=e.orderedCards;(0,e.updateQuery)(function(e){return Object.assign({},e,{crmObject:Object.assign({},e.crmObject,{cards:t})})})},No=function(e){var t=e.objectType,n=e.updateQuery,a=Object(r.useContext)(Xr).cardLocation;return Object(r.useCallback)(function(e){var i=e.map(function(e){return e.cardId}),r=(On.k[t]||t)+":"+a+":order";Object(vo.b)(r,Object(Ee.Map)({order:i.reduce(function(e,t,n){e[t]=n;return e},{})})).catch(function(e){Di.a.warn({message:"Failed to save card order: "+e.message,key:"useUpdateCardOrder::handleOrderChange"})}).done();So({orderedCards:e,updateQuery:n})},[a,t,n])},Co=n("l8+2"),To="BASIC_SIDEBAR",Io="CONVERSATIONS_INBOX",xo="CRM_RECORD_LEFT",Fo="CRM_RECORD_RIGHT",Ao=n("2h/E"),Do=n("Ukhg"),Ro=n("JyZI"),Po=n("soyi"),Eo=n("46u0"),_o=n.n(Eo),wo=n("a/Fj"),Lo=n("HZCd"),qo=n("J92U"),Mo=n("Thgt"),Vo=function(e){var t=e.cardLocation,n=e.fromObjectType,a=e.fromObjectId,i=e.toObjectType,o=e.toObjectId;return Object(r.useCallback)(function(e){var r={objectType:n,subjectId:+a,cardLocation:t};try{var s=e.readQuery({query:Pi.a,variables:r}),c=On.k[i]||i,d=s.crmObject.cards.find(function(e){return!!e.associationDefinitions&&e.associationDefinitions[0].toObjectTypeId===c});if(!d)return;var l=Object.assign({},d,{associatedObjects:Object.assign({},d.associatedObjects,{edges:d.associatedObjects.edges.filter(function(e){return e.node.id!==o})}),count:Object.assign({},d.count,{edges:d.count.edges.filter(function(e){return e.node.id!==o})})}),u=s.crmObject.cards.map(function(e){return e===d?l:e});e.writeQuery({query:Pi.a,variables:r,data:Object.assign({},s,{crmObject:Object.assign({},s.crmObject,{cards:u})})})}catch(e){}},[n,a,t,i,o])},Uo=function(e){var t=e.fromObjectId,n=e.fromObjectType,a=e.toObjectId,i=e.toObjectType,o=e.onSuccess,s=e.onError,c=Object(r.useContext)(Co.a).client,d=$r().parentCardLocation,l="inbounddb-objects/v1/crm-objects",u=Vo({cardLocation:d,fromObjectType:n,fromObjectId:t,toObjectId:+a,toObjectType:i});return Object(r.useCallback)(function(){Object(qo.a)(l+"/"+encodeURIComponent(i)+"/"+ +a).then(function(){Object(Mo.a)({titleKey:"universalSidebar.crmObjectActionsDropdown.successfullyDeleted"});u(c);"function"==typeof o&&o()}).catch(function(e){Object(Mo.a)({titleKey:"universalSidebar.crmObjectActionsDropdown.errorDeleting",mutationFailed:!0});"function"==typeof s&&s();throw e}).done()},[i,a,u,o,s,c])},Bo=n("MO2O"),Ho=n("6L7K"),Ko=n("pbrb"),Yo=n("vuW9"),zo=function(e){var t=e.objectTypeId,n=e.objectId,a=Object(r.useState)(!1),o=Object(ne.a)(a,2),s=o[0],c=o[1],d=Object(r.useState)(!1),l=Object(ne.a)(d,2),u=l[0],m=l[1],b=Object(r.useState)(!1),p=Object(ne.a)(b,2),j=p[0],k=p[1],f=Object(r.useContext)(Ho.a),v=f.definition.singularForm,O=f.primaryDisplayLabel,y=Object(r.useContext)(wo.a),g=y.closeSidebar,h=y.fromObjectType,S=y.fromObjectId,N=Object(r.useContext)(Lo.a).onObjectDelete,C=Object(r.useContext)(_i.a).canEditSubject,T=Object(r.useCallback)(function(){m(!1);"function"==typeof N&&N({objectTypeId:t,objectId:n});g()},[t,n,g,N]),I=Object(r.useCallback)(function(){m(!1);k(!0)},[m,k]),x=Uo({fromObjectType:h,fromObjectId:S,toObjectType:t,toObjectId:n,onSuccess:T,onError:I}),F=Object(r.useCallback)(function(){k(!1);m(!0);x()},[k,m,x]),A=Object(r.useCallback)(function(){c(!0)},[c]),D=Object(r.useCallback)(function(){c(!1)},[c]),R=function(e){var t=Object(i.jsx)(_o.a,{message:"universalSidebar.crmObjectActionsDropdown.deleteModal.deleteConfirm.object",options:{singularForm:v}});return Object(i.jsx)(Ko.a,Object.assign({loading:u,failed:j},e,{children:t}))},E=function(){var e=Object(i.jsx)(_o.a,{message:"universalSidebar.crmObjectActionsDropdown.deleteModal.deleteTitle.object",options:{singularForm:v}}),t=Object(i.jsx)(_o.a,{message:"universalSidebar.crmObjectActionsDropdown.deleteModal.cancel"}),n=Object(i.jsx)(ki.a,{message:"universalSidebar.crmObjectActionsDropdown.deleteModal.deleteBody.object",options:{objectLabel:O}});return Object(i.jsx)(Bo.a,{ConfirmButton:R,description:n,confirmUse:"danger",message:e,size:"auto",use:"danger","data-selenium-test":"cobject-delete-modal",onConfirm:F,onReject:D,rejectLabel:t})};return Object(i.jsxs)("div",{className:"display-flex",children:[Object(i.jsxs)(Ro.a,{align:"center",children:[Object(i.jsx)(Po.a,{}),Object(i.jsx)(Po.a,{children:Object(i.jsx)(Do.a,{menuWidth:200,placement:"bottom right",buttonText:L.a.text("universalSidebar.crmObjectActionsDropdown.actions"),buttonUse:"transparent","data-selenium-test":"cobject-actions-dropdown",children:Object(i.jsx)(io.a,{children:Object(i.jsx)(Yo.a,{disabled:C,"data-unit-test":"cobject-delete-button-tooltip",title:Object(i.jsx)(_o.a,{message:"universalSidebar.crmObjectActionsDropdown.unauthorizedDelete"}),children:Object(i.jsx)(P.a,{"data-selenium-test":"cobject-delete-button","data-unit-test":"cobject-delete-button",onClick:A,use:"link",disabled:!C,children:Object(i.jsx)(_o.a,{message:"universalSidebar.crmObjectActionsDropdown.deleteObject"})})})})})})]}),s&&E()]})};zo.propTypes={objectTypeId:ro.a.isRequired,objectId:d.a.string.isRequired};var Qo=zo,Wo=R.a.div.withConfig({displayName:"UniversalSidebarHighlight__StyledHighlight",componentId:"kefjdp-0"})(["border-bottom:1px solid ",";padding:24px;"],A.BATTLESHIP),Go=R.a.h2.withConfig({displayName:"UniversalSidebarHighlight__Title",componentId:"kefjdp-1"})(["padding:4px 16px;&&{margin-bottom:4px;}"]),Jo=function(e){var t=e.objectId,n=e.objectType,a=Object(r.useContext)(_i.a),o=a.canDeleteSubject,s=a.readOnly,c=Object(r.useContext)(Ho.a).primaryDisplayLabel,d=!Object(Ao.a)(n),l=function(){return d&&o&&!s?Object(i.jsx)(Qo,{objectTypeId:n,objectId:t}):null};return Object(i.jsxs)(Wo,{"data-selenium-test":"universal-sidebar-highlight",children:[l(),Object(i.jsx)(Go,{className:"text-left",children:c})]})};Jo.propTypes={objectId:d.a.string.isRequired,objectType:d.a.string.isRequired};var Zo=Jo,Xo=n("Tqy5"),$o={id:"3a5882961ac600cb04826899cb81cc6de2184aad813191e9aa2f323f5cf61b89",kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"CancelPaymentsSubscription"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"cancelPaymentsSubscriptionInput"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"CancelPaymentsSubscriptionObjectInput"}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"updateResponse"},name:{kind:"Name",value:"cancelPaymentsSubscription"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"cancelPaymentsSubscriptionInput"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"updatedObject"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"allProperties"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"value"}}]}}]}},{kind:"Field",name:{kind:"Name",value:"userErrors"}}]}}]}}]},es=function(e){var t=Object(i.jsx)(_o.a,{message:"universalSidebar.crmObjectActionsDropdown.subscriptions.SubscriptionCancellationModal.confirmCancel"});return Object(i.jsx)(Ko.a,Object.assign({},e,{"data-unit-test":"confirm-cancel-subscription-button",children:t}))},ts=function(e){var t=e.objectId,n=e.onClose,a=Object(r.useState)(!1),o=Object(ne.a)(a,2),s=o[0],c=o[1],d=Object(r.useContext)(Ho.a).primaryDisplayLabel,l=Object(r.useCallback)(function(){Object(Mo.a)({titleKey:"universalSidebar.crmObjectActionsDropdown.subscriptions.SubscriptionCancellationModal.errorCancelingTitle",messageKey:"universalSidebar.crmObjectActionsDropdown.subscriptions.SubscriptionCancellationModal.errorCancelingMessage",type:"danger",mutationFailed:!0});n()},[n]),u=Object(Ri.useMutation)($o,{onError:l}),m=Object(ne.a)(u,2),b=m[0],p=m[1],j=p.loading,k=p.error,f=p.data,v=Object(r.useCallback)(function(e){var t=e.target.checked;c(t)},[]),O=Pt()(["updateResponse","userErrors"],f),y=O&&O.length,g=Object(r.useCallback)(function(){b({variables:{cancelPaymentsSubscriptionInput:{objectId:parseInt(t,10)}},update:function(e,t){var a=Pt()(["data","updateResponse","userErrors"],t);if(a&&a.length)l();else{Object(Mo.a)({titleKey:"universalSidebar.crmObjectActionsDropdown.subscriptions.SubscriptionCancellationModal.successfullyCanceledTitle",messageKey:"universalSidebar.crmObjectActionsDropdown.subscriptions.SubscriptionCancellationModal.successfullyCanceledMessage"});n()}}})},[l,b,t,n]);return Object(i.jsx)(Bo.a,{"data-selenium-test":"subscription-cancellation-modal",ConfirmButton:es,confirmButtonProps:{disabled:!s,loading:j,failed:!!k||y},description:Object(i.jsxs)("div",{children:[Object(i.jsx)(M.a,{message:"universalSidebar.crmObjectActionsDropdown.subscriptions.SubscriptionCancellationModal.body",options:{objectLabel:d}}),Object(i.jsx)(Xo.a,{"data-selenium-test":"confirm-cancellation-checkbox",onChange:v,children:Object(i.jsx)(_o.a,{message:"universalSidebar.crmObjectActionsDropdown.subscriptions.SubscriptionCancellationModal.confirmationText"})})]}),confirmUse:"danger",message:Object(i.jsx)(_o.a,{message:"universalSidebar.crmObjectActionsDropdown.subscriptions.SubscriptionCancellationModal.title"}),rejectLabel:Object(i.jsx)(_o.a,{message:"universalSidebar.crmObjectActionsDropdown.subscriptions.SubscriptionCancellationModal.cancel"}),size:"auto",use:"danger",onConfirm:g,onReject:n})};ts.propTypes={objectId:d.a.string.isRequired,onClose:d.a.func.isRequired};var ns=ts,as=n("rWb3"),is=n("sSdB"),rs=function(){return Object(i.jsx)(is.a,{children:Object(i.jsx)(as.a,{type:"tip",children:Object(i.jsx)(M.a,{message:"universalSidebar.permissions.noEditRecordPermissionsWarning"})})})},os=n("iu95"),ss=n("lv1D"),cs=n("cqEQ"),ds=n("sld6"),ls=n("IQ+J"),us=n("fLy5"),ms=n("XGA7"),bs=function(e){var t=e.popoverContentBody,n=e.isEditing,a=e.setIsEditing,o=e.onSave,s=e.onClose,c=Object(r.useCallback)(function(e){var t=e.target.value;return a(t)},[a]),d=Object(r.useCallback)(function(e){var t=e.keyCode,n=e.which;(t||n)===ls.a&&o()},[o]);return Object(i.jsx)(ms.a,{open:n,onOpenChange:c,onKeyPress:d,placement:"bottom left",content:{body:Object(i.jsx)("div",{children:t}),footer:Object(i.jsxs)(us.a,{children:[Object(i.jsx)(P.a,{onClick:o,size:"small",use:"tertiary",children:Object(i.jsx)(_o.a,{message:"customerDataSidebar.highlight.save"})}),Object(i.jsx)(P.a,{onClick:s,size:"small",use:"tertiary-light",children:Object(i.jsx)(_o.a,{message:"customerDataSidebar.highlight.cancel"})})]})},children:Object(i.jsx)(_.a,{"data-selenium-test":"highlight-editor-icon",className:"m-left-1 pointer align-center",name:"edit",onClick:function(){return a(!n)},color:A.CALYPSO,size:"xxs"})})};bs.propTypes={popoverContentBody:d.a.oneOfType([d.a.node,d.a.arrayOf(d.a.node),d.a.element,d.a.arrayOf(d.a.element)]).isRequired,onSave:d.a.func.isRequired,onClose:d.a.func.isRequired,isEditing:d.a.bool.isRequired,setIsEditing:d.a.func.isRequired};var ps=bs,js=function(e){var t=e.primaryDisplayValue,n=e.popoverContentBody,a=e.onSave,r=e.onClose,o=e.isEditing,s=e.setIsEditing,c=e.isEditable;return Object(i.jsxs)(ds.a,{align:"center",className:"p-right-3",children:[Object(i.jsx)(J.a,{grow:1,children:Object(i.jsx)(va.a,{className:"p-y-1 p-4-x m-bottom-1 m-left-4",children:t})}),c&&Object(i.jsx)(J.a,{children:Object(i.jsx)(ps,{popoverContentBody:n,isEditing:o,setIsEditing:s,onSave:a,onClose:r})})]})};js.propTypes={primaryDisplayValue:d.a.string.isRequired,popoverContentBody:d.a.oneOfType([d.a.node,d.a.arrayOf(d.a.node),d.a.element,d.a.arrayOf(d.a.element)]).isRequired,onSave:d.a.func.isRequired,onClose:d.a.func.isRequired,isEditing:d.a.bool.isRequired,setIsEditing:d.a.func.isRequired,isEditable:d.a.bool.isRequired};var ks=js,fs=function(e){var t=e.subscriptionTitle,n=e.objectId,a=e.isEditable,o=Object(r.useContext)(Lo.a).onObjectUpdate,s=Object(r.useState)(!1),c=Object(ne.a)(s,2),d=c[0],l=c[1],u=Object(r.useState)(t),m=Object(ne.a)(u,2),b=m[0],p=m[1],j=Object(r.useContext)(ss.a),k=Object(r.useCallback)(function(){"function"==typeof o&&o({objectType:On.n,objectId:n,properties:Object(Ee.Map)({name:"hs_subscription_name",value:b})})},[n,b,o]),f=Object(cs.a)({objectType:On.n,objectId:n,propertySourceInfo:j,onSuccess:k,onCompleted:function(){return l(!1)}}),v=Object(r.useCallback)(function(){f([{name:"hs_subscription_name",value:b}])},[f,b]),O=Object(i.jsx)(Ca.a,{label:Object(i.jsx)(_o.a,{message:"customerDataSidebar.highlight.subscription.namePlaceholder"}),children:Object(i.jsx)(Sa.a,{value:b,onChange:function(e){var t=e.target.value;return p(t)}})});return Object(i.jsx)(ks,{primaryDisplayValue:t,popoverContentBody:O,onSave:v,onClose:function(){return l(!1)},isEditing:d,setIsEditing:l,isEditable:a})};fs.propTypes={subscriptionTitle:d.a.string.isRequired,objectId:d.a.string.isRequired,isEditable:d.a.bool.isRequired};var vs=fs,Os=R.a.div.withConfig({displayName:"SubscriptionHighlight__StyledHighlight",componentId:"c38cfi-0"})(["border-bottom:1px solid ",";padding:24px;"],A.BATTLESHIP),ys=new Set(["ACTIVE","PAST_DUE","UNPAID"]),gs=function(e){var t=e.objectId,n=Object(r.useState)(!1),a=Object(ne.a)(n,2),o=a[0],s=a[1],c=Object(r.useContext)(_i.a),d=c.canEditSubject,l=c.readOnly,u=Object(r.useContext)(Ho.a).primaryDisplayLabel,m=Object(r.useCallback)(function(){s(!0)},[]),b=Object(r.useCallback)(function(){s(!1)},[]),p=Object(os.a)({objectType:On.n,objectId:parseInt(t,10),propertyNames:["hs_status"]}),j=p.properties,k=p.loading,f=p.error,v=function(){if(k||f||l)return null;var e=j[0].value,n=ys.has(e),a=d&&n;return Object(i.jsxs)("div",{children:[Object(i.jsx)("div",{className:"text-right",children:Object(i.jsx)(Yo.a,{disabled:a,title:d?Object(i.jsx)(_o.a,{message:"universalSidebar.crmObjectActionsDropdown.subscriptions.SubscriptionHighlight.inactiveSubscriptionCancellation"}):Object(i.jsx)(_o.a,{message:"universalSidebar.crmObjectActionsDropdown.subscriptions.SubscriptionHighlight.unauthorizedCancellation"}),"data-unit-test":"cancel-subscription-button-tooltip",children:Object(i.jsx)(P.a,{onClick:m,use:"transparent",disabled:!a,"data-unit-test":"cancel-subscription-button",children:Object(i.jsx)(_o.a,{message:"universalSidebar.crmObjectActionsDropdown.subscriptions.SubscriptionHighlight.cancelSubscription"})})})}),o&&Object(i.jsx)(ns,{objectId:t,onClose:b})]})};return Object(i.jsxs)(Os,{children:[v(),!d&&!l&&Object(i.jsx)(rs,{}),Object(i.jsx)(vs,{subscriptionTitle:u,objectId:t,isEditable:d&&!l})]})};gs.propTypes={objectId:d.a.string.isRequired};var hs=gs,Ss=n("PAZM"),Ns=R.a.div.withConfig({displayName:"UniversalSidebarHighlightWrapper__LegacyStyledHighlight",componentId:"sc-1fzimaf-0"})(["border-bottom:1px solid ",";"],A.BATTLESHIP),Cs=R.a.div.withConfig({displayName:"UniversalSidebarHighlightWrapper__PreviewStyledHighlight",componentId:"sc-1fzimaf-1"})(["border-bottom:1px solid ",";padding-bottom:24px;"],A.BATTLESHIP),Ts=function(e){var t=e.auth,n=e.HighlightComponent,a=e.objectId,o=e.objectType,s=Object(r.useContext)(_i.a),c=s.canEditSubject,d=s.canDeleteSubject,l=s.readOnly,u=Object(Lo.b)().onObjectUpdate,m=Object(r.useContext)(Xr).cardLocation,b=Object(Ss.a)();if(null===n)return null;if(o===On.n)return Object(i.jsx)(hs,{objectId:a});var p=b&&"CRM_PREVIEW"===m?Ns:Cs;return n?Object(i.jsx)(p,{"data-selenium-test":"universal-sidebar-highlight",children:Object(i.jsx)(Ti.a,{ErrorComponent:Fi,boundaryName:"UniversalSidebarHighlightWrapper_SidebarError",showRefreshAlert:!1,children:Object(i.jsx)(n,{auth:t,objectType:o,objectId:a,currentUserCanDelete:d,readOnly:l,subjectId:a,onObjectUpdate:u,isEditable:c&&!l})})}):Object(i.jsx)(Zo,{objectId:a,objectType:o})};Ts.propTypes={auth:d.a.shape({user:d.a.shape({email:d.a.string})}),HighlightComponent:d.a.elementType,objectId:d.a.string.isRequired,objectType:d.a.string.isRequired};var Is=Ts,xs=n("lWsH"),Fs=n("3zLH"),As=n("VQTc"),Ds=n("SV9y"),Rs=n("Fsj+"),Ps=n("XDj/"),Es=n("CFVt"),_s=n("uaYc"),ws=function(e){var t=e.hasErrors,n=e.hasChanges,a=e.handleSave,r=e.handleCancel,o=e.recordHref,s=e.onExternalClick;return Object(i.jsxs)(us.a,{justify:"between",className:"width-100",verticalGap:14,children:[Object(i.jsxs)(us.a,{children:[Object(i.jsx)(P.a,{disabled:t||!n,onClick:a,"data-selenium-test":"PreviewSaveBar-button-primary",use:"primary",children:Object(i.jsx)(M.a,{message:"customerDataProperties.SaveBar.save"})}),Object(i.jsx)(P.a,{disabled:t||!n,"data-selenium-test":"PreviewSaveBar-button",onClick:r,use:"tertiary-light",children:Object(i.jsx)(M.a,{message:"customerDataProperties.SaveBar.cancel"})})]}),o&&Object(i.jsx)(xa.a,{href:o,onClick:s,"data-selenium-test":"preview-footer-view-record",children:Object(i.jsx)(M.a,{message:"customerDataProperties.SaveBar.viewRecord"})})]})};ws.propTypes={hasErrors:d.a.bool.isRequired,hasChanges:d.a.bool.isRequired,handleSave:d.a.func.isRequired,handleCancel:d.a.func.isRequired,recordHref:d.a.string,onExternalClick:d.a.func.isRequired};var Ls=Object(_s.a)(ws,Es.a),qs=function(e){var t=e.objectTypeId,n=e.objectId,a=e.readOnly,r=Object(Ps.a)({objectTypeId:t,objectId:n});return a&&!r?null:Object(i.jsx)(Rs.a,{"data-selenium-test":"preview-footer-refactor",className:"p-x-4",children:Object(i.jsx)(Ls,{alwaysShowSaveBar:!0,recordHref:r,onExternalClick:pi.a})})};qs.propTypes={objectTypeId:d.a.string.isRequired,objectId:d.a.string.isRequired,readOnly:d.a.bool};var Ms=qs,Vs=n("fwDr"),Us=function(e){var t=e.children,n=e.label,a=e.objectTypeId,o=e.objectId,s=e.onClose,c=e.readOnly,d=function(){return Object(i.jsx)(As.a,{"data-selenium-test":"preview-panel-header",children:Object(i.jsx)(va.a,{children:Object(i.jsx)(Vs.a,{children:n})})})},l=function(){return Object(i.jsx)(Ms,{objectTypeId:a,objectId:o,readOnly:c})};return Object(i.jsxs)(r.Fragment,{children:[Object(i.jsx)(ha.a,{onClick:s,"data-selenium-test":"sidebar-preview-panel--close-button"}),d(),Object(i.jsx)(Ds.a,{"data-selenium-test":"preview-panel-body",children:t}),l()]})};Us.propTypes={children:d.a.node,label:d.a.node.isRequired,objectTypeId:d.a.string.isRequired,objectId:d.a.string.isRequired,onClose:d.a.func.isRequired,readOnly:d.a.bool};var Bs=Us,Hs=n("QDGf"),Ks=R.a.div.withConfig({displayName:"UniversalSidebarFooter__StyledFooter",componentId:"yf0rbo-0"})(["background:",";border-top:1px solid ",";position:sticky;bottom:0;left:0;right:0;z-index:",";"],A.GYPSUM,A.BATTLESHIP,Hs.D),Ys=function(e){var t=e.formattedChanges,n=e.hasErrors,a=e.handleSave,r=e.handleCancel,o=e.hasChanges;return Object(i.jsxs)(Ks,{className:"p-x-4","data-selenium-test":"preview-footer-refactor",children:[Object(i.jsx)(Vs.a,{className:"p-y-3",children:Object(i.jsx)(M.a,{message:"customerDataSidebar.boundedSaveBar.info",options:{changes:t}})}),Object(i.jsxs)(us.a,{className:"p-bottom-5",children:[Object(i.jsx)(P.a,{disabled:n||!o,onClick:a,"data-selenium-test":"PreviewSaveBar-button-primary",use:"primary",children:Object(i.jsx)(M.a,{message:"customerDataSidebar.boundedSaveBar.saveButtonText"})}),Object(i.jsx)(P.a,{disabled:n||!o,"data-selenium-test":"PreviewSaveBar-button",onClick:r,children:Object(i.jsx)(M.a,{message:"customerDataSidebar.boundedSaveBar.cancelButtonText"})})]})]})};Ys.propTypes={formattedChanges:d.a.string,handleCancel:d.a.func.isRequired,handleSave:d.a.func.isRequired,hasChanges:d.a.bool.isRequired,hasErrors:d.a.bool.isRequired};var zs=Object(_s.a)(Ys,Es.c),Qs=n("tPYf"),Ws=n("hsdY"),Gs=n("wun/"),Js=function(){return Object(i.jsx)(E.a,{className:"p-x-4",illustration:"keys",illustrationProps:{width:200},title:Object(i.jsx)(Gs.a,{children:Object(i.jsx)(_o.a,{message:"universalSidebar.errors.PermissionsError.title"})}),children:Object(i.jsx)("p",{children:Object(i.jsx)(_o.a,{message:"universalSidebar.errors.PermissionsError.body"})})})},Zs=n("WTz7"),Xs=function(e){var t=e.message;Object(r.useEffect)(function(){Object(Zs.b)("universal sidebar",{message:t})},[t]);return t?t.includes("message: UNAUTHORIZED")?Object(i.jsx)(Js,{}):Object(i.jsx)(Fi,{}):null};Xs.propTypes={message:d.a.string};var $s=Xs,ec=n("53i0"),tc="inline",nc="inline-no-footer",ac="panel",ic=d.a.oneOf([tc,nc,ac]),rc=n("ThQy"),oc=[xo,Fo,Io],sc=function(e){var t=e.auth,n=e.cardComponents,a=e.cardProps,o=e.HighlightComponent,s=e.objectId,c=e.objectType,d=e.onClose,l=e.readOnly,u=e.RhumbMarkerSuccess,m=e.RhumbMarkerError,b=e.use,p=t.user,j=c===G.VISIT,k=Object(r.useContext)(Xr).cardLocation,f=Object(Ri.useQuery)(Pi.a,{variables:{cardLocation:k,objectType:c,subjectId:j?-1:parseInt(s,10)},partialRefetch:!0,fetchPolicy:"cache-and-network",nextFetchPolicy:"cache-first"}),v=f.loading,O=f.error,y=f.data,g=f.refetch,h=f.updateQuery,S=y&&y.crmObject&&y.crmObject.cards,N=t.user.scopes.includes("field-level-permissions-access"),C=Object(r.useMemo)(function(){if(!S||!N)return{};var e=Object(Fs.a)(S);return Object(Fs.c)(e)},[S,N]),T=Object(r.useCallback)(function(e){return C[e]||xs.b},[C]),I=ho({objectType:c,updateQuery:h}),x=No({objectType:c,updateQuery:h}),F=Object(r.useMemo)(function(){return O?Object(i.jsxs)(r.Fragment,{children:[m,Object(i.jsx)($s,{message:O.message})]}):v?Object(i.jsx)(fo.a,{}):null},[m,O,v]),A=Object(r.useMemo)(function(){if(F||!y)return null;var e=Object(Ws.a)(c,y.crmObject),r=oc.includes(k),d=b===ac?Es.a:Es.c;return Object(i.jsx)("div",{"data-sidebar-location":k,children:Object(i.jsx)(Ho.a.Provider,{value:{definition:y.crmObject.objectTypeDefinition,objectType:c,objectId:s,primaryDisplayLabel:e},children:Object(i.jsx)(_i.a.Provider,{value:{getPropertyPermission:T,canEditSubject:Object(ec.b)(y.crmObject.userPermissions),canDeleteSubject:Object(ec.a)(y.crmObject.userPermissions),canView:Object(ec.c)(y.crmObject.userPermissions),scopes:p.scopes,readOnly:l,gates:t.gates},children:Object(i.jsx)(Sr.Provider,{value:{onCardOpenChange:I,onCardOrderChange:x},children:Object(i.jsx)(Co.a.Provider,{value:f,children:Object(i.jsxs)(rc.a.Provider,{value:d,children:[u,Object(i.jsx)(Is,{auth:t,HighlightComponent:o,objectType:c,objectId:s}),Object(i.jsx)(ko,{cards:S,draggable:r,objectId:s,cardComponents:n,objectType:c,cardLocation:k,cardProps:a,refetch:g})]})})})})})})},[o,u,t,p.scopes,n,k,a,S,y,T,I,x,F,s,c,f,l,g,b]);if(F)return F;if(b===ac)return Object(i.jsx)(Bs,{label:Object(Ws.a)(c,y.crmObject),objectTypeId:c,objectId:s,onClose:d,readOnly:l,children:A});if(b===tc)return Object(i.jsxs)(r.Fragment,{children:[A,Object(i.jsx)(zs,{})]});if(b===nc)return Object(i.jsx)(r.Fragment,{children:A});throw new Error("[UniversalSidebar]: Unrecognized 'use' prop: "+b+" (must be one of: 'inline', 'inline-no-footer', 'panel')")};sc.propTypes={auth:d.a.shape({user:d.a.shape({scopes:d.a.arrayOf(d.a.string).isRequired,user_id:d.a.number.isRequired,teams:d.a.arrayOf(d.a.shape({id:d.a.number.isRequired})).isRequired}).isRequired,gates:d.a.arrayOf(d.a.string).isRequired,portal:d.a.object}),cardComponents:d.a.object,cardProps:d.a.object,HighlightComponent:d.a.elementType,objectType:Qs.b.isRequired,objectId:d.a.string.isRequired,onClose:d.a.func.isRequired,readOnly:d.a.bool,use:ic.isRequired,RhumbMarkerSuccess:d.a.node,RhumbMarkerError:d.a.node};var cc=sc,dc=n("pw7o"),lc=R()(dc.a).withConfig({displayName:"StyledUniversalSidebarPanel",componentId:"sc-1tgtgxw-0"})(["&&&{min-width:316px;width:25vw !important;max-width:477px;z-index:",";@media screen and (min-width:1920px){min-width:477px;}}"],Hs.nb),uc=function(e){var t=e.children;return e.use===ac?Object(i.jsx)(r.Fragment,{children:t}):Object(i.jsx)(lc,{"data-selenium-test":"sidebar-preview-panel",children:t})};uc.propTypes={children:d.a.node.isRequired,use:ic.isRequired};var mc=uc,bc=n("TMcE"),pc=Object(r.createContext)(null);pc.Provider.propTypes={value:d.a.func};var jc=n("Ah6I"),kc=function(e){Object(F.a)(t,e);function t(){Object(C.a)(this,t);return Object(I.a)(this,Object(x.a)(t).apply(this,arguments))}Object(T.a)(t,[{key:"render",value:function(){return this.props.children}}]);return t}(r.Component),fc=vt()(function(e){return e()(kc)}),vc=n("xlGk"),Oc=(n("DNdP"),n("MeD8")),yc=function(e){var t=e.objectId,n=e.objectType;return"/contacts/"+ke.a.get()+"/"+n.toLowerCase()+"/"+t+"/properties"},gc="0",hc=[Io],Sc=function(e){var t=e.data,n=t.cardId,a=t.label,o=e.objectId,s=e.objectType,c=e.onEditPropertiesClick,d=Object(r.useContext)(Ho.a).definition.singularForm,l=Object(r.useContext)(Xr),u=l.cardLocation,m=l.parentCardLocation;if(n!==gc)return Object(i.jsx)("span",{"data-selenium-test":"properties-card-title",className:"word-break-break-word",children:a});var b,p,j=null;switch(On.j[s]||s){case G.CONTACT:j="customerDataSidebar.aboutCard.title.CONTACT";b="customerDataSidebar.aboutCard.title.tooltip.text.CONTACT";break;case G.COMPANY:j="customerDataSidebar.aboutCard.title.COMPANY";b="customerDataSidebar.aboutCard.title.tooltip.text.COMPANY";break;case G.DEAL:j="customerDataSidebar.aboutCard.title.DEAL";b="customerDataSidebar.aboutCard.title.tooltip.text.DEAL";break;case G.TICKET:j="customerDataSidebar.aboutCard.title.TICKET";b="customerDataSidebar.aboutCard.title.tooltip.text.TICKET";break;case G.FEEDBACK_SUBMISSION:j="customerDataSidebar.aboutCard.title.FEEDBACK_SUBMISSION";break;case G.VISIT:j="customerDataSidebar.aboutCard.title.VISIT";break;case On.n:j="customerDataSidebar.aboutCard.title.SUBSCRIPTION";break;default:j="universalSidebar.cards.PropertiesCardContent.propertiesCardTitle.label";b="customerDataSidebar.aboutCard.title.tooltip.text.DEFAULT";p={singularForm:d}}var k=hc.includes(u)||hc.includes(m),f=function(){return Object(i.jsx)(Oc.a,{className:"m-x-1",title:Object(i.jsxs)(r.Fragment,{children:[Object(i.jsx)(_o.a,{message:b,options:p}),Object(i.jsx)("br",{}),Object(i.jsx)(xa.a,{href:yc({objectId:o,objectType:s}),external:!0,onClick:function(){c(s)},children:Object(i.jsx)(_o.a,{message:"customerDataSidebar.aboutCard.title.tooltip.link"})})]}),tooltipPlacement:"top",tooltipProps:{use:"longform"}})};return Object(i.jsxs)("span",{"data-selenium-test":"properties-card-title",className:"word-break-break-word",children:[Object(i.jsx)(_o.a,{message:j,options:p}),k&&f()]})};Sc.propTypes={data:d.a.object.isRequired,objectId:d.a.string,objectType:d.a.string,onEditPropertiesClick:d.a.func};var Nc=Sc,Cc=n("dI04"),Tc=n("kJ/w"),Ic=n("SZxU"),xc=n("7GUQ"),Fc=function(e){var t=e.data,n=e.objectType,a=Object(r.useCallback)(function(){return t.associationDefinitions[0].toObjectTypeDefinition.pluralForm},[t.associationDefinitions]),o=Object(_i.b)().gates,s=Object(Tc.a)(Ic.a,o.includes(Ic.a)),c=Object(xc.a)(),d=t.associationDefinitions[0].toObjectTypeId,l=function(){var e=t.count.edges.length,a=Object(Ao.a)(n)&&d===On.k[G.COMPANY],i=n===G.CONTACT&&d===On.k[G.COMPANY],r=n===G.TICKET&&d===On.k[G.COMPANY],o=n===G.DEAL&&d===On.k[G.COMPANY];return!a||s&&i||c&&(o||r)?e:e>0?1:0},u=t.count.pageInfo.hasNextPage,m=function(){switch(d){case On.k[G.CONTACT]:return u?"universalSidebar.cards.AssociatedObjectsCard.title.CONTACT.estimate":"universalSidebar.cards.AssociatedObjectsCard.title.CONTACT.exact";case On.k[G.COMPANY]:return s&&n===G.CONTACT||c&&(n===G.TICKET||n===G.DEAL)?u?"universalSidebar.cards.AssociatedObjectsCard.title.COMPANY_WITH_PLURAL.estimate":"universalSidebar.cards.AssociatedObjectsCard.title.COMPANY_WITH_PLURAL.exact":u?"universalSidebar.cards.AssociatedObjectsCard.title.COMPANY.estimate":"universalSidebar.cards.AssociatedObjectsCard.title.COMPANY.exact";case On.k[G.DEAL]:return u?"universalSidebar.cards.AssociatedObjectsCard.title.DEAL.estimate":"universalSidebar.cards.AssociatedObjectsCard.title.DEAL.exact";case On.k[G.TICKET]:return u?"universalSidebar.cards.AssociatedObjectsCard.title.TICKET.estimate":"universalSidebar.cards.AssociatedObjectsCard.title.TICKET.exact";case On.k[G.LINE_ITEM]:return u?"universalSidebar.cards.AssociatedObjectsCard.title.LINE_ITEM.estimate":"universalSidebar.cards.AssociatedObjectsCard.title.LINE_ITEM.exact";case On.n:return u?"universalSidebar.cards.AssociatedObjectsCard.title.SUBSCRIPTION.estimate":"universalSidebar.cards.AssociatedObjectsCard.title.SUBSCRIPTION.exact";default:return u?"universalSidebar.cards.AssociatedObjectsCard.title.GENERIC.estimate":"universalSidebar.cards.AssociatedObjectsCard.title.GENERIC.exact"}}();return Object(i.jsx)(_o.a,{message:m,options:{count:l(),label:a()}})};Fc.propTypes={data:d.a.object.isRequired,objectType:Qs.b.isRequired};var Ac=Fc,Dc={id:"57875f33cbd574c6f4f1769b268f3c63e60af26337ac94c452a31208041d87ce",kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"fetchAssociationPermissions"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"objectTypeId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"objectTypePermissions"},arguments:[{kind:"Argument",name:{kind:"Name",value:"objectTypeId"},value:{kind:"Variable",name:{kind:"Name",value:"objectTypeId"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"currentUserCanCreate"}}]}}]}}]},Rc=n("mpvR"),Pc=n("muUi"),Ec=n("oSHU"),_c=n("VtLd"),wc="ASSOCIATION_LIMIT_EXCEEDED",Lc="10000",qc=/associationType ([A-Z]+_TO_[A-Z]+)/;function Mc(e){var t=e.limitExceededError.match(qc);switch(t&&t[1]){case _c.a:return"customerDataObjectsUiComponents.Association.associationFailedError.associationLimitExceeded.COMPANY_TO_CONTACT";case _c.h:return"customerDataObjectsUiComponents.Association.associationFailedError.associationLimitExceeded.DEAL_TO_CONTACT";case _c.k:return"customerDataObjectsUiComponents.Association.associationFailedError.associationLimitExceeded.TICKET_TO_CONTACT";case _c.e:return"customerDataObjectsUiComponents.Association.associationFailedError.associationLimitExceeded.CONTACT_TO_DEAL";case _c.b:return"customerDataObjectsUiComponents.Association.associationFailedError.associationLimitExceeded.COMPANY_TO_DEAL";case _c.l:return"customerDataObjectsUiComponents.Association.associationFailedError.associationLimitExceeded.TICKET_TO_DEAL";case _c.f:return"customerDataObjectsUiComponents.Association.associationFailedError.associationLimitExceeded.CONTACT_TO_TICKET";case _c.c:return"customerDataObjectsUiComponents.Association.associationFailedError.associationLimitExceeded.COMPANY_TO_TICKET";case _c.j:return"customerDataObjectsUiComponents.Association.associationFailedError.associationLimitExceeded.DEAL_TO_TICKET";default:return"customerDataObjectsUiComponents.Association.associationFailedError.associationLimitExceeded.generic"}}function Vc(e){var t=e.errorJSON;t&&t.errorTokens&&t.errorTokens[wc]&&t.errorTokens[wc][0]?Ec.a.addAlert({message:Object(i.jsx)(_o.a,{message:Mc({limitExceededError:t.errorTokens[wc][0]}),options:{associationLimit:L.a.formatNumber(Lc)}}),type:"warning","data-alert-type":"warning"}):Ec.a.addAlert({message:Object(i.jsx)(_o.a,{message:"customerDataObjectsUiComponents.Association.associationFailedError.generic"}),type:"warning","data-alert-type":"warning"})}var Uc=n("f0FW"),Bc=n("EK0Z"),Hc=fe.associate,Kc=600,Yc=68,zc=function(e){Object(F.a)(t,e);function t(e){var n;Object(C.a)(this,t);(n=Object(I.a)(this,Object(x.a)(t).call(this,e))).state={iframeReady:!1,iframeInitError:!1};n.handleAssociatorMessage=n.handleAssociatorMessage.bind(Object(Ma.a)(n));n.handleIframeReady=n.handleIframeReady.bind(Object(Ma.a)(n));n.handleIframeInitError=n.handleIframeInitError.bind(Object(Ma.a)(n));return n}Object(T.a)(t,[{key:"componentDidUpdate",value:function(){if(this.props.open&&this.state.iframeInitError){Ec.a.addAlert({message:L.a.text("crm_components.AssociationDialog.iframeInitError.body"),titleText:L.a.text("crm_components.AssociationDialog.iframeInitError.title"),type:"danger"});this.props.onReject()}}},{key:"componentWillUnmount",value:function(){this._isMounted=!1}},{key:"getIframeHeight",value:function(){return window.innerHeight-Yc}},{key:"getPanelProps",value:function(){var e=this.props,t=e.associationObjectType,n=e.objectType,a=e.subjectId,i=e.headerText,r=e.bodyText,o=e.additionalRequiredProperties,s=e.additionalProperties,c=e.ignoreDefaultCreatorProperties;return{objectType:n,associationObjectType:t,subjectId:a,headerText:i,bodyText:r,additionalProperties:Ee.List.isList(s)?s.toJS():s,additionalRequiredProperties:Ee.List.isList(o)?o.toJS():o,ignoreDefaultCreatorProperties:c}}},{key:"handleIframeReady",value:function(){this.setState({iframeReady:!0})}},{key:"handleIframeInitError",value:function(){this.setState({iframeInitError:!0})}},{key:"handleAssociatorMessage",value:function(e){var t=e.payload;if(t.type===Hc){var n=this.props,a=n.onConfirm,i=n.onReject,r=t.close,o=t.error,s=t.errorJSON,c=t.errorStatus,d=t.createdObjectId,l=t.idsToDisassociate,u=t.idsToAssociate,m=t.fromObjectType,b=t.toObjectType,p=t.subjectId;s&&Vc({errorJSON:s});r?i():o&&!d?i(o,s,c):a(Object(Ee.Record)({createdObjectId:d,error:o,idsToDisassociate:l,idsToAssociate:u,fromObjectType:m,toObjectType:b,subjectId:p},"ObjectAssociatorResult")())}}},{key:"getHeaderText",value:function(){return this.props.headerText||L.a.text("crm_components.AssociationDialog.title",{associationObjectName:Object(Uc.b)(this.props.associationObjectType),subjectObjectName:Object(Uc.a)(this.props.objectType)})}},{key:"render",value:function(){return Object(i.jsxs)(r.Fragment,{children:[Object(i.jsx)(nt,{}),Object(i.jsx)(Bc.a,{preload:this.props.preload,height:this.getIframeHeight(),title:this.getHeaderText(),use:this.props.use,width:Kc,src:Fe("associate"),onMessage:this.handleAssociatorMessage,appName:this.props.sourceApp,show:this.props.open&&!this.state.iframeInitError,embeddedPassthruProps:this.getPanelProps(),iframePassthruProps:{"data-iframe-ready":this.state.iframeReady,"data-host-associate-panel-type":this.props.associationObjectType,"data-selenium-test":"associate-panel-iframe"},onReady:this.handleIframeReady,onInitError:this.handleIframeInitError,onClose:pi.a})]})}}]);return t}(Pc.a);zc.propTypes={associationObjectType:d.a.oneOf([G.CONTACT,G.COMPANY,G.DEAL,G.TICKET]).isRequired,objectType:d.a.oneOf([G.CONTACT,G.COMPANY,G.DEAL,G.TICKET]).isRequired,sourceApp:d.a.string.isRequired,subjectId:d.a.string.isRequired,headerText:d.a.string,bodyText:d.a.string,additionalRequiredProperties:d.a.oneOfType([d.a.arrayOf(d.a.string),be.a.listOf(d.a.string)]),additionalProperties:d.a.oneOfType([d.a.arrayOf(d.a.string),be.a.listOf(d.a.string)]),ignoreDefaultCreatorProperties:d.a.bool,onConfirm:d.a.func,onReject:d.a.func,open:d.a.bool,preload:d.a.bool,use:d.a.string};zc.defaultProps={onConfirm:pi.a,onReject:pi.a,additionalRequiredProperties:Object(Ee.List)(),additionalProperties:Object(Ee.List)(),ignoreDefaultCreatorProperties:!1,use:"sidebar",preload:!1};var Qc=zc,Wc=n("ldyT"),Gc=function(e){var t=e.associationObjectTypeId,n=e.associationPrimaryDisplayLabel,a=e.canEditAssociation,o=e.objectType,s=e.objectId,c=e.onConfirm,d=e.onReject,l=e.hasExistingAssociations,u=Object(r.useContext)(_i.a).readOnly,m=Object(r.useContext)(pc),b=Object(r.useContext)(uo).sourceApp,p=Object(r.useContext)(Lo.a).onObjectCreate,j=Object(r.useState)(!1),k=Object(ne.a)(j,2),f=k[0],v=k[1],O=On.j[t],y=Object(r.useCallback)(function(){v(!0)},[v]),g=Object(Wc.a)(Ic.a,!0),h=Object(xc.b)(),S=function(e){switch(e){case G.CONTACT:return"universalSidebar.associationCreated.CONTACT";case G.COMPANY:return"universalSidebar.associationCreated.COMPANY";case G.DEAL:return"universalSidebar.associationCreated.DEAL";case G.TICKET:return"universalSidebar.associationCreated.TICKET";default:return"universalSidebar.associationCreated.generic"}},N=Object(r.useCallback)(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.createdObjectId,a=e.addAnother;a||v(!1);if(t&&"function"==typeof p){p({objectId:t,associationType:O,addAnother:a});Object(Rc.a)({message:Object(i.jsx)(M.a,{message:S(O),options:{primaryDisplayLabel:n}})})}else Object(Rc.a)({message:Object(i.jsx)(M.a,{message:"universalSidebar.associationsUpdated"})});"function"==typeof c&&c()},[p,c,O,n]),C=Object(r.useCallback)(function(){v(!1);"function"==typeof d&&d()},[d,v]),T=function(){if(O!==G.COMPANY||!l)return!1;switch(o){case G.CONTACT:return!g;case G.DEAL:case G.TICKET:return!h;default:return!0}},I=function(){var e=Object(Uc.a)(o);return u?null:a?T()?Object(i.jsx)(_o.a,{message:"universalSidebar.cards.AssociateObjectButton.tooltip.singleAssociationLimit.COMPANY",options:{subjectObjectName:e}}):null:Object(i.jsx)(_o.a,{message:"universalSidebar.cards.AssociateObjectButton.tooltip.permissionTooltipText",options:{subjectObjectName:e}})},x=function(){var e=null!=m?m:Qc;return Object(i.jsx)(e,{sourceApp:b,objectType:o,subjectId:s,onConfirm:N,onReject:C,associationObjectType:O,open:f})},F=!a||u||T(),A=I();return Object(i.jsxs)(r.Fragment,{children:[Object(i.jsx)(Yo.a,{disabled:!A,placement:"left",title:A,children:Object(i.jsx)(P.a,{disabled:F,onClick:y,use:"link","data-selenium-test":"add-object-button",children:Object(i.jsx)(_o.a,{message:"customerDataSidebar.associateObjectButton"})})}),x()]})};Gc.propTypes={associationObjectTypeId:d.a.string.isRequired,associationPrimaryDisplayLabel:d.a.string,canEditAssociation:d.a.bool,objectType:d.a.oneOf([G.CONTACT,G.COMPANY,G.DEAL,G.TICKET]).isRequired,objectId:d.a.string.isRequired,onConfirm:d.a.func,onReject:d.a.func,hasExistingAssociations:d.a.bool};var Jc=Gc,Zc="IFrame initialization failed",Xc=function(e){return Object(Aa.getFullUrl)("app")+"/object-builder/"+ke.a.get()+"/"+encodeURIComponent(e)+"/embed"},$c={id:"object-builder-ui"};function ed(e){var t=e.objectTypeId,n=e.associationTypeId,a=e.associationCategory,o=e.defaultAssociationObjectId,s=e.defaultAssociationObjectTypeId,c=e.onConfirm,d=e.onReject,l=Object(r.useCallback)(function(e){var t=e.associatedObjectIds,n=e.createdObjectId,a=e.addAnother,i=e.error;n?c&&c({createdObjectId:n,addAnother:a}):t?c&&c({associatedObjectIds:t}):d&&d({error:i})},[c,d]),u=Object(r.useCallback)(function(){d({error:new Error(Zc),fatal:!0})},[d]),m=Object(r.useContext)(uo).sourceApp;return Object(i.jsx)(Bc.a,{appInfo:{defaultAssociation:{objectId:o,objectTypeId:s},associationTypeId:n,associationCategory:a},appName:m,height:"100%",iframePassthruProps:$c,onClose:l,onInitError:u,onMessage:pi.a,onReady:pi.a,onReadyError:u,show:!0,src:Xc(t),width:600,use:"panel"})}ed.propTypes={objectTypeId:ro.a.isRequired,associationTypeId:d.a.number.isRequired,associationCategory:d.a.string.isRequired,defaultAssociationObjectId:d.a.string.isRequired,defaultAssociationObjectTypeId:ro.a.isRequired,onConfirm:d.a.func,onReject:d.a.func};var td=ed,nd=function(e){var t=e.associationObjectTypeId,n=e.associationPrimaryDisplayLabel,a=e.associationTypeId,o=e.associationCategory,s=e.canEditAssociation,c=e.onConfirm,d=e.onReject,l=Object(r.useState)(!1),u=Object(ne.a)(l,2),m=u[0],b=u[1],p=Object(r.useContext)(_i.a).readOnly,j=Object(r.useContext)(Lo.a).onObjectCreate,k=Object(r.useContext)(Ho.a),f=k.objectId,v=k.objectType,O=On.k[v]||v,y=function(e){switch(e){case G.CONTACT:return"universalSidebar.associationCreated.CONTACT";case G.COMPANY:return"universalSidebar.associationCreated.COMPANY";case G.DEAL:return"universalSidebar.associationCreated.DEAL";case G.TICKET:return"universalSidebar.associationCreated.TICKET";default:return"universalSidebar.associationCreated.generic"}},g=Object(r.useCallback)(function(){b(!0);po.b.log("recordInteractions",{action:"open record creator modal",objectType:On.j[t]?On.j[t]:t})},[b,t]),h=Object(r.useCallback)(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=e.associatedObjectIds,r=e.createdObjectId,o=e.addAnother;o||b(!1);if(a){Object(Rc.a)({message:Object(i.jsx)(M.a,{message:"universalSidebar.associationsUpdated"}),type:"success"});po.b.log("addAssociation",{toObjectTypeId:t,fromObjectTypeId:O,action:"associated-existing"})}else if(r){po.b.log("createRecord",{type:"custom",objectTypeId:t});po.b.log("addAssociation",{toObjectTypeId:t,fromObjectTypeId:O,action:"associated-new"});var s=On.j[t]||t;"function"==typeof j&&j({objectId:r,associationType:s,addAnother:o});Object(Rc.a)({message:Object(i.jsx)(M.a,{message:y(s),options:{primaryDisplayLabel:n}})})}"function"==typeof c&&c({createdObjectId:r})},[c,t,O,j,n]),S=Object(r.useCallback)(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.error,n=e.fatal;if(t){var a,r=t.responseJSON;a=t.message===Zc?Object(i.jsx)(_o.a,{message:"customerDataSidebar.buildObjectButton.errorMessageInitFailed"}):r&&r.message?Object(i.jsx)(_o.a,{message:"customerDataSidebar.buildObjectButton.errorMessage",options:{responseMessage:r&&r.message}}):Object(i.jsx)(_o.a,{message:"customerDataSidebar.buildObjectButton.errorMessageUnknown"});Object(Rc.a)({message:a,type:"danger"})}t&&!n||b(!1);"function"==typeof d&&d({error:t})},[d,b]),N=function(){return m?Object(i.jsx)(td,{objectTypeId:t,associationTypeId:a,associationCategory:o,defaultAssociationObjectId:f,defaultAssociationObjectTypeId:O,onConfirm:h,onReject:S}):null},C=function(){if(p)return null;if(!s){var e=Object(Uc.a)(v);return Object(i.jsx)(_o.a,{message:"universalSidebar.cards.AssociateObjectButton.tooltip.permissionTooltipText",options:{subjectObjectName:e}})}return null},T=!s||p;return Object(i.jsxs)(r.Fragment,{children:[Object(i.jsx)(Yo.a,{disabled:!T,placement:"left",title:C(),children:Object(i.jsx)(P.a,{disabled:T,onClick:g,use:"link","data-selenium-test":"build-object-button",children:Object(i.jsx)(_o.a,{message:"customerDataSidebar.associateObjectButton"})})}),N()]})};nd.propTypes={associationObjectTypeId:d.a.string.isRequired,associationPrimaryDisplayLabel:d.a.string,associationTypeId:d.a.number.isRequired,associationCategory:d.a.string.isRequired,canEditAssociation:d.a.bool,onConfirm:d.a.func,onReject:d.a.func};var ad=nd,id=function(e){var t=e.data,n=e.objectType,a=e.objectId,o=t.cardId,s=Object(r.useContext)(Co.a).client,c=Object(r.useContext)(_i.a).canEditSubject,d=Object(r.useCallback)(function(){s.query({fetchPolicy:"network-only",query:Pi.b,variables:{objectType:n,subjectId:+a,cardId:o}})},[s,n,a,o]),l=Object(bc.b)(),u=Object(r.useContext)(_i.a).readOnly,m=Object(Ri.useQuery)(Dc,{partialRefetch:!0,fetchPolicy:"cache-and-network",nextFetchPolicy:"cache-first",variables:{objectTypeId:t.associationDefinitions[0].toObjectTypeId}});if(m.loading||u||l)return null;m.error&&bo.a.captureMessage("FETCH_ASSOCIATION_PERMISSIONS error",{extra:m.error});var b=t.associationDefinitions[0],p=b.toObjectTypeId,j=b.associationTypeId,k=b.associationCategory,f=b.toObjectTypeDefinition.singularForm,v=Pt()(["data","objectTypePermissions","currentUserCanCreate"],m),O=function(){return Boolean(c||v)};return Object(Ao.a)(n)&&Object(Ao.a)(p)?Object(i.jsx)(Jc,{associationObjectTypeId:p,associationPrimaryDisplayLabel:f,objectType:n,objectId:a,onConfirm:d,hasExistingAssociations:!!t.associatedObjects.edges.length,canEditAssociation:O()}):Object(i.jsx)(ad,{associationObjectTypeId:p,associationTypeId:j,associationCategory:k,associationPrimaryDisplayLabel:f,onConfirm:d,canEditAssociation:O()})};id.propTypes={data:d.a.shape({cardId:d.a.string.isRequired,associationDefinitions:d.a.arrayOf(d.a.shape({toObjectTypeId:d.a.string.isRequired,toObjectTypeDefinition:d.a.shape({pluralForm:d.a.string,singularForm:d.a.string}),associationTypeId:d.a.number.isRequired,associationCategory:d.a.string.isRequired})),associatedObjects:d.a.shape({edges:d.a.array.isRequired}).isRequired}).isRequired,objectType:Qs.b.isRequired,objectId:d.a.string.isRequired};var rd,od=id,sd=n("lakq"),cd=(rd={},Object(ae.a)(rd,sd.h,{Content:vc.default,Title:Nc}),Object(ae.a)(rd,sd.a,{Content:Cc.default,Title:Ac,Actions:od}),rd),dd=[On.g],ld=function(e){po.b.log("previewSidebarObject",{action:"preview record",objectTypeId:e})},ud=function(e){var t=e.AddObjectComponent,n=e.apolloClient,a=void 0===n?sa.a:n,o=e.auth,c=e.cardComponents,d=void 0===c?cd:c,l=e.cardLocation,u=e.cardProps,m=e.DragDropContext,b=void 0===m?jc.a:m,p=e.HighlightComponent,j=e.isEmbedded,k=void 0!==j&&j,f=e.objectType,v=e.onClose,O=void 0===v?pi.a:v,y=e.onAssociationUpdate,g=void 0===y?pi.a:y,h=e.onObjectCreate,S=void 0===h?pi.a:h,N=e.onObjectDelete,C=void 0===N?pi.a:N,T=e.onObjectUpdate,I=void 0===T?pi.a:T,x=e.previewCardLocation,F=void 0===x?l:x,A=e.PreviewHighlightComponent,D=void 0===A?p:A,R=e.readOnly,P=void 0!==R&&R,E=e.sourceApp,_=e.subjectId,w=e.use,L=void 0===w?tc:w,q=e.RhumbMarkerSuccess,M=e.RhumbMarkerError,V=Object(r.useState)(null),U=Object(ne.a)(V,2),B=U[0],H=U[1],K=Object(r.useCallback)(function(){O();H(null)},[O,H]),Y=Object(r.useCallback)(function(e){var t=s()("objectTypeId",e);ld(t);H(e)},[H]);Object(r.useEffect)(function(){L===ac&&Y(Object(wo.b)({objectTypeId:f,objectId:_}))},[Y,f,_,L]);if(!_||!f||!o)return null;E||P||Di.a.warn({message:"No source app provided for an editable sidebar. Please pass 'sourceApp={YOUR_APP}' or 'readOnly={true}'.",key:"UniversalSidebar::render"});var z=s()("objectId",B),Q=s()("objectTypeId",B),W=On.j[Q]||Q,G=fc(b);return Object(i.jsx)(Ti.a,{ErrorComponent:Fi,boundaryName:"UniversalSidebar_SidebarError",children:Object(i.jsx)(Ri.ApolloProvider,{client:a,children:Object(i.jsx)(G,{DragDropContext:b,children:Object(i.jsx)(pc.Provider,{value:t,children:Object(i.jsx)(bc.a.Provider,{value:!!k,children:Object(i.jsx)(ss.a.Provider,{value:{propertySource:E,propertySourceId:o.user.email},children:Object(i.jsx)(uo.Provider,{value:{sourceApp:E},children:Object(i.jsx)(wo.a.Provider,{value:{setPreviewConfig:Y,closeSidebar:K,fromObjectId:_,fromObjectType:f},children:Object(i.jsx)(Lo.a.Provider,{value:{onAssociationUpdate:g,onObjectCreate:S,onObjectDelete:C,onObjectUpdate:I},children:Object(i.jsxs)(Xr.Provider,{value:{cardLocation:l},children:[z&&W&&Object(i.jsx)(Xr.Provider,{value:{cardLocation:F,parentCardLocation:l},children:Object(i.jsx)(mc,{use:L,children:Object(i.jsx)(cc,{auth:o,cardComponents:d,cardProps:u,HighlightComponent:D,objectType:W,objectId:z,onClose:K,readOnly:P||dd.includes(W),RhumbMarkerSuccess:q,RhumbMarkerError:M,use:ac})})}),L!==ac?Object(i.jsx)(cc,{auth:o,cardComponents:d,cardProps:u,HighlightComponent:p,objectType:f,objectId:_,onClose:O,readOnly:P||dd.includes(f),RhumbMarkerSuccess:q,RhumbMarkerError:M,use:L}):null]})})})})})})})})})})};ud.propTypes={AddObjectComponent:d.a.elementType,apolloClient:d.a.instanceOf(Ri.ApolloClient).isRequired,auth:d.a.object.isRequired,cardComponents:d.a.object,cardLocation:d.a.string.isRequired,cardProps:d.a.object,DragDropContext:d.a.func,HighlightComponent:d.a.elementType,isEmbedded:d.a.bool,objectType:d.a.string.isRequired,onClose:d.a.func,onAssociationUpdate:d.a.func,onObjectCreate:d.a.func,onObjectDelete:d.a.func,onObjectUpdate:d.a.func,previewCardLocation:d.a.string,PreviewHighlightComponent:d.a.elementType,readOnly:d.a.bool,sourceApp:d.a.string,subjectId:d.a.string.isRequired,use:ic,RhumbMarkerSuccess:d.a.node,RhumbMarkerError:d.a.node};var md=ud,bd=n("1RCs"),pd=function(e){var t=e.createDisabled,n=e.isUngatedForAssociatePanel,a=e.onCreateClick;return n?null:[{disabled:t,onClick:a,children:Object(i.jsx)(Yo.a,{disabled:!t,title:Object(i.jsx)(_o.a,{message:"conversations-inbox-ui.crm-integration.permissionsTooltip"}),children:Object(i.jsx)(M.a,{message:"conversations-inbox-ui.crm-integration.TicketsCardContent.createTicketButton"})}),key:"tickets-create"}]},jd=function(e){var t=e.createDisabled,n=e.isUngatedForAssociatePanel,a=e.onCreateClick;return n?null:[{disabled:t,onClick:a,children:Object(i.jsx)(Yo.a,{disabled:!t,title:Object(i.jsx)(_o.a,{message:"conversations-inbox-ui.crm-integration.permissionsTooltip"}),children:Object(i.jsx)(M.a,{message:"conversations-inbox-ui.crm-integration.DealsCard.createDealButton"})}),key:"deals-create"}]},kd=function(e){var t,n=e.associatedTicketIds,a=e.auth,i=e.canEditCurrentContact,r=e.conversationId,o=e.handleEditPropertySettingsClicked,s=e.hasTicketsWriteAccess,c=e.hasDealsWriteAccess,d=e.isUngatedForAssociatePanel,l=e.isUngatedForReadV2Associations,u=e.openCreateTicketModal,m=e.openCreateDealModal,b=e.onTicketDisassociationSuccess,p=e.subjectId,j=e.threadId,k=e.threadTicket,f=e.vid,v=pd({createDisabled:!(i||s),isUngatedForAssociatePanel:d,onCreateClick:u}),O=jd({createDisabled:!(i||c),isUngatedForAssociatePanel:d,onCreateClick:m});return t={},Object(ae.a)(t,sd.b,{threadId:j}),Object(ae.a)(t,sd.c,{cardButtons:v,conversationId:""+r,threadId:""+j,threadTicket:k,associatedTicketIds:n}),Object(ae.a)(t,sd.d,{auth:a,cardButtons:O,conversationId:""+j,threadTicket:k,associatedTicketIds:n,sourceApp:bd.d}),Object(ae.a)(t,sd.g,{currentThreadId:j,vid:f}),Object(ae.a)(t,sd.i,{appName:"conversations",chatThreadId:j,contactVid:p}),Object(ae.a)(t,sd.e,{subjectId:""+j,threadId:""+j,conversationId:l?""+r:""+j,contactId:p,threadTicket:k,createDisabled:!(i||s),onCreateClick:u,onDisassociationSuccess:b,shouldDisassociateConversation:!0,shouldDisassociateRecord:!1}),Object(ae.a)(t,sd.j,{threadId:j}),Object(ae.a)(t,sd.h,{onEditPropertiesClick:o}),t},fd=n("KbK+"),vd=n("qgaz"),Od=n("7lIj"),yd=n("DpC1"),gd=function(e,t){return t.contact},hd=Object(At.a)([gd,vd.a,yd.a,Od.a],function(e,t,n,a){return!e||Object(fd.a)(new Ee.Set([Object(te.j)(e)]),new Ee.Set([Object(te.k)(e)]),t,n,a,Object(te.j)(e))}),Sd=n("9Vb6"),Nd="tickets-write",Cd=Object(At.a)([Sd.a],function(e){return e.includes(Nd)}),Td="deals-write",Id=Object(At.a)([Sd.a],function(e){return e.includes(Td)}),xd=n("RyfP"),Fd=n("MwkR"),Ad=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.auth,n=e.contact,a=e.conversationId,i=e.isUngatedForReadV2Associations,o=e.openCreateDealModal,s=e.openCreateTicketModal,c=e.subjectId,d=e.threadId,u=_c.g+"_V2",b=Object(Ja.b)({conversationId:a,isUngatedForReadV2Associations:i,threadId:d}),p=b.asyncAssociatedTickets,j=b.refetchTickets,k=b.threadTicket,f=Object(r.useMemo)(function(){var e=Object(m.a)(p);return Object(Fd.a)(e)},[p]),v=Object(r.useCallback)(function(e){e.associationType!==_c.g&&e.associationType!==u||j()},[u,j]),O=Object(l.useSelector)(function(e){return hd(e,{contact:n})}),y=Object(l.useSelector)(Cd),g=Object(l.useSelector)(Id),h=Object(r.useCallback)(function(e){Object($.c)(Object(xd.b)({objectType:e}))},[]);return Object(r.useMemo)(function(){return kd({associatedTicketIds:f,auth:t,canEditCurrentContact:O,contact:n,conversationId:a,handleEditPropertySettingsClicked:h,hasDealsWriteAccess:g,hasTicketsWriteAccess:y,isUngatedForReadV2Associations:i,onTicketDisassociationSuccess:v,openCreateDealModal:o,openCreateTicketModal:s,subjectId:c,threadId:d,threadTicket:k,vid:Object(te.l)(n)})},[f,t,O,n,a,h,g,y,i,v,o,s,c,d,k])},Dd=n("aHWB"),Rd=n("rBqy"),Pd=function(e){var t={};return e.filter(function(e){if("FragmentDefinition"!==e.kind)return!0;var n=e.name.value;if(t[n])return!1;t[n]=!0;return!0})},Ed=function(e,t){var n,a,i=t.crmObject,r=i&&Object(Rd.f)(e,i),o={};if(i){var s=Pt()(["defaultAssociations","feedbackSubmissionAssociation","edges"],i);s&&s.length&&(n=s.map(function(e){return Object(Rd.d)(e.node)}));a={count:Pt()(["defaultAssociations","count","edges","length"],i)||0,hasMore:Pt()(["defaultAssociations","count","pageInfo","hasNextPage"],i)};o=s.reduce(function(e,t){var n=Pt()(["node","defaultAssociations","toTickets","edges"],t).map(function(e){return Object(Rd.g)(e.node)});n.length&&(e[Pt()(["node","id"],t)]=n);return e},{})}return{associationsById:o,countObject:a,items:n,currentOwnerId:t.viewer.ownerId,subject:r}},_d=function(e,t){var n,a=t.crmObject;a&&(n={count:Pt()(["defaultAssociations","count","edges","length"],a)||0,hasMore:Pt()(["defaultAssociations","count","pageInfo","hasNextPage"],a)});return{countObject:n}},wd={kind:"Document",definitions:Pd([{kind:"FragmentDefinition",name:{kind:"Name",value:"FeedbackCard_Fields"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"CrmObject"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Contact"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"defaultProperties"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"createdate"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"value"}}]}}]}},{kind:"Field",name:{kind:"Name",value:"defaultAssociations"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"feedbackSubmissionAssociation"},name:{kind:"Name",value:"toFeedbackSubmissions"},arguments:[{kind:"Argument",name:{kind:"Name",value:"first"},value:{kind:"Variable",name:{kind:"Name",value:"limit"}}},{kind:"Argument",name:{kind:"Name",value:"after"},value:{kind:"Variable",name:{kind:"Name",value:"cursor"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"edges"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"node"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"FragmentSpread",name:{kind:"Name",value:"FeedbackCard_ChickletFields"}}]}}]}},{kind:"Field",name:{kind:"Name",value:"pageInfo"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"endCursor"}},{kind:"Field",name:{kind:"Name",value:"hasNextPage"}}]}}]}},{kind:"Field",alias:{kind:"Name",value:"count"},name:{kind:"Name",value:"toFeedbackSubmissions"},arguments:[{kind:"Argument",name:{kind:"Name",value:"first"},value:{kind:"IntValue",value:"99"}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"edges"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"node"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}}]}}]}},{kind:"Field",name:{kind:"Name",value:"pageInfo"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"hasNextPage"}}]}}]}}]}}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Ticket"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"defaultAssociations"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"feedbackSubmissionAssociation"},name:{kind:"Name",value:"toFeedbackSubmissions"},arguments:[{kind:"Argument",name:{kind:"Name",value:"first"},value:{kind:"Variable",name:{kind:"Name",value:"limit"}}},{kind:"Argument",name:{kind:"Name",value:"after"},value:{kind:"Variable",name:{kind:"Name",value:"cursor"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"edges"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"node"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"FragmentSpread",name:{kind:"Name",value:"FeedbackCard_ChickletFields"}}]}}]}},{kind:"Field",name:{kind:"Name",value:"pageInfo"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"endCursor"}},{kind:"Field",name:{kind:"Name",value:"hasNextPage"}}]}}]}},{kind:"Field",alias:{kind:"Name",value:"count"},name:{kind:"Name",value:"toFeedbackSubmissions"},arguments:[{kind:"Argument",name:{kind:"Name",value:"first"},value:{kind:"IntValue",value:"99"}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"edges"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"node"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}}]}}]}},{kind:"Field",name:{kind:"Name",value:"pageInfo"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"hasNextPage"}}]}}]}}]}}]}}]}}].concat({kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"FeedbackCard_ChickletFields"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"FeedbackSubmission"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"defaultProperties"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"hs_content"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"value"}}]}},{kind:"Field",name:{kind:"Name",value:"hs_ingestion_id"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"value"}}]}},{kind:"Field",name:{kind:"Name",value:"hs_response_group"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"value"}}]}},{kind:"Field",name:{kind:"Name",value:"hs_submission_timestamp"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"value"}}]}},{kind:"Field",name:{kind:"Name",value:"hs_survey_channel"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"value"}}]}},{kind:"Field",name:{kind:"Name",value:"hs_survey_id"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"value"}}]}},{kind:"Field",name:{kind:"Name",value:"hs_survey_type"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"value"}}]}},{kind:"Field",name:{kind:"Name",value:"hs_value"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"value"}}]}},{kind:"Field",name:{kind:"Name",value:"hs_knowledge_article_id"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"value"}}]}}]}},{kind:"Field",name:{kind:"Name",value:"defaultAssociations"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"toTickets"},arguments:[{kind:"Argument",name:{kind:"Name",value:"first"},value:{kind:"IntValue",value:"5"}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"edges"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"node"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"defaultProperties"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"subject"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"value"}}]}}]}}]}}]}}]}}]}}]}}]}.definitions))},Ld={getGraphQLQueryVariables:function(e){var t=e.objectType,n=e.subjectId;return{objectType:t,subjectId:parseInt(n,10)}},parse:_d,query:{id:"fbbe1f7756c18902d94300dffb43782f3b49c7566c0e4dba5617fe66f3034703",kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"FeedbackCardTitle_Query"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"objectType"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"subjectId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Long"}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"crmObject"},arguments:[{kind:"Argument",name:{kind:"Name",value:"type"},value:{kind:"Variable",name:{kind:"Name",value:"objectType"}}},{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"subjectId"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Contact"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"defaultAssociations"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"count"},name:{kind:"Name",value:"toFeedbackSubmissions"},arguments:[{kind:"Argument",name:{kind:"Name",value:"first"},value:{kind:"IntValue",value:"99"}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"edges"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"node"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}}]}}]}},{kind:"Field",name:{kind:"Name",value:"pageInfo"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"hasNextPage"}}]}}]}}]}}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Ticket"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"defaultAssociations"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"count"},name:{kind:"Name",value:"toFeedbackSubmissions"},arguments:[{kind:"Argument",name:{kind:"Name",value:"first"},value:{kind:"IntValue",value:"99"}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"edges"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"node"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}}]}}]}},{kind:"Field",name:{kind:"Name",value:"pageInfo"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"hasNextPage"}}]}}]}}]}}]}}]}}]}}]}},qd={getGraphQLQueryVariables:function(e){var t=e.objectType,n=e.maxItemsToShow,a=e.subjectId;return{limit:n||Dd.a,objectType:t,subjectId:parseInt(a,10)}},parse:Ed,query:{id:"a559398216a3ba0327dcf7be30c30ea808cdba3d1b8da611faa3e972292d7c4c",kind:"Document",definitions:Pd([{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"FeedbackCard_Query"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"objectType"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"subjectId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Long"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"limit"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"cursor"}},type:{kind:"NamedType",name:{kind:"Name",value:"String"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"viewer"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"ownerId"}}]}},{kind:"Field",name:{kind:"Name",value:"crmObject"},arguments:[{kind:"Argument",name:{kind:"Name",value:"type"},value:{kind:"Variable",name:{kind:"Name",value:"objectType"}}},{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"subjectId"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"FragmentSpread",name:{kind:"Name",value:"FeedbackCard_Fields"}}]}}]}}].concat(wd.definitions))}},Md=n("0Fok"),Vd=n("WewH");function Ud(){var e=Object(l.useSelector)(Md.a),t=Object(Vd.a)(Object(m.a)(e));return null!==t&&void 0!==t?Object(i.jsx)(_o.a,{message:"conversations-inbox-ui.crm-integration.PastConversationsCard.otherConversationsWithCount",options:{count:t}}):Object(i.jsx)(_o.a,{message:"conversations-inbox-ui.crm-integration.PastConversationsCard.otherConversations"})}var Bd=Ud,Hd=function(){return Object(i.jsxs)(r.Fragment,{children:[Object(i.jsx)(_o.a,{message:"conversations-inbox-ui.crm-integration.ThreadTicketCard.title"}),Object(i.jsx)(Oc.a,{className:"m-x-1",title:Object(i.jsx)(_o.a,{message:"conversations-inbox-ui.crm-integration.ThreadTicketCard.info"}),tooltipPlacement:"top",tooltipProps:{use:"longform"}})]})},Kd=n("EvGL"),Yd=n("c97T"),zd=n("ng+6"),Qd=n("wODV"),Wd=n("5qWo"),Gd=n("08UV"),Jd=function(){return Object(i.jsx)(ds.a,{align:"center",justify:"center",className:"relative",style:{height:250},children:Object(i.jsx)(Wd.a,{contextual:!0})})};function Zd(e){var t=e.loader,n=1;return Object(Gd.a)({loader:t,LoadingComponent:Jd,ErrorComponent:function(e){var t=e.retry;if(n>0){t();n-=1;return Object(i.jsx)(Jd,{})}return Object(i.jsx)(Ei.a,{})}})}var Xd=function(){return Object(i.jsx)(ds.a,{justify:"start",className:"relative",children:Object(i.jsx)(Ta.a,{size:"xs"})})};function $d(e){var t=e.loader;return Object(Gd.a)({loader:t,LoadingComponent:Xd})}var el=function(e){var t,a=e.isThreadFiltered,i=e.isThreadSoftDeleted,r=e.isUngatedForCvTicketsStateSync,o=e.isUngatedForReadV2Associations,s=!a&&!i,c=null;o&&s?c={Content:Zd({loader:function(){return Promise.all([n.e("contact-tickets-card-content~contact-tickets-card-title~thread-ticket-card-content"),n.e("contact-tickets-card-content")]).then(n.bind(null,"EZV/"))}}),Title:$d({loader:function(){return Promise.all([n.e("contact-tickets-card-content~contact-tickets-card-title~thread-ticket-card-content"),n.e("contact-tickets-card-title")]).then(n.bind(null,"gaFS"))}})}:o||(c={Content:Zd({loader:function(){return Promise.all([n.e("contact-tickets-card-content~contact-tickets-card-title~thread-ticket-card-content"),n.e("contact-tickets-card-content")]).then(n.bind(null,"VkAK"))}}),Title:$d({loader:function(){return Promise.all([n.e("contact-tickets-card-content~contact-tickets-card-title~thread-ticket-card-content"),n.e("contact-tickets-card-title")]).then(n.bind(null,"gaFS"))}})});var d=null;!o||r&&!s?o||(d={Content:Zd({loader:function(){return Promise.all([n.e("contact-tickets-card-content~contact-tickets-card-title~thread-ticket-card-content"),n.e("thread-ticket-card-content")]).then(n.bind(null,"jVA+"))}}),Title:Hd}):d={Content:Zd({loader:function(){return Promise.all([n.e("contact-tickets-card-content~contact-tickets-card-title~thread-ticket-card-content"),n.e("thread-ticket-card-content")]).then(n.bind(null,"XRMQ"))}}),Title:Hd};return t={},Object(ae.a)(t,sd.a,{Content:Zd({loader:function(){return Promise.resolve().then(n.bind(null,"dI04"))}}),Title:Fc}),Object(ae.a)(t,sd.c,c),Object(ae.a)(t,sd.d,{Content:Zd({loader:function(){return n.e("deal-conversations-card-content").then(n.bind(null,"XiCU"))}}),Title:$d({loader:function(){return n.e("deal-conversations-card-title").then(n.bind(null,"H0XN"))}})}),Object(ae.a)(t,sd.e,d),Object(ae.a)(t,sd.b,{Content:Zd({loader:function(){return Promise.all([n.e("customer-summary-card-content~inbox-email-communicator"),n.e("customer-summary-card-content~sales-modal"),n.e("customer-summary-card-content")]).then(n.bind(null,"k0Mi"))}}),Title:$d({loader:function(){return n.e("customer-summary-card-title").then(n.bind(null,"Ia4E"))}})}),Object(ae.a)(t,sd.f,{Content:Object(Qd.a)(Zd({loader:function(){return n.e("feedback-card-content").then(n.bind(null,"4taI"))}}),{gqlConfig:qd,key:"FeedbackCard"}),Title:Object(Qd.a)($d({loader:function(){return n.e("feedback-card-title").then(n.bind(null,"hw/D"))}}),{gqlConfig:Ld,key:"FeedbackCardTitle"})}),Object(ae.a)(t,sd.g,{Content:Zd({loader:function(){return n.e("past-conversations-card-content").then(n.bind(null,"jmwt"))}}),Title:Bd}),Object(ae.a)(t,sd.h,{Content:Zd({loader:function(){return Promise.resolve().then(n.bind(null,"xlGk"))}}),Title:Nc}),Object(ae.a)(t,sd.i,{Content:Zd({loader:function(){return n.e("qualified-leads-card-content").then(n.bind(null,"yd80"))}}),Title:Kd.b}),Object(ae.a)(t,sd.j,{Content:Zd({loader:function(){return n.e("tool-links-card-content").then(n.bind(null,"JT4J"))}}),Title:Yd.b}),Object(ae.a)(t,sd.k,{Content:Zd({loader:function(){return n.e("zorse-ticket-search-card-content").then(n.bind(null,"Rd5Y"))}}),Title:zd.b}),t},tl=n("ZDG/"),nl=n("2sER"),al=n("6q98"),il=R.a.div.withConfig({displayName:"ConnectedCrmSidebar__StyledPreviewHighlight",componentId:"btyucj-0"})(["margin-bottom:-24px;"]),rl=function(e){return Object(i.jsx)(il,{children:Object(i.jsx)(Zo,Object.assign({},e))})},ol=[nl.f,nl.h,nl.g,nl.d],sl=Object(r.memo)(function(e){var t=e.cardsDataHandlers,n=e.contact,a=e.isThreadFiltered,o=e.isThreadSoftDeleted,s=e.renderCustomHighlight,c=e.threadId,d=Object(l.useDispatch)(),u=Object(l.useSelector)(tl.a),m=Object(l.useSelector)(ca.e),b=Object(l.useSelector)(ca.h),p=Object(r.useMemo)(function(){return{gates:u.gates.toJS(),portal:u.portal.toJS(),user:u.user.toJS()}},[u]),j=Object(r.useCallback)(function(e){var t=e.objectType,a=e.properties;if(t===G.CONTACT){a.forEach(function(e,t){return Object($.c)(Object(ee.g)({fieldName:t}))});a.keySeq().some(function(e){return ol.includes(e)})&&d(Object(al.a)({vid:Object(te.l)(n)}))}},[n,d]),k=G.CONTACT,f=n&&""+Object(te.d)(n),v=Object(Za.a)({threadId:c}).conversationId,O=Object(r.useMemo)(function(){return el({isThreadFiltered:a,isThreadSoftDeleted:o,isUngatedForCvTicketsStateSync:m,isUngatedForReadV2Associations:b})},[a,o,m,b]);if(!Object(ia.a)(n)){k=G.CONVERSATION;f=c}var y=Ad(Object.assign({auth:u},t,{contact:n,conversationId:v,isUngatedForReadV2Associations:b,subjectId:f,threadId:c}));return u?Object(i.jsx)(md,{apolloClient:sa.a,auth:p,cardComponents:O,HighlightComponent:s,cardProps:y,cardLocation:Io,previewCardLocation:To,PreviewHighlightComponent:rl,objectType:k,onObjectUpdate:j,subjectId:f,sourceApp:aa.a}):null});sl.displayName="ConnectedCrmSidebar";sl.propTypes={cardsDataHandlers:d.a.object.isRequired,contact:Object(W.a)("ContactRecord"),isThreadFiltered:d.a.bool,isThreadSoftDeleted:d.a.bool,renderCustomHighlight:d.a.func.isRequired};var cl=sl,dl="https://knowledge.hubspot.com/chatflows/chat-with-logged-in-visitors",ll=Object(i.jsx)(xa.a,{use:"on-bright",href:dl,external:!0,children:L.a.text("conversations-inbox-ui.crm-integration.IdentifyContactTip.learnMore")}),ul=function(){return Object(i.jsx)(Yo.a,{title:Object(i.jsx)(ki.a,{message:"conversations-inbox-ui.crm-integration.IdentifyContactTip.verified",options:{learnMore:ll}}),children:Object(i.jsx)(_.a,{name:"twoFAFill",size:"small",color:A.EERIE})})};ul.displayName="IdentifyContactBadge";ul.propTypes={};var ml=ul,bl=function(e,t){return e&&t?e+" @ "+t:e||t||null},pl=function(){return Object(i.jsx)("span",{})},jl=function(e){var t=e.company,n=e.contactLink,a=e.jobTitle,r=e.name,o=e.onContactLinkClick,s=e.shouldDisplayIdentifyBadge,c=bl(a,t);return Object(i.jsx)(fl,{"data-test-id":"known-contact-info-highlight",children:Object(i.jsxs)("div",{className:"width-100",children:[Object(i.jsxs)("div",{className:"align-center",children:[s&&Object(i.jsx)("span",{className:"m-right-1",children:Object(i.jsx)(ml,{})}),Object(i.jsx)(xa.a,{href:n,onClick:o,external:!0,ExternalIcon:pl,children:Object(i.jsxs)("span",{className:"justify-start",children:[Object(i.jsx)(Vs.a,{matchContentWidth:!0,children:r}),Object(i.jsx)(_.a,{name:"externalLink",className:"m-left-1"})]})})]}),c&&Object(i.jsx)(Vs.a,{children:c})]})})};jl.propTypes={company:d.a.string,contactLink:d.a.string.isRequired,jobTitle:d.a.string,name:d.a.string.isRequired,onContactLinkClick:d.a.func.isRequired};var kl=jl,fl=R()("div").withConfig({displayName:"KnownVisitorContactInfo___StyledDiv",componentId:"sc-1nzshk4-0"})(["display:flex;align-items:center;width:100%;overflow:hidden;"]),vl=function(e){var t=e.openAssociateModal;return Object(i.jsxs)("div",{className:"justify-between flex-wrap flex-grow-1","data-test-id":"unknown-contact-info-highlight",children:[Object(i.jsx)(_o.a,{message:"conversations-inbox-ui.unknownVisitor",className:"m-right-2"}),Object(i.jsx)(P.a,{"data-test-id":"associate-unknown-visitor-button",onClick:t,use:"tertiary",size:"extra-small",children:Object(i.jsx)(_o.a,{message:"conversations-inbox-ui.contactPrompt.header"})})]})};vl.propTypes={openAssociateModal:d.a.func.isRequired};var Ol=vl,yl=n("KHqm"),gl=n("xRd2"),hl=n("ypMi"),Sl=n("Kk2d"),Nl="IDENTIFY_CONTACT_TOOLTIP_HIDDEN",Cl=function(e){var t=e.vid,n=Object(Sl.a)({key:Nl,initialValue:JSON.stringify(Object(ae.a)({},t,!1))}),a=Object(ne.a)(n,2),o=a[0],s=a[1],c=Object(r.useCallback)(function(){try{return JSON.parse(o)[t]}catch(e){return!1}},[o,t]),d=Object(r.useCallback)(function(){return s(JSON.stringify(Object.assign({},JSON.parse(o),Object(ae.a)({},t,!0))))},[o,s,t]);return c()?null:Object(i.jsxs)(as.a,{type:"tip",use:"inline",closeable:!0,onClose:d,className:"m-top-2 m-bottom-4 p-all-2",children:[Object(i.jsx)(_o.a,{message:"conversations-inbox-ui.crm-integration.IdentifyContactTip.alert",useGap:!0,style:{fontWeight:600}}),Object(i.jsx)(Yo.a,{placement:"bottom left",title:Object(i.jsx)(_o.a,{message:"conversations-inbox-ui.crm-integration.IdentifyContactTip.tooltip"}),children:Object(i.jsx)(_.a,{name:"info",size:16,color:A.EERIE})})]})};Cl.displayName="IdentifyContactWarning";Cl.propTypes={vid:d.a.number.isRequired};var Tl=Cl,Il=function(e){var t=e.wrapper,n=e.condition,a=e.children;return n?t(a):a},xl=function(e){var t=e.contact,n=e.openAssociateModal,a=e.openDisassociateModal,o=e.shouldDisplayContactWarning,s=e.shouldDisplayIdentifyBadge,c=Object(ia.a)(t),d=Object(te.d)(t),l=Object(te.f)(t),u=c?La(t):void 0,m=Object(te.e)(t),b=Object(te.h)(t),p=Da(d),j=Object(r.useCallback)(function(){Object($.c)(Object(ee.h)())},[]);return Object(i.jsxs)("div",{className:"p-top-11 p-left-6 p-right-6",children:[Object(i.jsx)("div",{children:o&&Object(i.jsx)(Tl,{vid:d})}),Object(i.jsx)(gl.a,{stepKey:hl.b,header:Object(i.jsx)(_o.a,{message:"conversations-inbox-ui.new-feature-onboarding.crmSidebar.contactHighlightCard.header"}),body:Object(i.jsx)(_o.a,{message:"conversations-inbox-ui.new-feature-onboarding.crmSidebar.contactHighlightCard.body"}),placement:"left",children:Object(i.jsx)(Il,{condition:c,wrapper:function(e){return Object(i.jsx)(yl.a,{onClick:a,placement:"bottom left",title:Object(i.jsx)(_o.a,{message:"conversations-inbox-ui.crm-integration.disassociatePrompt.disassociateContact"}),children:e})},children:Object(i.jsxs)("div",{className:"align-center",children:[Object(i.jsx)(X.b,{className:"m-right-3",size:"md",type:"contact",vid:d,email:l,displayName:u}),c?Object(i.jsx)(kl,{company:m,contactLink:p,jobTitle:b,name:u,onContactLinkClick:j,shouldDisplayIdentifyBadge:s}):Object(i.jsx)(Ol,{openAssociateModal:n})]})})})]})};xl.propTypes={contact:Object(W.a)("ContactRecord").isRequired,openAssociateModal:d.a.func.isRequired,openDisassociateModal:d.a.func.isRequired,shouldDisplayContactWarning:d.a.bool.isRequired,shouldDisplayIdentifyBadge:d.a.bool.isRequired};var Fl=xl,Al=n("Fa/8"),Dl=function(e){var t=e.emails,n=e.threadId;return bt.a.get("/visitor-identification/v1/identified-entity/is-identified",{query:{entityId:n,email:t,identifiedEntityType:"THREAD"}})},Rl=Object(f.a)({requestFn:Dl,actionTypes:Al.a,toRecordFn:Ee.fromJS,failureMetaActionCreator:v.a}),Pl={type:"noop",payload:{}},El=s()("visitorIdentification"),_l=["data","isIdentified"],wl=function(e,t){return t.threadId},Ll=Object(At.a)([El,wl],function(e,t){return Object(Dt.b)(t,e)}),ql=function(e){return Pt()(Object(qa.a)(_l),e)},Ml=(Object(At.a)([Ll],function(e){return ql(e)}),function(e){var t=e.threadId,n=e.contact,a=Object(te.a)(n),i=Object(r.useCallback)(function(){return a&&a.length?Rl({emails:a,threadId:t}):Pl},[a,t]),o=Object(mt.a)({action:i,selector:function(e){return Ll(e,{threadId:t})},id:t,idTransform:function(e){return{threadId:e}}}).asyncData;return{isIdentified:Object(u.e)(o)&&ql(o),visitorIdentificationAsyncData:o}}),Vl=n("ioGg"),Ul=Object(r.memo)(function(e){var t=e.collapsed,n=e.contact,a=e.isLocked,o=e.isThreadFiltered,s=e.isThreadSoftDeleted,c=e.threadId,d=e.toggleSidebar,l=Ml({contact:n,threadId:c}),m=l.isIdentified,b=l.visitorIdentificationAsyncData,p=ue(),j=p.promptStatus,k=p.openPrompt,f=p.closePrompt,v=Object(Vl.a)({threadId:c}).source,O=Object(r.useCallback)(function(){Object($.c)(Object(ee.c)({objectType:G.DEAL}));k(re)},[k]),y=Object(r.useCallback)(function(){Object($.c)(Object(ee.c)({objectType:G.TICKET}));k(oe)},[k]),g=Object(r.useCallback)(function(){Object($.c)(Object(ee.b)());k(ie)},[k]),h=Object(r.useCallback)(function(){return k(se)},[k]),S=Object(ia.a)(n),N=v===Z.LIVE_CHAT,C=Object(u.e)(b)&&!m,T=S&&N&&C&&!t,I=Object(r.useCallback)(function(){return Object(i.jsx)(Fl,{contact:n,openAssociateModal:g,openDisassociateModal:h,shouldDisplayContactWarning:T,shouldDisplayIdentifyBadge:m})},[n,g,h,T,m]);return Object(i.jsxs)("div",{className:"height-100 overflow-y-auto",style:{position:"absolute",right:0,width:U.d},children:[Object(i.jsxs)(J.a,{className:"height-100 overflow-y-auto selenium-test-marker-contact-sidebar"+(a?"":" flex-column"),grow:1,shrink:0,basis:"100%",style:{backgroundColor:A.OLAF},"data-test-id":S?"known-visitor-crm-sidebar":"unknown-visitor-crm-sidebar",children:[Object(i.jsx)(V.a,{alignment:U.k.RIGHT,isLocked:a,collapsed:t,onClick:d,children:t&&Object(i.jsx)(X.b,{email:Object(te.f)(n)})}),Object(i.jsx)(B.a,{className:"height-100 flex-column justify-between",hide:t,children:Object(i.jsx)(cl,{cardsDataHandlers:{openCreateTicketModal:y,openCreateDealModal:O},contact:n,isThreadFiltered:o,isThreadSoftDeleted:s,renderCustomHighlight:I,threadId:c})})]}),Object(i.jsx)(Ci,{closePrompt:f,contact:n,openCreateDealModal:O,openCreateTicketModal:y,promptStatus:j,threadId:c})]})});Ul.displayName="ContactSidebar";Ul.propTypes={collapsed:d.a.bool.isRequired,contact:Object(W.a)("ContactRecord"),isLocked:d.a.bool.isRequired,isThreadFiltered:d.a.bool,isThreadSoftDeleted:d.a.bool,threadId:d.a.string.isRequired,toggleSidebar:d.a.func.isRequired};var Bl=Ul,Hl=n("QIG4"),Kl=Object(r.memo)(function(e){var t=e.threadId,n=Object(a.a)(e,["threadId"]);return t?Object(i.jsx)(Yl,Object.assign({threadId:t},n)):Object(i.jsx)(N.a,{})}),Yl=function(e){var t=e.collapsed,n=e.isLocked,a=e.threadId,o=e.toggleSidebar,c=Object(l.useDispatch)(),d=Object(k.a)({threadId:a}),f=d.asyncContact,v=d.retryFailed,O=Object(m.a)(f),y=Object(l.useSelector)(function(e){return Object(ut.a)(e,{threadId:a})}),g=Object(l.useSelector)(function(e){return Object(j.e)(e,{threadId:a})}),h=Object(l.useSelector)(Hl.a),C=Object(l.useSelector)(j.h)?g:y||s()("threadDetails",h),T=Object(b.A)(C)===p.a.SOFT_DELETED,I="NOT_FILTERED"!==Object(b.j)(C);Object(r.useEffect)(function(){c(S())},[c]);var x="OBJECT_NOT_FOUND"===Object(m.b)(f);return Object(u.a)(f)&&!x?Object(i.jsx)(z,{collapsed:t,isLocked:n,retry:v,toggleSidebar:o}):!Object(u.c)(f)&&!Object(u.b)(f)||O?Object(i.jsx)(Bl,{collapsed:t,contact:O,isLocked:n,isThreadFiltered:I,isThreadSoftDeleted:T,threadId:a,toggleSidebar:o}):Object(i.jsx)(N.a,{})};Kl.displayName="ContextualSidebarContainer";Yl.displayName="ContextualSidebar";Yl.propTypes={collapsed:d.a.bool.isRequired,isLocked:d.a.bool.isRequired,threadId:d.a.string.isRequired,toggleSidebar:d.a.func.isRequired};t.default=Kl},kPoh:function(e,t,n){"use strict";n.d(t,"a",function(){return a});var a="CONVERSATIONS"},"l8+2":function(e,t,n){"use strict";n.d(t,"a",function(){return o});var a=n("Ktcs"),i=n("VfuR"),r=n.n(i),o=Object(a.createContext)({updateQuery:null,fetchMore:null,client:null});o.Provider.propTypes={value:r.a.shape({updateQuery:r.a.func.isRequired,fetchMore:r.a.func.isRequired,client:r.a.object.isRequired}).isRequired}},lWsH:function(e,t,n){"use strict";n.d(t,"b",function(){return a});n.d(t,"c",function(){return i});n.d(t,"a",function(){return r});var a="not_specified",i="read_only",r="hidden"},lakq:function(e,t,n){"use strict";n.d(t,"i",function(){return a});n.d(t,"b",function(){return i});n.d(t,"g",function(){return r});n.d(t,"c",function(){return o});n.d(t,"e",function(){return s});n.d(t,"d",function(){return c});n.d(t,"j",function(){return d});n.d(t,"k",function(){return l});n.d(t,"h",function(){return u});n.d(t,"a",function(){return m});n.d(t,"f",function(){return b});var a="QualifiedLeadsCard",i="BetCustomerSummaryCard",r="PastConversationsCard",o="ConversationsContactTicketsCard",s="ConversationsThreadTicketCard",c="ConversationsDealCard",d="ToolLinksCard",l="ZorseTicketSearchCard",u="PropertiesCard",m="AssociatedObjectsCard",b="FeedbackCard"},ldyT:function(e,t,n){"use strict";n.d(t,"a",function(){return o});var a=n("d0QT"),i=n("Ktcs"),r=n("kJ/w");function o(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=Object(i.useContext)(a.a).gates,o=Object(i.useMemo)(function(){return n.includes(e)},[n,e]);return t?Object(r.a)(e,o):o}},lv1D:function(e,t,n){"use strict";n.d(t,"a",function(){return o});var a=n("Ktcs"),i=n("VfuR"),r=n.n(i),o=Object(a.createContext)(null);o.Provider.propTypes={value:r.a.shape({propertySource:r.a.string.isRequired,propertySourceId:r.a.string.isRequired}).isRequired}},"ng+6":function(e,t,n){"use strict";var a=n("fzi9"),i=n("QgEn"),r=n("Ktcs"),o=n("19qb"),s=n("46u0"),c=n.n(s),d=n("ju9H"),l=n("dmal"),u=n("VfuR"),m=n.n(u),b=n("sld6"),p=n("QhRM"),j=n("vTCD"),k=n("k8Et"),f=n("S4BB"),v=n("j/PO"),O=n.n(v),y=Object(f.createTracker)({events:O.a,isBeforeUnload:!0}),g=new(function(){function e(){Object(j.a)(this,e)}Object(k.a)(e,[{key:"filtersApplied",value:function(e){this._trackUsage("filters-applied",{payload:e})}},{key:"filtersCleared",value:function(){this._trackUsage("filters-cleared")}},{key:"filtersOpened",value:function(){this._trackInteraction("filters-opened")}},{key:"filtersClosed",value:function(){this._trackInteraction("filters-closed")}},{key:"moreResultsClosed",value:function(){this._trackInteraction("more-results-closed")}},{key:"moreResultsOpened",value:function(){this._trackInteraction("more-results-opened")}},{key:"moreTicketsFetchInitiated",value:function(){this._trackUsage("more-tickets-fetched",{state:"initiated"})}},{key:"moreTicketsFetchSucceeded",value:function(){this._trackUsage("more-tickets-fetched",{state:"succeeded"})}},{key:"ticketOpened",value:function(){this._trackInteraction("ticket-opened")}},{key:"ticketsSearchInitiated",value:function(e){this._trackUsage("tickets-searched",{source:e,state:"initiated"})}},{key:"ticketsSearchSucceeded",value:function(e){this._trackUsage("tickets-searched",{source:e,state:"succeeded"})}},{key:"viewInZorseOpened",value:function(){this._trackInteraction("view-in-zorse-opened")}},{key:"_trackInteraction",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.payload,a=void 0===n?void 0:n,i=t.source,r=void 0===i?void 0:i,o=t.state,s=void 0===o?void 0:o;y.track("zorseTicketSearchInteraction",{screen:"conversations",action:e,payload:a,source:r,state:s})}},{key:"_trackUsage",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.payload,a=void 0===n?void 0:n,i=t.source,r=void 0===i?void 0:i,o=t.state,s=void 0===o?void 0:o;y.track("zorseTicketSearchUsage",{screen:"conversations",action:e,payload:a,source:r,state:s})}}]);return e}()),h=n("I3wh"),S=n("yb1U"),N=n("XSYQ"),C={ALL_TIME:{presetId:"ALL_TIME",getValue:function(e){return{startDate:Object(N.b)(),endDate:Object(N.o)(e)}}},TODAY:{presetId:"TODAY",getValue:function(e){return{startDate:Object(N.o)(e),endDate:Object(N.n)(Object(N.o)(e))}}},LAST_365_DAYS:{presetId:"LAST_365_DAYS",getValue:function(e){return{startDate:Object(N.d)(364,e),endDate:Object(N.o)(e)}}},CUSTOM_DATE_RANGE:{presetId:"CUSTOM_DATE_RANGE",getValue:function(){return{startDate:null,endDate:null}}}},T=[C.ALL_TIME,C.TODAY,S.THIS_WEEK,S.LAST_WEEK,S.THIS_MONTH,S.LAST_MONTH,S.THIS_YEAR,S.LAST_YEAR,S.LAST_THIRTY_DAYS,C.LAST_365_DAYS,C.CUSTOM_DATE_RANGE];function I(e){if(!e.startDate&&!e.endDate)return C.ALL_TIME.presetId;var t=parseInt(e.startDate,10),n=parseInt(e.endDate,10),a=!0,i=!1,r=void 0;try{for(var o,s=T[Symbol.iterator]();!(a=(o=s.next()).done);a=!0){var c=o.value,d=c.getValue("utc");if(Object(N.v)(d.startDate).valueOf()===t&&Object(N.v)(d.endDate).valueOf()===n)return c.presetId}}catch(e){i=!0;r=e}finally{try{a||null==s.return||s.return()}finally{if(i)throw r}}return C.CUSTOM_DATE_RANGE.presetId}function x(e){return function(t){var n=e.toJS();n.dateRange=e.dateRange.isEmpty()?void 0:I(e.dateRange);g.filtersApplied(JSON.stringify(n));t({type:h.a,payload:e})}}function F(){return function(e){g.filtersCleared();e({type:h.b})}}var A=n("9wse"),D=n("g+dq"),R=n.n(D);function P(){return R.a.get("zorse-ticket-inspector/filter-options")}function E(e,t){return R.a.post("zorse-ticket-inspector/search",{data:{filters:t,searchTerms:e}})}function _(e,t,n){return R.a.post("zorse-ticket-inspector/search",{data:{filters:t,lastId:n,searchTerms:e}})}function w(){return function(e){return e({type:h.d})}}function L(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new A.a,n=arguments.length>2?arguments[2]:void 0;return function(a){g.ticketsSearchInitiated(n);a({type:h.h,meta:"request"});return E(e,t).then(function(e){g.ticketsSearchSucceeded(n);return a({type:h.h,meta:"response",payload:e})},function(e){return a({type:h.h,error:!0,payload:e})})}}function q(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new A.a;return function(a){g.moreTicketsFetchInitiated();a({type:h.g,meta:"request"});return _(e,n,t).then(function(e){g.moreTicketsFetchSucceeded();return a({type:h.g,meta:"response",payload:e})},function(e){return a({type:h.g,error:!0,payload:e})})}}function M(){var e=Object(o.useDispatch)(),t=Object(o.useSelector)(function(e){return e.zorseTicketInspector.searchTerms});function n(){if(t.trim()){e(F());e(L(t,void 0,"filters-cleared"))}else{e(F());e(w())}}return Object(i.jsx)(p.a,{"data-test-id":"clear-filters-button-internal",onClick:n,children:Object(i.jsx)(c.a,{"data-test-id":"clear-filters-button-label",message:"app.common.clearFilters"})})}var V=Object(r.memo)(M),U=n("YM6t"),B=n("mDbF"),H=n.n(B),K=n("kZyb"),Y=n("vuW9"),z=7;function Q(e){return e.isEmpty()?[]:[H.a.text("app.filter.panel.dateRange.options."+I(e))]}function W(e){return e.map(function(e){return H.a.text("app.filter.panel.language.options."+e)})}function G(e,t){return e.map(function(e){return t.get(e).name})}function J(e,t){return e.map(function(e){return t.get(e)}).map(function(e){return e.isCurrentUser?H.a.text("app.filter.panel.ticketOwner.currentUser",{name:e.name}):e.name})}function Z(){var e=Object(o.useSelector)(function(e){return e.zorseTicketInspector.filters}),t=Object(o.useSelector)(function(e){return e.zorseTicketInspector.filterOptions}),n=[].concat(Object(U.a)(Q(e.dateRange)),Object(U.a)(W(e.languages)),Object(U.a)(G(e.productAreas,t.productAreasById)),Object(U.a)(J(e.ticketOwners,t.ticketOwnersByEmail))),a=Math.max(0,n.length-z);n=n.slice(0,z);a>0&&n.push(H.a.text("app.common.moreFilters",{count:a}));return Object(i.jsx)(Y.a,{placement:"bottom left",title:n.join(", "),children:Object(i.jsx)(K.a,{use:"help",children:Object(i.jsx)(c.a,{"data-test-id":"filters-applied-text-internal",message:"app.common.filtersApplied",options:{count:e.count()}})})})}var X=Object(r.memo)(Z),$=n("3Yd4");function ee(e){return Object(i.jsxs)(p.a,{"data-test-id":"filters-link",onClick:function(){g.filtersOpened();e.onClick()},children:[Object(i.jsx)($.a,{name:"filter"}),Object(i.jsx)(c.a,{message:"app.common.filters"})]})}ee.propTypes={onClick:m.a.func.isRequired};var te=Object(r.memo)(ee);function ne(e){var t=Object(o.useSelector)(function(e){return e.zorseTicketInspector.filters});return Object(i.jsxs)(b.a,{align:"center",direction:"row",justify:"start",wrap:"wrap",children:[Object(i.jsx)(te,{"data-test-id":"filters-bar-filters-button",onClick:e.onFiltersClick}),t.isEmpty()?null:Object(i.jsxs)(b.a,{align:"center",direction:"row",justify:"end",wrap:"wrap",children:[Object(i.jsx)("span",{className:"m-right-2",children:Object(i.jsx)(X,{"data-test-id":"filters-bar-filters-applied-text"})}),Object(i.jsx)(V,{"data-test-id":"filters-bar-clear-filters-button"})]})]})}ne.propTypes={onFiltersClick:m.a.func.isRequired};var ae=Object(r.memo)(ne),ie=n("DqRu");function re(e){return Object(i.jsx)(ie.a,{"data-test-id":"more-results-button-internal",onClick:function(){g.moreResultsOpened();e.onClick()},size:"sm",use:"tertiary",children:Object(i.jsx)(c.a,{message:"app.search.card.openMoreResults"})})}re.propTypes={onClick:m.a.func.isRequired};var oe=Object(r.memo)(re),se=n("9f1P"),ce=n.n(se),de=n("9xhK"),le=n("2O1n");function ue(){return function(e){e({type:h.c})}}function me(e){return function(t){t({type:h.e,payload:e})}}function be(){var e=Object(o.useDispatch)();return Object(i.jsx)(ie.a,{"data-test-id":"clear-button-internal",onClick:function(){e(F());e(ue())},size:"xs",use:"tertiary-light",children:Object(i.jsx)(c.a,{"data-test-id":"clear-button-label",message:"app.common.clear"})})}var pe=Object(r.memo)(be),je=ce()("div").withConfig({displayName:"NoTicketsFoundMessage__Body",componentId:"sc-1wcz83x-0"})(["margin:0 auto 0 auto;width:220px;"]),ke=ce()(de.a).withConfig({displayName:"NoTicketsFoundMessage__MessageImage",componentId:"sc-1wcz83x-1"})(["margin-bottom:20px;"]);function fe(e){return Object(i.jsxs)(le.a,{Body:je,illustration:"empty-state-charts",illustrationProps:{width:e.isLong?120:90,margin:0},Image:ke,children:[Object(i.jsx)(c.a,{"data-test-id":"no-tickets-found-message",message:"app.common.noTicketsFound"}),Object(i.jsx)("br",{}),e.isLong?Object(i.jsxs)(i.Fragment,{children:[Object(i.jsx)("div",{className:"m-top-4",children:Object(i.jsx)(c.a,{"data-test-id":"no-tickets-found-message-extra",message:"app.common.noTicketsFoundExtra"})}),Object(i.jsx)("br",{})]}):null,Object(i.jsx)("div",{className:"m-top-4",children:Object(i.jsx)(pe,{})})]})}fe.propTypes={isLong:m.a.bool};fe.defaultProps={isLong:!1};var ve=Object(r.memo)(fe),Oe=n("MeD8");function ye(){return Object(i.jsxs)(i.Fragment,{children:[Object(i.jsxs)(K.a,{use:"help",children:["Powered by ",Object(i.jsx)("b",{children:"Revenue"})]}),Object(i.jsx)(Oe.a,{className:"m-left-1","data-test-id":"powered-by-help-icon",title:Object(i.jsx)(c.a,{message:"app.search.card.poweredByHelp"}),tooltipPlacement:"bottom left"})]})}var ge=Object(r.memo)(ye),he=n("FXjx"),Se=n("WAUT"),Ne=n("ts02"),Ce=n("Ja0m"),Te=n.n(Ce),Ie=n("qCVG"),xe=30,Fe=100;function Ae(e){function t(){var t=e.ticket.channel;return"WEBTICKET"===t?"email":"CHAT"===t?"messages":"INBOUND_PHONE"===t?"calling":"question"}function n(){var t=e.ticket.title,n=t.length>xe?"...":"";return Ie.formatHtml(t.substr(0,xe).trim().concat(n))}function a(){var t=e.ticket.body,n=t.length>Fe?"...":"";return Ie.formatHtml(t.substr(0,Fe).trim().concat(n))}function r(){var t=e.ticket,n=t.productArea,a=t.goal,i=t.roadblock,r=t.resolution,o=n;o=a?o+"; "+a:o;o=i?o+"; "+i:o;return o=r?o+"; "+r:o}return Object(i.jsxs)(i.Fragment,{children:[Object(i.jsxs)(K.a,{className:"m-bottom-1",use:"help",children:[Object(i.jsx)($.a,{className:"m-right-2","data-test-id":"ticket-item-channel-icon",name:t()}),Object(i.jsx)(Y.a,{"data-test-id":"ticket-item-grr-tooltip",title:r(),children:Object(i.jsx)("span",{children:e.ticket.productArea})})]}),Object(i.jsx)("div",{className:"m-bottom-1",children:Object(i.jsx)(p.a,{"data-test-id":"ticket-item-link",external:!0,onClick:function(){return g.ticketOpened()},href:e.ticket.url,children:Object(i.jsx)("span",{dangerouslySetInnerHTML:{__html:n()}})})}),Object(i.jsx)("div",{className:"m-bottom-1","data-test-id":"ticket-item-body",dangerouslySetInnerHTML:{__html:a()}}),Object(i.jsx)(K.a,{use:"help",children:Object(i.jsx)(Te.a,{"data-test-id":"ticket-item-created-at",includeAffix:!0,to:1e3*e.ticket.createdAt})})]})}Ae.propTypes={ticket:m.a.instanceOf(Ne.a).isRequired};var De=Object(r.memo)(Ae);function Re(e){return Object(i.jsx)(Se.a,{compact:!0,children:Object(i.jsx)(he.a,{className:"p-all-3",children:Object(i.jsx)(De,{ticket:e.ticket})})})}Re.propTypes={ticket:m.a.instanceOf(Ne.a).isRequired};var Pe=Object(r.memo)(Re),Ee=n("QYOI"),_e=n("WLqE"),we=n("pw7o"),Le=n("SV9y"),qe=n("Fsj+"),Me=n("VQTc");function Ve(e){return Object(i.jsx)(ie.a,{"data-test-id":"apply-filters-button-internal",disabled:e.isDisabled,onClick:e.onClick,use:"primary",children:Object(i.jsx)(c.a,{message:"app.filter.panel.applyFilters"})})}Ve.propTypes={isDisabled:m.a.bool,onClick:m.a.func.isRequired};Ve.defaultProps={isDisabled:!1};var Ue=Object(r.memo)(Ve);function Be(e){return Object(i.jsx)(ie.a,{"data-test-id":"cancel-button-internal",onClick:function(){g.filtersClosed();e.onClick()},use:"secondary",children:Object(i.jsx)(c.a,{message:"app.filter.panel.cancel"})})}Be.propTypes={onClick:m.a.func.isRequired};var He=Object(r.memo)(Be),Ke=n("/4tG"),Ye=n("sRIF"),ze=n("uzdC"),Qe=n("DSKb"),We=n("9Tlw");function Ge(e){return Object(i.jsx)(ze.a,{"data-test-id":"filter-select-label",label:Object(i.jsx)(c.a,{message:e.labelLangPath}),children:Object(i.jsx)(Qe.a,{"data-test-id":"filter-select-internal",defaultValue:e.defaultValue,menuRenderer:We.a,onChange:function(t){var n=t.target.value;return e.onSelect(n)},options:e.options,placeholder:e.placeholderLangPath?Object(i.jsx)(c.a,{message:e.placeholderLangPath}):void 0})})}Ge.propTypes={defaultValue:m.a.oneOf(m.a.number,m.a.string),labelLangPath:m.a.string.isRequired,onSelect:m.a.func.isRequired,options:m.a.array.isRequired,placeholderLangPath:m.a.string};Ge.defaultProps={defaultValue:null,placeholderLangPath:""};var Je=Object(r.memo)(Ge),Ze=T.map(function(e){return{text:Object(i.jsx)(c.a,{message:"app.filter.panel.dateRange.options."+e.presetId}),value:e.presetId}});function Xe(e){var t=Object(o.useSelector)(function(e){return e.zorseTicketInspector.filters.dateRange}),n=Object(r.useMemo)(function(){return I(t)},[t]),s=Object(r.useState)(u(n)),c=Object(a.a)(s,2),d=c[0],l=c[1];function u(e){return e===C.CUSTOM_DATE_RANGE.presetId}function m(){return u(n)?{startDate:Object(N.g)(H.a.moment(parseInt(t.startDate,10))),endDate:Object(N.g)(H.a.moment(parseInt(t.endDate,10)))}:{startDate:0,endDate:0}}function b(e){if(e===C.CUSTOM_DATE_RANGE.presetId)l(!0);else{p(e in C?C[e].getValue("utc"):S[e].getValue("utc"));l(!1)}}function p(t){t.endDate&&t.startDate&&e.onSelect({endDate:Object(N.v)(t.endDate).valueOf(),startDate:Object(N.v)(t.startDate).valueOf()})}return Object(i.jsxs)(i.Fragment,{children:[Object(i.jsx)(Je,{"data-test-id":"filter-select",labelLangPath:"app.filter.panel.dateRange.label",defaultValue:n,onSelect:b,options:Ze}),d?Object(i.jsx)(Ye.a,{className:"m-top-2","data-test-id":"custom-date-range-picker",defaultValue:m(),onChange:function(e){return p(e.target.value)},showPresets:!1,tz:"utc"}):null]})}Xe.propTypes={onSelect:m.a.func.isRequired};var $e=Object(r.memo)(Xe),et=n("BiPx");function tt(e){return Object(i.jsx)(et.a,{"data-test-id":"dialog-close-button-internal",onClick:function(){g.filtersClosed();e.onClick()}})}tt.propTypes={onClick:m.a.func.isRequired};var nt=Object(r.memo)(tt),at=n("Tqy5");function it(e){return Object(i.jsxs)(at.a,{"data-test-id":"filter-checkbox-internal",defaultChecked:e.defaultValue,onChange:function(t){var n=t.target.checked;return e.onCheck(n)},children:[Object(i.jsx)(c.a,{"data-test-id":"filter-checkbox-label",message:e.labelLangPath}),e.helpLangPath?Object(i.jsx)(Oe.a,{className:"m-left-2","data-test-id":"filter-checkbox-help-icon",title:Object(i.jsx)(c.a,{message:e.helpLangPath}),tooltipPlacement:"bottom left"}):null]})}it.propTypes={defaultValue:m.a.bool,helpLangPath:m.a.string,labelLangPath:m.a.string.isRequired,onCheck:m.a.func.isRequired};it.defaultProps={helpLangPath:"",defaultValue:!1};var rt=Object(r.memo)(it);function ot(e){var t=Object(o.useSelector)(function(e){return e.zorseTicketInspector.filters.includeChatAndPhoneTickets});return Object(i.jsx)(rt,{"data-test-id":"filter-checkbox",defaultValue:t,helpLangPath:"app.filter.panel.includeChatAndPhoneTickets.help",labelLangPath:"app.filter.panel.includeChatAndPhoneTickets.label",onCheck:e.onCheck})}ot.propTypes={onCheck:m.a.func.isRequired};var st=Object(r.memo)(ot);function ct(e){var t=Object(o.useSelector)(function(e){return e.zorseTicketInspector.filters.includeOpenTickets});return Object(i.jsx)(rt,{"data-test-id":"filter-checkbox",defaultValue:t,helpLangPath:"app.filter.panel.includeOpenTickets.help",labelLangPath:"app.filter.panel.includeOpenTickets.label",onCheck:e.onCheck})}ct.propTypes={onCheck:m.a.func.isRequired};var dt=Object(r.memo)(ct);function lt(e){function t(e,t){var n=new RegExp("(?=.*"+t.trim().split(/\s+/).join(")(?=.*")+")","gi");return e.filter(function(e){return n.test(e.text)})}return Object(i.jsx)(ze.a,{"data-test-id":"filter-select-label",label:Object(i.jsx)(c.a,{message:e.labelLangPath}),children:Object(i.jsx)(Qe.a,{anchorType:"button","data-test-id":"filter-select-internal",defaultValue:e.defaultValue,filterOptions:t,menuRenderer:We.a,multi:!0,multiCollapseLimit:1,onChange:function(t){var n=t.target.value;return e.onSelect(n)},options:e.options,placeholder:Object(i.jsx)(c.a,{message:e.placeholderLangPath})})})}lt.propTypes={defaultValue:m.a.array,labelLangPath:m.a.string.isRequired,onSelect:m.a.func.isRequired,options:m.a.array.isRequired,placeholderLangPath:m.a.string.isRequired};lt.defaultProps={defaultValue:[]};var ut=Object(r.memo)(lt);function mt(e){var t=Object(o.useSelector)(function(e){return e.zorseTicketInspector.filterOptions.languages.toArray()}),n=Object(o.useSelector)(function(e){return e.zorseTicketInspector.filters.languages.toArray()}),a=Object(r.useMemo)(function(){return t.map(function(e){return{text:H.a.text("app.filter.panel.language.options."+e),value:e}}).sort(function(e,t){return e.text.localeCompare(t.text)})},[t]);return Object(i.jsx)(ut,{"data-test-id":"filter-select",defaultValue:n,labelLangPath:"app.filter.panel.language.label",onSelect:e.onSelect,options:a,placeholderLangPath:"app.filter.panel.language.placeholder"})}mt.propTypes={onSelect:m.a.func.isRequired};var bt=Object(r.memo)(mt);function pt(e){var t=Object(o.useSelector)(function(e){return e.zorseTicketInspector.filterOptions.productAreas.toArray()}),n=Object(o.useSelector)(function(e){return e.zorseTicketInspector.filters.productAreas.toArray()}),a=Object(r.useMemo)(function(){return t.map(function(e){return{text:e.name,value:e.id}}).sort(function(e,t){return e.text.localeCompare(t.text)})},[t]);return Object(i.jsx)(ut,{"data-test-id":"filter-select",defaultValue:n,labelLangPath:"app.filter.panel.productArea.label",onSelect:e.onSelect,options:a,placeholderLangPath:"app.filter.panel.productArea.placeholder"})}pt.propTypes={onSelect:m.a.func.isRequired};var jt=Object(r.memo)(pt);function kt(e){var t=Object(o.useSelector)(function(e){return e.zorseTicketInspector.filterOptions.ticketOwners.toArray()}),n=Object(o.useSelector)(function(e){return e.zorseTicketInspector.filters.ticketOwners.toArray()}),a=Object(r.useMemo)(function(){return t.filter(function(e){return e.isCurrentUser}).map(function(e){return{text:Object(i.jsx)("b",{children:H.a.text("app.filter.panel.ticketOwner.currentUser",{name:e.name})}),value:e.email}})},[t]),s=Object(r.useMemo)(function(){var e=t.filter(function(e){return!e.isCurrentUser}).map(function(e){return{text:e.name,value:e.email}}).sort(function(e,t){return e.text.localeCompare(t.text)});a.length&&e.unshift(a[0]);return e},[t,a]);return Object(i.jsx)(ut,{"data-test-id":"filter-select",defaultValue:n,labelLangPath:"app.filter.panel.ticketOwner.label",onSelect:e.onSelect,options:s,placeholderLangPath:"app.filter.panel.ticketOwner.placeholder"})}kt.propTypes={onSelect:m.a.func.isRequired};var ft=Object(r.memo)(kt);function vt(e){var t=Object(o.useDispatch)(),n=Object(o.useSelector)(function(e){return e.zorseTicketInspector.filters}),s=Object(o.useSelector)(function(e){return e.zorseTicketInspector.searchTerms}),d=Object(r.useState)(n),l=Object(a.a)(d,2),u=l[0],m=l[1];return Object(i.jsxs)(we.a,{width:320,children:[Object(i.jsx)(nt,{className:"m-right-3","data-test-id":"ticket-filters-dialog-close-button",onClick:e.onClose}),Object(i.jsx)(Me.a,{children:Object(i.jsx)(_e.a,{children:Object(i.jsx)(c.a,{"data-test-id":"title",message:"app.filter.panel.title"})})}),Object(i.jsxs)(Le.a,{className:"p-all-3",children:[Object(i.jsx)("div",{className:"p-x-3",children:Object(i.jsx)($e,{"data-test-id":"ticket-filters-date-range-select",onSelect:function(e){return m(u.set("dateRange",new Ke.a(e)))}})}),Object(i.jsx)("div",{className:"p-top-3 p-x-3",children:Object(i.jsx)(bt,{"data-test-id":"ticket-filters-language-select",onSelect:function(e){return m(u.set("languages",Object(Ee.Set)(e)))}})}),Object(i.jsx)("div",{className:"p-top-3 p-x-3",children:Object(i.jsx)(jt,{"data-test-id":"ticket-filters-product-area-select",onSelect:function(e){return m(u.set("productAreas",Object(Ee.Set)(e)))}})}),Object(i.jsx)("div",{className:"p-top-3 p-x-3",children:Object(i.jsx)(ft,{"data-test-id":"ticket-filters-ticket-owner-select",onSelect:function(e){return m(u.set("ticketOwners",Object(Ee.Set)(e)))}})}),Object(i.jsx)("div",{className:"p-top-5 p-left-3",children:Object(i.jsx)(dt,{"data-test-id":"ticket-filters-include-open-tickets",onCheck:function(e){return m(u.set("includeOpenTickets",e))}})}),Object(i.jsx)("div",{className:"p-top-3 p-left-3",children:Object(i.jsx)(st,{"data-test-id":"ticket-filters-include-chat-and-phone-tickets",onCheck:function(e){return m(u.set("includeChatAndPhoneTickets",e))}})})]}),Object(i.jsxs)(qe.a,{style:{padding:"22px"},children:[Object(i.jsx)(Ue,{"data-test-id":"ticket-filters-apply-filters-button",isDisabled:u.equals(n),onClick:function(){t(x(u));t(L(s,u,"filters-applied"));e.onClose()}}),Object(i.jsx)(He,{"data-test-id":"ticket-filters-cancel-button",onClick:e.onClose})]})]})}vt.propTypes={onClose:m.a.func.isRequired};var Ot=vt,yt=n("6dOn"),gt=n.n(yt),ht=n("3CFq"),St=500;function Nt(e,t,n){n(L(e,t,"search-terms-entered"))}var Ct=gt()(St,function(e,t,n){return Nt(e,t,n)});function Tt(){var e=Object(o.useDispatch)(),t=Object(o.useSelector)(function(e){return e.zorseTicketInspector.filters}),n=Object(o.useSelector)(function(e){return e.zorseTicketInspector.searchTerms}),a=Object(o.useSelector)(function(e){return e.zorseTicketInspector.tickets});function r(n){if(n.trim()){e(me(n));Ct(n,t,e)}else{e(ue());e(w());t.equals(new A.a)||e(L(n,t,"search-terms-cleared"))}}return Object(i.jsx)(ht.a,{"data-test-id":"ticket-search-input-internal",disabled:a.isLoading,onChange:function(e){return r(e.target.value)},placeholder:H.a.text("app.common.searchHubSpotTickets"),value:n})}var It=Tt,xt=n("FNlN");function Ft(e){return Object(i.jsx)(ie.a,{"data-test-id":"close-button-internal",onClick:function(){g.moreResultsClosed();e.onClick()},use:"primary",children:Object(i.jsx)(c.a,{message:"app.search.panel.close"})})}Ft.propTypes={onClick:m.a.func.isRequired};var At=Object(r.memo)(Ft);function Dt(e){return Object(i.jsx)(et.a,{"data-test-id":"dialog-close-button-internal",onClick:function(){g.moreResultsClosed();e.onClick()}})}Dt.propTypes={onClick:m.a.func.isRequired};var Rt=Object(r.memo)(Dt);function Pt(e){return Object(i.jsx)("div",{className:"m-x-4",children:Object(i.jsx)(De,{ticket:e.ticket})})}Pt.propTypes={ticket:m.a.instanceOf(Ne.a).isRequired};var Et=Object(r.memo)(Pt),_t=n("l52g");function wt(){return Object(i.jsx)(_t.a,{className:"m-bottom-2",layout:"centered"})}var Lt=Object(r.memo)(wt),qt=n("LZPL"),Mt=n.n(qt);function Vt(){var e=Object(o.useSelector)(function(e){return e.zorseTicketInspector.filterOptions}),t=Object(o.useSelector)(function(e){return e.zorseTicketInspector.filters}),n=Object(o.useSelector)(function(e){return e.zorseTicketInspector.searchTerms});function a(){var a=t.includeOpenTickets?"all":"closed",i={};i.chatAndPhone=t.includeChatAndPhoneTickets;i.languages=t.languages.join(",");i.newerThanTimestamp=t.dateRange.startDate;i.olderThanTimestamp=t.dateRange.endDate;i.owners=t.ticketOwners.map(function(t){return e.ticketOwnersByEmail.get(t).id}).join(",");i.productAreas=t.productAreas.join(",");i.search=n;i.type=t.includeChatAndPhoneTickets?void 0:"email";var r=Object.keys(i).filter(function(e){return i[e]}).map(function(e){return e+"="+i[e]}).join("&");return"https://tools.hubteam"+(Mt.a.isQa()?"qa":"")+".com/zorse/53/search/all/"+a+"?"+r}return Object(i.jsx)(p.a,{"data-test-id":"view-in-zorse-button-internal",disabled:!n.trim()&&t.equals(new A.a),external:!0,href:a(),onClick:function(){return g.viewInZorseOpened()},children:Object(i.jsx)(c.a,{"data-test-id":"view-in-zorse-button-title",message:"app.search.panel.viewInZorse"})})}var Ut=Object(r.memo)(Vt),Bt=100;function Ht(e){var t=Object(o.useDispatch)(),n=Object(o.useSelector)(function(e){return e.zorseTicketInspector.filters}),s=Object(o.useSelector)(function(e){return e.zorseTicketInspector.searchTerms}),l=Object(o.useSelector)(function(e){return e.zorseTicketInspector.tickets}),u=Object(r.useState)(!1),m=Object(a.a)(u,2),p=m[0],j=m[1];function k(){!l.isLoading&&l.data.hasMore&&t(q(s,l.data.lastId,n))}var f=gt()(Bt,function(e){var t=e.clientHeight;e.scrollHeight-e.scrollTop===t&&k()});return Object(i.jsxs)(i.Fragment,{children:[p?Object(i.jsx)(Ot,{"data-test-id":"search-panel-filters-panel",onClose:function(){return j(!1)}}):null,Object(i.jsxs)(we.a,{"data-test-id":"search-panel-internal",onScroll:function(e){var t=e.target;return f(t)},width:320,children:[Object(i.jsx)(Rt,{className:"m-right-3","data-test-id":"search-panel-dialog-close-button",onClick:e.onClose}),Object(i.jsx)(Me.a,{children:Object(i.jsx)(_e.a,{children:Object(i.jsx)(c.a,{"data-test-id":"search-panel-title",message:"app.title"})})}),Object(i.jsxs)(Le.a,{className:"p-all-3",children:[Object(i.jsx)("div",{className:"m-bottom-4",children:Object(i.jsx)(It,{"data-test-id":"search-panel-search-input"})}),Object(i.jsx)("div",{className:"m-bottom-2",children:Object(i.jsx)(ae,{"data-test-id":"search-panel-filters-bar",onFiltersClick:function(){return j(!0)}})}),Object(i.jsx)(xt.a,{distance:"small"}),Object(i.jsx)(d.a,{children:l.data.tickets.map(function(e,t){return Object(i.jsxs)("span",{children:[t>0?Object(i.jsx)(xt.a,{distance:"small"}):null,Object(i.jsx)(Et,{ticket:e})]},t)})}),l.hasNoResults?Object(i.jsx)(ve,{"data-test-id":"search-panel-no-tickets-found-message",isLong:!0}):null,l.isLoading?Object(i.jsx)(Lt,{"data-test-id":"search-panel-loading-spinner"}):null]}),Object(i.jsx)(qe.a,{style:{padding:"22px"},children:Object(i.jsxs)(b.a,{align:"center",justify:"start",direction:"row",wrap:"wrap",children:[Object(i.jsx)(At,{"data-test-id":"search-panel-close-button",onClick:e.onClose}),Object(i.jsx)(b.a,{align:"center",justify:"end",direction:"row",wrap:"wrap",children:Object(i.jsx)(Ut,{"data-test-id":"search-panel-view-in-zorse-button",searchTerms:s})})]})})]})]})}Ht.propTypes={onClose:m.a.func.isRequired};var Kt=Ht;function Yt(){return function(e){e({type:h.f,meta:"request"});return P().then(function(t){return e({type:h.f,meta:"response",payload:t})},function(t){return e({type:h.f,error:!0,payload:t})})}}var zt=3;function Qt(){var e=Object(o.useDispatch)(),t=Object(o.useSelector)(function(e){return e.zorseTicketInspector.filterOptions}),n=Object(o.useSelector)(function(e){return e.zorseTicketInspector.tickets});Object(r.useEffect)(function(){t.equals(new l.a)&&e(Yt())},[t,e]);var s=Object(r.useState)(!1),c=Object(a.a)(s,2),u=c[0],m=c[1],b=Object(r.useState)(!1),p=Object(a.a)(b,2),j=p[0],k=p[1];return Object(i.jsxs)(i.Fragment,{children:[u?Object(i.jsx)(Ot,{"data-test-id":"search-card-filters-panel",onClose:function(){return m(!1)}}):null,j?Object(i.jsx)(Kt,{"data-test-id":"search-card-search-panel",onClose:function(){return k(!1)}}):null,Object(i.jsx)("div",{className:"m-bottom-4",children:Object(i.jsx)(It,{"data-test-id":"search-card-search-input"})}),Object(i.jsx)("div",{className:"m-bottom-2",children:Object(i.jsx)(ae,{"data-test-id":"search-card-filters-bar",onFiltersClick:function(){return m(!0)}})}),Object(i.jsx)(d.a,{children:n.data.tickets.slice(0,zt).map(function(e,t){return Object(i.jsx)("span",{children:Object(i.jsx)(Pe,{ticket:e})},t)})}),n.hasNoResults?Object(i.jsx)(ve,{"data-test-id":"search-card-no-tickets-found-message"}):null,n.isLoading?Object(i.jsx)(Lt,{"data-test-id":"search-card-loading-spinner"}):null,n.data.tickets.size>zt||n.data.hasMore?Object(i.jsx)("div",{className:"justify-center m-bottom-2",children:Object(i.jsx)(oe,{"data-test-id":"search-card-more-results-button",onClick:function(){return k(!0)}})}):null,Object(i.jsx)(ge,{"data-test-id":"search-card-powered-by"})]})}function Wt(){return Object(i.jsx)(c.a,{message:"app.title"})}n.d(t,"a",function(){return Qt});n.d(t,"b",function(){return Wt})},rBqy:function(e,t,n){"use strict";n.d(t,"f",function(){return T});n.d(t,"e",function(){return I});n.d(t,"a",function(){return x});n.d(t,"b",function(){return F});n.d(t,"c",function(){return A});n.d(t,"g",function(){return D});n.d(t,"d",function(){return R});var a,i=n("OwGx"),r=n("8ctk"),o=n.n(r),s=n("eVil"),c=n.n(s),d=n("omic"),l=n.n(d),u=n("p6Sd"),m=n.n(u),b=n("VHfn"),p=n.n(b),j=n("aeBh"),k=n("Zwtj"),f=n("Q6fd"),v=n("McP0"),O=n("2IIJ"),y=n("MQNR"),g=n("3vzV"),h=n("lWsH"),S=function(e,t,n){var a=t.value,i=t.source,r=t.sourceId,o=t.timestamp;e[n]={value:a,source:i,sourceId:r,timestamp:o};return e},N=function(e,t){var n=t.name,a=t.value,i=t.source,r=t.sourceId,o=t.timestamp;e[n]={value:a,source:i,sourceId:r,timestamp:o};return e},C=(a={},Object(i.a)(a,y.COMPANY,k.a),Object(i.a)(a,y.CONTACT,j.a),Object(i.a)(a,y.DEAL,f.a),Object(i.a)(a,y.FEEDBACK_SUBMISSION,v.a),Object(i.a)(a,y.TICKET,O.a),a),T=function(e,t){var n,a={};if(t.defaultProperties){var r=p()(["Symbol(id)","__typename"],t.defaultProperties);a=m()(a,S,r)}if(t.favoriteProperties){var s=o()(function(e){return!c()("definition",e)||l()(["definition","deleted"],e)},t.favoriteProperties);a=m()(a,N,s)}return C[e].fromJS((n={},Object(i.a)(n,g.a[e][0],t.id),Object(i.a)(n,"properties",a),n))},I=function(e){return e.reduce(function(e,t){var n=t.definition,a=t.permissions;n&&a&&(e[n.name]=a.readOnlyValue?h.c:h.b);return e},{})},x=function(e){return T(y.COMPANY,e)},F=function(e){return T(y.CONTACT,e)},A=function(e){return T(y.DEAL,e)},D=function(e){return T(y.TICKET,e)},R=function(e){return T(y.FEEDBACK_SUBMISSION,e)}},sszm:function(e,t,n){"use strict";var a=n("vTCD"),i=n("k8Et"),r=n("mNyx"),o=n("txVw"),s=n("pGTB"),c=n("VfuR"),d=n.n(c),l=n("Ktcs"),u=n("QYOI"),m=Object(u.Record)({changes:"",onCancel:void 0,onSave:void 0,errors:"",warnings:""},"UnsavedChangesRecord"),b=n("CFVt"),p=n("VHfn"),j=n.n(p),k=function(e){Object(s.a)(t,e);function t(){var e;Object(a.a)(this,t);(e=Object(r.a)(this,Object(o.a)(t).call(this)))._editableAreaToken=null;return e}Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=j()(["editableAreas"],this.props);this._editableAreaToken=Object(b.b)(this.props.editableAreas,m(e))}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){e.changes===this.props.changes&&e.errors===this.props.errors&&e.onCancel===this.props.onCancel&&e.onSave===this.props.onSave&&e.warnings===this.props.warnings||Object(b.e)(this.props.editableAreas,this._editableAreaToken,m(e))}},{key:"componentWillUnmount",value:function(){Object(b.d)(this.props.editableAreas,this._editableAreaToken)}},{key:"render",value:function(){return this.props.children}}]);return t}(l.Component);k.defaultProps={editableAreas:b.c};k.propTypes={changes:d.a.oneOfType([d.a.string,d.a.bool]),children:d.a.node,errors:d.a.oneOfType([d.a.string,d.a.bool]),onCancel:d.a.func.isRequired,onSave:d.a.func.isRequired,warnings:d.a.oneOfType([d.a.string,d.a.bool]),editableAreas:d.a.object};t.a=k},svxk:function(e,t,n){"use strict";var a,i,r,o=n("OwGx"),s=n("QYOI"),c=n("MQNR"),d=n("Ce6e"),l=(a={},Object(o.a)(a,d.e,"crm-views-all-deals"),Object(o.a)(a,d.f,"crm-views-team-owned-deals"),Object(o.a)(a,d.g,"crm-views-unassigned-deals"),a),u=(i={},Object(o.a)(i,d.e,"crm-views-all-tickets"),Object(o.a)(i,d.f,"crm-views-team-owned-tickets"),Object(o.a)(i,d.g,"crm-views-unassigned-tickets"),i),m=(r={},Object(o.a)(r,d.e,"crm-views-all"),Object(o.a)(r,d.f,"crm-views-team-owned"),Object(o.a)(r,d.g,"crm-views-unassigned"),r),b=function(e){switch(e){case c.DEAL:return l;case c.TICKET:return u;default:return m}},p=function(e,t){return b(e)[t]};t.a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object(s.Set)(),t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Object(s.Set)(),n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[],r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"",o=arguments.length>6?arguments[6]:void 0;s.Iterable.isIterable(e)||""!==r||(r=e);if((s.Iterable.isIterable(e)&&e||s.Set.of(e)).includes(""+a))return!0;if(n[p(o,d.e)])return!0;if(n[p(o,d.g)]&&!r)return!0;if(t.size&&n[p(o,d.f)]){if(t.intersect(i.map(function(e){return""+e})).size)return!0}return!1}},uI75:function(e,t,n){"use strict";var a=n("vTCD"),i=n("k8Et"),r=n("mNyx"),o=n("txVw"),s=n("pGTB"),c=n("QgEn"),d=n("VfuR"),l=n.n(d),u=n("Ktcs"),m=n("uJH4"),b=n("87J0"),p=n("021V"),j=n("JyZI"),k=n("soyi"),f=n("fwDr"),v=n("ju9H"),O=n("QhRM"),y=n("A97v"),g=n("XGA7"),h=n("t6nY"),S=n.n(h),N=n("cWXR"),C=n("vuW9"),T=n("P4dz"),I=n("oWUm"),x=n("leqx"),F=n("eP/i"),A=n("Sx0/"),D=n.n(A),R=n("46u0"),P=n.n(R),E=n("muUi"),_=n("Av5o"),w=n("DqRu"),L=n("sld6"),q=n("7aR2"),M={recordHref:l.a.string,disableRemove:l.a.bool,disablePreview:l.a.bool,isHovering:l.a.bool.isRequired,onRemoveClick:l.a.func.isRequired,onPreviewClick:l.a.func,onTitleClick:l.a.func,subtitle:l.a.oneOfType([l.a.string,l.a.node]),title:l.a.oneOfType([l.a.string.isRequired,l.a.node.isRequired]),objectType:x.a.isRequired,useCompactChicklet:l.a.bool},V={onTitleClick:D.a,isHovering:!1},U=function(e){Object(s.a)(t,e);function t(){Object(a.a)(this,t);return Object(r.a)(this,Object(o.a)(t).apply(this,arguments))}Object(i.a)(t,[{key:"renderRemoveButton",value:function(){return this.props.disableRemove?null:Object(c.jsx)(_.a,{onClick:this.props.onRemoveClick,iconSize:12,size:"xs",useButtonType:"tertiary-light","data-selenium-test":"preview-header--remove-button"})}},{key:"renderPreviewButton",value:function(){var e=this.props.disablePreview;return Object(c.jsx)(q.a,{disabled:!e,placement:"left",children:Object(c.jsx)(w.a,{onClick:this.props.onPreviewClick,use:"tertiary-light",size:"xs","data-selenium-test":"preview-header--preview-button",disabled:e,children:Object(c.jsx)(P.a,{message:"customerDataObjectsUiComponents.Associations.preview"})})})}},{key:"renderButtons",value:function(){return this.props.isHovering&&(this.props.onPreviewClick||this.props.onRemoveClick)?Object(c.jsxs)("div",{style:{position:"absolute",top:"8px",right:"8px",background:F.OLAF},children:[this.props.onPreviewClick&&this.renderPreviewButton(),this.props.onRemoveClick&&this.renderRemoveButton()]}):null}},{key:"renderTitle",value:function(){var e=this.props,t=e.recordHref,n=e.onTitleClick,a=e.subtitle,i=e.title,r=e.objectType,o=e.useCompactChicklet?"p-top-1":"p-top-2";return Object(c.jsxs)(L.a,{className:o,direction:"column",style:{lineHeight:"20px"},children:[Object(c.jsx)(w.a,{href:t,onClick:function(e){n(e)},use:"link","data-selenium-test":(r+"-chicklet-title-link").toLowerCase(),children:i}),a]})}},{key:"render",value:function(){return Object(c.jsxs)("div",{className:"width-100"+(this.props.isHovering?" pointer":""),"data-selenium-test":"preview-header",children:[Object(c.jsx)("div",{className:"flex-grow-1 width-100",style:{wordBreak:"break-word"},children:this.renderTitle()}),this.renderButtons()]})}}]);return t}(E.a);U.propTypes=M;U.defaultProps=V;var B=U,H=n("6dOn"),K=n.n(H),Y=n("6l6v"),z=n.n(Y),Q=n("9f1P"),W=n.n(Q);n.d(t,"a",function(){return Z});var G=98,J=52,Z=W.a.span.withConfig({displayName:"AbstractChicklet__ChickletFieldHeader",componentId:"t1p6ly-0"})(["font-weight:500;&::after{content:' ';}"]),X=function(e){Object(s.a)(t,e);function t(e){var n;Object(a.a)(this,t);(n=Object(r.a)(this,Object(o.a)(t).call(this,e))).handleClick=function(){var e=n.props,t=e.objectType,a=e.onClick,i=e.subject,r=i&&Object(T.a)(i).toString();a&&a(r,t)};n.handleRemoveClick=function(){var e=n.props;(0,e.onRemoveClick)(e.subject)};n.handleMouseEnter=function(){n.setState(function(){return{isDescriptionOpen:!0}})};n.handleMouseLeave=function(){n.handleDebouncedMouseEnter.cancel();n.setState(function(){return{isDescriptionOpen:!1}})};n.state={isDescriptionOpen:!1};n.handleDebouncedMouseEnter=K()(300,n.handleMouseEnter);return n}Object(i.a)(t,[{key:"getTruncatedTitle",value:function(){var e=this.props,t=e.title,n=e.useCompactChicklet;return t?n?this.truncateTextLines(t,J):this.truncateTextLines(t,G):null}},{key:"truncateTextLines",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:144;return e&&e.length>t?Object(c.jsx)(C.a,{title:e,children:Object(c.jsx)("span",{children:e.slice(0,t)+""})}):Object(c.jsx)("span",{children:e})}},{key:"renderTitleText",value:function(){var e=this.props,t=e.recordHref,n=e.onClick,a=e.title,i=this.getTruncatedTitle();return(t||n)&&a?Object(c.jsxs)("div",{className:"p-top-2",style:{lineHeight:"20px"},children:[Object(c.jsx)(O.a,{className:"display-inline-block",href:t,onClick:this.handleClick,children:i}),this.props.subtitle]}):Object(c.jsxs)("span",{className:"display-inline-block p-bottom-2",children:[i,this.props.subtitle]})}},{key:"renderAssociationsAndPriority",value:function(){var e=this.props,t=e.associations,n=e.priority,a=e.useCompactChicklet;if(z()(t)&&!n)return null;var i=t&&t.length>0,r=a?"p-y-0":"p-y-2";return Object(c.jsx)(b.a,{className:r+" p-x-0",children:Object(c.jsxs)(j.a,{align:"center",children:[Object(c.jsx)(p.a,{children:i&&Object(c.jsx)(y.default,{maxAvatars:6,lookup:t,_truncateAvatarListInTooltip:!0,size:"xs"})}),n&&Object(c.jsx)(k.a,{align:"baseline",style:{paddingTop:"2px"},children:n})]})})}},{key:"renderOneLiners",value:function(e,t){return e&&Object(c.jsx)(v.a,{className:"p-all-0 m-all-0",childClassName:"m-all-0 p-all-0","data-selenium-test":t,children:e.map(function(e){return e.props?Object(c.jsx)("span",{children:e},e.key):Object(c.jsx)(f.a,{children:e},e)})})}},{key:"renderDescription",value:function(){var e=this.props.description;return Object(c.jsx)("span",{style:{hyphens:"auto",wordBreak:"break-word"},children:this.truncateTextLines(e)})}},{key:"renderRemoveButton",value:function(){return Object(c.jsx)(_.a,{iconSize:this.props.iconSize,onClick:this.handleRemoveClick})}},{key:"renderHeader",value:function(){var e=this.props,t=e.isEditable,n=e.isPreviewDisabled,a=e.objectType,i=e.oneLinersAboveDescription,r=e.oneLinersBelowDescription,o=e.onExternalClick,s=e.onRemoveClick,d=e.recordHref,l=e.onClick,u=e.subtitle,m=e.useCompactChicklet;return Object(c.jsxs)("div",{children:[Object(c.jsx)(B,{recordHref:d,disableRemove:!s||!t,disablePreview:n,isHovering:this.state.isDescriptionOpen,objectType:a,onPreviewClick:l&&this.handleClick,onRemoveClick:this.handleRemoveClick,onTitleClick:o,title:this.getTruncatedTitle(),subtitle:u,useCompactChicklet:m}),this.renderOneLiners(i,"one-liners-above"),this.renderOneLiners(r,"one-liners-below")]})}},{key:"render",value:function(){var e=this.props,t=e.className,n=e.isBoard,a=e.description,i=e.seleniumSelector,r=e.subject,o=e.onCardClick,s=e.useCompactChicklet,d=s?"m-y-1":"m-y-3",l=s?"p-y-1":"p-y-2",u=S()(l,"p-x-3",t,n?d:"m-bottom-3"),p=a?g.a:"div",j=a?{open:this.state.isDescriptionOpen,style:{maxWidth:310},placement:"right",content:{header:this.renderDescription(),body:Object(c.jsx)("noscript",{})}}:{};return Object(c.jsx)(p,Object.assign({},j,{children:Object(c.jsxs)(m.a,{className:u,"data-selenium-id":Object(T.a)(r),"data-selenium-test":i,onMouseEnter:this.handleDebouncedMouseEnter,onMouseLeave:this.handleMouseLeave,onClick:o,children:[Object(c.jsx)(b.a,{className:"p-all-0",children:this.renderHeader()}),this.renderAssociationsAndPriority()]})}))}}]);return t}(u.Component);X.propTypes={associations:l.a.oneOfType([l.a.object,l.a.array]),className:l.a.string,description:l.a.string,href:l.a.string,iconSize:l.a.oneOfType([l.a.oneOf(Object.keys(N.c)),l.a.number]),isBoard:l.a.bool,isEditable:l.a.bool,isPreviewDisabled:l.a.bool,objectType:x.a.isRequired,onClick:l.a.func,oneLinersAboveDescription:l.a.array,oneLinersBelowDescription:l.a.array,onExternalClick:l.a.func,onCardClick:l.a.func,onRemoveClick:l.a.func,priority:l.a.node,recordHref:l.a.string,seleniumSelector:l.a.string,subject:I.a,subtitle:l.a.node,title:l.a.oneOfType([l.a.node,l.a.string]),useCompactChicklet:l.a.bool};X.defaultProps={associations:[],iconSize:8,isBoard:!0};t.b=X},uaYc:function(e,t,n){"use strict";n.d(t,"a",function(){return v});var a=n("YM6t"),i=n("vTCD"),r=n("k8Et"),o=n("mNyx"),s=n("txVw"),c=n("pGTB"),d=n("QgEn"),l=n("VfuR"),u=n.n(l),m=n("Ktcs"),b=n("hkFy"),p=n("eVil"),j=n.n(p),k=n("mDbF"),f=n.n(k),v=function(e,t){var n=function(n){Object(c.a)(l,n);function l(){var e;Object(i.a)(this,l);(e=Object(o.a)(this,Object(s.a)(l).call(this))).handleAreasChange=function(t){e.setState({areas:t})};e.handleCancel=function(t){e.state.areas.forEach(function(e){var n=e.changes,a=e.onCancel;n&&a(t)})};e.handleSave=function(t){e.state.areas.forEach(function(e){var n=e.changes,a=e.onSave;n&&a(t)})};e.state={areas:b.deref(t)};return e}Object(r.a)(l,[{key:"componentDidMount",value:function(){b.watch(t,this.handleAreasChange)}},{key:"componentWillUnmount",value:function(){b.unwatch(t,this.handleAreasChange)}},{key:"getWatchedAreasByKeyName",value:function(e){return this.state.areas.toSeq().filter(j()(e)).map(j()(e)).toArray()}},{key:"render",value:function(){var t=this.state.areas,n=t.some(function(e){return!!e.changes}),i=t.some(function(e){return!!e.errors});if(!n&&!this.props.alwaysShowSaveBar)return null;var r=f.a.formatList([].concat(Object(a.a)(this.getWatchedAreasByKeyName("changes")),Object(a.a)(this.getWatchedAreasByKeyName("errors")),Object(a.a)(this.getWatchedAreasByKeyName("warnings"))));return Object(d.jsx)(e,Object.assign({},this.props,{hasErrors:i,hasChanges:n,areas:t,formattedChanges:r,handleSave:this.handleSave,handleCancel:this.handleCancel}))}}]);return l}(m.Component);n.defaultProps={alwaysShowSaveBar:!1};n.propTypes={alwaysShowSaveBar:u.a.bool};return n}},wODV:function(e,t,n){"use strict";var a=n("fFSu"),i=n("QgEn"),r=n("xRv3"),o=n("leqx"),s=n("EeNa"),c=n("9hyx"),d=n("R3au"),l=n("WTz7"),u=n("MyjV");function m(e){var t=e.data,n=e.loading,a=e.error,r=e.networkStatus,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"unknown";if(n&&r!==u.NetworkStatus.fetchMore)return Object(i.jsx)(d.a,{});if(a){Object(l.b)(o.toLowerCase()+" card",{message:a.message});return Object(i.jsx)(s.a,{})}if(!n&&0===Object.keys(t||{}).length){Object(l.a)(o.toLowerCase()+" card",{networkStatus:r});return Object(i.jsx)(d.a,{})}return null}var b=n("VfuR"),p=n.n(b);n.d(t,"a",function(){return k});function j(e){var t=e.objectType,n=e.subjectId;return{objectType:t,subjectId:parseInt(n,10)}}var k=function(e,t){var n=t.gqlConfig,d=t.key;if(!n)return e;var l=function(t){var o=n.parse,l=n.query,u=n.getGraphQLQueryVariables,b=void 0===u?j:u,p=t.objectType,k=t.objectId,f=Object(a.a)(t,["objectType","objectId"]);return k&&p&&l?Object(i.jsx)(r.a,{ErrorComponent:s.a,boundaryName:"GraphQLCardQuery_SidebarError",children:Object(i.jsx)(c.Query,{variables:b(t),query:l,partialRefetch:!0,fetchPolicy:"cache-and-network",nextFetchPolicy:"cache-first",children:function(t){var n,a=t.loading,r=t.error,s=t.data,c=t.fetchMore,l=m({loading:a,error:r,data:s,networkStatus:t.networkStatus},d);if(l)return l;a&&0===Object.keys(s||{}).length||(n=o(p,s));return Object(i.jsx)(e,Object.assign({objectType:p,objectId:k,subjectId:k},f,{},n,{isLoaded:!a,fetchMore:c}))}})}):null};l.propTypes={objectId:p.a.string.isRequired,objectType:o.a.isRequired};return l}},xlGk:function(e,t,n){"use strict";n.r(t);var a=n("YM6t"),i=n("fzi9"),r=n("QgEn"),o=n("Ktcs"),s=n("VfuR"),c=n.n(s),d=n("QYOI"),l=n("LljG"),u=n.n(l),m=n("iDkV"),b=n.n(m),p=n("eVil"),j=n.n(p),k=n("omic"),f=n.n(k),v=n("vTCD"),O=n("k8Et"),y=n("mNyx"),g=n("txVw"),h=n("pGTB"),S=n("fFSu"),N=n("t6nY"),C=n.n(N),T=n("lS0L");function I(e){var t=e.className,n=e.children,a=Object(S.a)(e,["className","children"]),i=C()(t,"private-floating-form");return Object(r.jsx)(T.a,Object.assign({className:i},a,{children:n}))}I.propTypes={children:c.a.node.isRequired};I.displayName="UIFloatingForm";var x=n("B0Kw"),F=n("P4dz"),A=n("tPYf"),D=n("Sebf"),R=n("udif"),P=n("Sx0/"),E=n.n(P),_=n("mDbF"),w=n.n(_),L=n("jqvl"),q=n.n(L),M=n("46u0"),V=n.n(M),U=n("DqRu"),B=n("MeD8"),H=n("vuW9"),K=n("r1tY"),Y=n("eP/i"),z=n("VsTq"),Q=n("3Yd4"),W=n("B1aM"),G=n("fwDr");function J(e){var t=e.children,n=e.className,a=e.floatActive,i=e.sibling,o=e.tooltip,s=e.tooltipProps,c=Object(S.a)(e,["children","className","floatActive","sibling","tooltip","tooltipProps"]),d=C()(n,"private-form__label--floating",!a&&"private-form__label--floating-as-placeholder");return o?Object(r.jsx)(W.a,Object.assign({},c,{className:d,children:Object(r.jsx)(H.a,Object.assign({},s,{title:o,children:Object(r.jsx)(G.a,{useFlex:!0,fixedChildren:i,tooltip:!1,children:t})}))})):Object(r.jsx)(W.a,Object.assign({},c,{className:d,children:Object(r.jsx)(G.a,{useFlex:!0,fixedChildren:i,children:t})}))}J.propTypes=Object.assign({},W.a.propTypes,{children:c.a.node.isRequired,floatActive:c.a.bool.isRequired,sibling:c.a.node,tooltip:c.a.node,tooltipProps:c.a.object});J.defaultProps=Object.assign({},W.a.defaultProps,{floatActive:!1});J.displayName="UIFloatingFormLabel";var Z=n("z8qM"),X=n("LEwt"),$=n("REBV"),ee=n("vwR9"),te=n("geqf"),ne=n("/HxV"),ae=n("R/fd"),ie=function(e){return Object(r.jsx)(X.a,Object.assign({},e,{hidden:!0}))},re=function(e){return o.Children.only(e.children).props},oe=function(e){var t=o.Children.only(e).props;return!(!t.placeholder&&!t.format)},se=function(e){Object(h.a)(t,e);function t(e){var n;Object(v.a)(this,t);(n=Object(y.a)(this,Object(g.a)(t).call(this,e))).updateHasClosedDropdown=function(){if(n._isMounted){var e=!!n._el.querySelector('[data-dropdown-open="false"]');n.state.hasClosedDropdown!==e&&n.setState({hasClosedDropdown:e})}};n.handleInputChange=function(e){n.setState({inputValue:e.target.value})};n.handleLabelOnMouseDown=function(e){n.props.focused&&e.preventDefault()};n.handleOverlayBlur=function(){n.setState({overlayHasFocus:!1})};n.handleOverlayFocus=function(){n.setState({overlayHasFocus:!0})};n.handleEditIconClick=function(e){if(n._inputRef&&"function"==typeof n._inputRef.focus){e.stopPropagation();n._inputRef.focus()}};n.state={hasClosedDropdown:!1,inputId:"",inputValue:re(e).defaultValue,overlayHasFocus:!1};return n}Object(O.a)(t,[{key:"componentDidMount",value:function(){this._isMounted=!0;this._el=Object(K.findDOMNode)(this);if(this._el){this.updateHasClosedDropdown();this.startMutationObserver()}}},{key:"componentWillUnmount",value:function(){this._isMounted=!1;this.stopMutationObserver()}},{key:"startMutationObserver",value:function(){if(this._el){this._observer=new MutationObserver(this.updateHasClosedDropdown);this._observer.observe(this._el,{attributes:!0,subtree:!0})}}},{key:"stopMutationObserver",value:function(){if(this._observer){this._observer.disconnect();this._observer=null}}},{key:"renderClonedInput",value:function(e,n,a,i,r,s,c,d,l,u){var m=this,b=o.Children.only(e),p=b.props,j=null==p.readOnly?l:p.readOnly,k=null==p.required?u:p.required,f={className:C()(p.className,"private-form__control--inline",r&&!c&&"private-form__control--inline--show-placeholder"),id:d,error:n,readOnly:j,required:k,"aria-required":k,onChange:Object(z.b)(this.handleInputChange,p.onChange),ref:function(e){m._inputRef=e}};!i||a||s||(f.caretRenderer=ie);Object(ae.a)(b,t.displayName);return Object(o.cloneElement)(b,f)}},{key:"render",value:function(){var e=this,t=this.props,n=t.children,a=t.className,i=t.error,o=(t.focused,t.hideEditIcon),s=t.htmlFor,c=t.isStatic,d=t.label,l=t.labelProps,u=t.overlayContent,m=t.readOnly,b=t.required,p=t.validationMessage,j=Object(S.a)(t,["children","className","error","focused","hideEditIcon","htmlFor","isStatic","label","labelProps","overlayContent","readOnly","required","validationMessage"]),k=this.state,f=k.hasClosedDropdown,v=k.inputId,O=k.inputValue,y=k.overlayHasFocus;return Object(r.jsx)(te.a,Object.assign({},this.props,{children:function(t){return Object(r.jsx)(ee.a,Object.assign({},e.props,{children:function(k){var g=k.focused,h=Object(S.a)(k,["focused"]),N=t.hovered,T=Object(S.a)(t,["hovered"]),I=s||v,x=C()("private-form__set private-form__set--floating",a,i&&"private-form__set--error",g&&"private-form__set--floating--focused"),F=oe(n),A=Boolean(Array.isArray(O)?O.length:O),D=d&&Object(r.jsx)(J,Object.assign({},l,{floatActive:N||g||A||F||c,error:i,htmlFor:I,onMouseDown:e.handleLabelOnMouseDown,readOnly:m,required:b,children:d})),R=c?Object(r.jsx)("div",{className:"private-form__control-floating__static-input-wrapper",children:n}):e.renderClonedInput(n,i,g,f,F,N,A,v,m,b);return Object(r.jsxs)("div",Object.assign({className:x},j,{},h,{},T,{children:[D,R,(u||!o)&&Object(r.jsxs)("div",{className:C()("private-form__control__overlay",y?"private-form__control__overlay--visible":g&&"private-form__control__overlay--hidden"),onFocus:e.handleOverlayFocus,onBlur:e.handleOverlayBlur,children:[o||m?null:Object(r.jsx)(Q.a,{className:"private-form__control-floating__edit-icon",color:Y.CALYPSO,name:"edit",onClick:e.handleEditIconClick,size:12}),u]}),p&&Object(r.jsx)("div",{className:"private-form__validation-wrapper",children:Object(r.jsx)(Z.a,{className:"private-form__validation",use:i?"error":"success",children:p})})]}))}}))}}))}}],[{key:"getDerivedStateFromProps",value:function(e,t){var n=re(e),a=n.id,i=n.value;return Object.assign({},t,{inputId:a||t.inputId||Object(ne.d)("floating-input-"),inputValue:void 0!==i?i:t.inputValue})}}]);return t}(o.Component);se.propTypes={children:c.a.node.isRequired,error:c.a.bool,focused:Object($.a)(c.a.bool),hideEditIcon:c.a.bool.isRequired,htmlFor:c.a.string,isStatic:c.a.bool.isRequired,overlayContent:c.a.node,label:c.a.node,labelProps:c.a.object,readOnly:c.a.bool,required:c.a.bool,validationMessage:c.a.node};se.defaultProps={error:!1,hideEditIcon:!1,isStatic:!1};se.displayName="UIFloatingFormControl";se.hiddenCaretRenderer=ie;var ce=n("ULa3"),de=n("D4Zn"),le=n("2RhA"),ue=n("1RCs"),me=n("yCKa"),be=n.n(me),pe=n("t81I");function je(e){return void 0!==e&&e.source===ue.a}var ke=n("MQNR"),fe=n("2IJn"),ve=n("Iq5V"),Oe=n("GTTy"),ye=n("kZyb"),ge=n("9f1P"),he=n.n(ge).a.div.withConfig({displayName:"RecentPropertyChangeWarning__StyledDiv",componentId:"sc-1szjhl9-0"})(["margin-top:-6px;"]),Se=function(e){switch(e){case ue.b:return"customerDataSidebar.aboutCard.recentPropertyChangeWarning.BOT";case ue.d:return"customerDataSidebar.aboutCard.recentPropertyChangeWarning.CONVERSATIONS";case ue.g:return"customerDataSidebar.aboutCard.recentPropertyChangeWarning.FORM";default:return"customerDataSidebar.aboutCard.recentPropertyChangeWarning.default"}},Ne=function(e){var t=e.value,n=e.source,a=Se(n);return Object(r.jsx)(he,{children:Object(r.jsxs)(ye.a,{use:"help",children:[Object(r.jsx)(Oe.a,{use:"warning"}),Object(r.jsx)(V.a,{message:a,options:{value:t}})]})})};Ne.propTypes={value:c.a.string.isRequired,source:c.a.string.isRequired};var Ce=Object(o.memo)(Ne),Te=n("lWsH"),Ie=n("ll3n"),xe=3e5,Fe=864e5,Ae=[ue.b,ue.d,ue.g],De={isKnownGuid:pe.b,getGuidLabel:pe.a},Re=new be.a({newWindow:!0,twitter:!1}),Pe=function(e){return["email","phone"].includes(e)?"_self":"_blank"},Ee=function(e){if("string"!=typeof e)return[];e=e.replace(/</g,"&lt;");return Object(d.Seq)(Re.parse(e)).map(function(e){return{href:e.getAnchorHref(),target:Pe(e.getType())}}).first()};function _e(e){var t=window.requestIdleCallback||window.setTimeout;t(e,t===window.requestIdleCallback?{timeout:5e3}:0)}var we=function(e){Object(h.a)(t,e);function t(e){var n;Object(v.a)(this,t);(n=Object(y.a)(this,Object(g.a)(t).call(this,e))).handleUpdateTooltipPlacement=function(){if(n._isMounted&&n.propertyLabelEl){var e="top";n.propertyLabelEl.getBoundingClientRect().left<95&&(e="top right");n.setState({tooltipPlacement:e})}};n.handleChange=function(e){var t=e.target.value,a=n.props;(0,a.onChange)(a.property.get("name"),t)};n.handleTracking=function(e){Object(fe.d)(ve.b,{action:e})};n._isMounted=!1;n.now=Date.now();n.state={linkProps:n.getLinkProps(e.property,e.value),tooltipPlacement:"top",renderTooltips:!1};return n}Object(O.a)(t,[{key:"componentDidMount",value:function(){var e=this;this._isMounted=!0;window.addEventListener("resize",this.handleUpdateTooltipPlacement);_e(function(){e._isMounted&&e.setState({renderTooltips:!0},e.handleUpdateTooltipPlacement)})}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=e.property,n=e.value;n===this.props.value&&t===this.props.property||this.setState({linkProps:this.getLinkProps(t,n)})}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.handleUpdateTooltipPlacement);this._isMounted=!1}},{key:"getLinkifiers",value:function(){var e=this.props.objectType;return{twitterhandle:function(e){return{href:"https://twitter.com/"+e,target:"_blank"}},email:function(t){return{onClick:function(){e===ke.CONTACT&&Object(fe.b)(ve.b,{type:ke.CONTACT})},href:"mailto:"+t,target:"_self"}},phone:function(e){return{href:"tel:"+e,target:"_self"}},mobilephone:function(e){return this.phone.call(this,e)}}}},{key:"getIsBiden",value:function(){var e=this.props,t=e.objectType,n=e.property,a=e.subject,i=Object(F.e)(a,n.get("name"));return t===ke.COMPANY&&je(i)}},{key:"getValue",value:function(){var e=this.props,t=e.property,n=e.value;return"email"===t.get("name")&&t.get("hubspotDefined")?n||" ":void 0!==n&&null!==n||"number"===t.type?n:""}},{key:"getLinkProps",value:function(e,t){var n=e.get("name"),a=this.getLinkifiers();return t?Object.prototype.hasOwnProperty.call(a,n)?a[n](t):Ee(t):null}},{key:"renderCompanyInsightsLabel",value:function(e){return Object(r.jsxs)("span",{children:[e,Object(r.jsx)(B.a,{className:"m-left-1 sprocket",tooltipProps:{placement:this.state.tooltipPlacement},title:Object(r.jsx)(q.a,{message:"customerDataSidebar.aboutCard.insightsTooltip"})})]})}},{key:"renderLabelDescription",value:function(){var e=this.props.property,t=e.get("description");if(!t)return null;var n=Object(ce.a)(e);return Object(r.jsxs)("div",{children:[Object(r.jsx)("strong",{children:n}),Object(r.jsx)("p",{className:"m-all-0",children:t})]})}},{key:"renderLabel",value:function(){var e=this,t=this.props.property,n=this.renderLabelDescription(),a=Object(ce.a)(t),i=n&&this.state.renderTooltips&&this.props.showTooltips?Object(r.jsx)(H.a,{title:n,placement:this.state.tooltipPlacement,children:Object(r.jsx)("span",{ref:function(t){e.propertyLabelEl=t},children:a})}):a;return this.getIsBiden()?this.renderCompanyInsightsLabel(i):i}},{key:"renderLink",value:function(){var e=this.state.linkProps;return e?Object(r.jsx)(U.a,Object.assign({use:"link"},e,{children:Object(r.jsx)(Q.a,{name:"externalLink",color:Y.CALYPSO})}),"link"):null}},{key:"renderHistory",value:function(){var e=this.props,t=e.onShowHistory,n=e.property,a=e.showTooltips,i=e.objectType,o=e.subjectId;if(!t)return null;var s=n.get("name");return Object(r.jsx)(U.a,{onClick:Object(Ie.a)(t,{objectType:i,subjectId:o,property:n}),size:"extra-small",title:w.a.text("customerDataSidebar.aboutCard.profileHistoryLink"),use:"tertiary-light","data-selenium-test":"show-property-history__"+s,children:a?Object(r.jsx)(q.a,{message:"customerDataSidebar.aboutCard.seeHistory"}):Object(r.jsx)(q.a,{message:"customerDataSidebar.aboutCard.details"})},"history")}},{key:"renderRecentPropertyChangeWarning",value:function(e){var t=this.props,n=t.objectType,a=t.subject,i=e.name;if(n!==ke.CONTACT||"email"!==i)return null;var o=Object(F.e)(a,i);if(!o)return null;var s=o.value,c=o.source,d=o.timestamp,l=Object(F.e)(a,"createdate");return!c||!d||!Ae.includes(c)||this.now-d>Fe||l&&d-parseInt(l.value,10)<=xe?null:Object(r.jsx)(Ce,{value:s,source:c})}},{key:"render",value:function(){var e,t=this.props,n=t.actions,a=t.objectType,i=t.onPipelineChange,s=t.onSecondaryChange,c=t.property,d=t.subject,l=t.subjectId,u=t.permission,m=t.getSecondaryPropertyValue,b=t.propertyDependencies,p=u===Te.b,j=this.props.readOnly||Object(de.n)(c)||!p,k=C()(j&&"read-only",!this.getValue()&&"has-placeholder");(c.get("readOnlyValue")||j)&&(e="--");var f=!p&&{sibling:Object(r.jsx)(Q.a,{name:"block",className:"p-left-1",color:Y.EERIE}),tooltip:Object(r.jsx)(V.a,{message:"universalSidebar.permissions.READ_ONLY"})};return Object(r.jsxs)(o.Fragment,{children:[Object(r.jsx)(se,{className:k,hideEditIcon:j,label:this.renderLabel(),labelProps:Object.assign({},f,{tooltipProps:{placement:"top right"}}),overlayContent:[this.renderLink(),this.renderHistory()],readOnly:j,children:Object(r.jsx)(R.a,{actions:n,isInline:!1,objectType:a,onChange:this.handleChange,onPipelineChange:i,onSecondaryChange:s,onTracking:this.handleTracking,placeholder:e,property:c,readOnly:j,readOnlySourceData:De,showPlaceholder:!!e,subject:d,subjectId:l,getSecondaryPropertyValue:m,value:this.getValue(),propertyDependencies:b})}),this.renderRecentPropertyChangeWarning(c)]})}}]);return t}(o.PureComponent);we.defaultProps={onChange:E.a,showTooltips:!0,permission:Te.b};we.propTypes={actions:c.a.instanceOf(d.Map),permission:c.a.oneOf([Te.b,Te.c,Te.a]).isRequired,showTooltips:c.a.bool,objectType:A.b.isRequired,onChange:c.a.func,onPipelineChange:c.a.func,onSecondaryChange:c.a.func,onShowHistory:c.a.func,property:c.a.instanceOf(le.a).isRequired,readOnly:c.a.bool,subject:A.a.isRequired,subjectId:c.a.string,value:c.a.any,getSecondaryPropertyValue:c.a.func,propertyDependencies:c.a.object};var Le=we,qe=n("xqzv"),Me=n("E7+s"),Ve=n("xRv3"),Ue=n("rWb3"),Be=n("47ul"),He=n.n(Be),Ke=n("QhRM");function Ye(e){var t=e.propertyLabel;return Object(r.jsx)(Ue.a,{className:"m-bottom-2",type:"danger",children:Object(r.jsx)(He.a,{message:"customerDataSidebar.sidebarPropertyError_jsx",options:{propertyLabel:t,href:window.location.href},elements:{Link:Ke.a}})})}var ze=function(e){Object(h.a)(t,e);function t(){var e,n;Object(v.a)(this,t);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];(n=Object(y.a)(this,(e=Object(g.a)(t)).call.apply(e,[this].concat(i)))).resolvePropValue=function(e){var t=n.props.getDraftProperty(e);return void 0!==t?t:Object(F.d)(n.props.subject,e)};n.renderProperty=function(e){var t=n.props,a=t.actions,i=t.getPropertyPermission,o=void 0===i?function(){return Te.b}:i,s=t.showTooltips,c=t.objectType,d=t.onChange,l=t.onPipelineChange,u=t.onSecondaryChange,m=t.onShowPropertyHistory,b=t.readOnly,p=t.readOnlyProperties,j=void 0===p?[]:p,k=t.subject,f=t.subjectId,v=t.tracker,O=e.get("name"),y=Object(R.b)(e,c,f,k,b,n.resolvePropValue);return Object(r.jsx)(Ve.a,{boundaryName:"FloatingForm_SidebarPropertyError",ErrorComponent:Ye,errorProps:{propertyLabel:Object(ce.a)(e)},children:Object(r.jsx)(Le,{"data-unit-test":"property-name-"+O,actions:a,showTooltips:s,objectType:c,onChange:d,onSecondaryChange:u,onShowHistory:m,property:e,readOnly:b||j.includes(O),permission:o(O),subject:k,subjectId:f,tracker:v,onPipelineChange:l,getSecondaryPropertyValue:n.resolvePropValue,propertyDependencies:y,value:n.resolvePropValue(O)})},f+"-"+O)};return n}Object(O.a)(t,[{key:"render",value:function(){var e=this.props,t=e.isLoaded,n=e.onSave,a=e.properties,i=e.subject,o=t||!Object(Me.d)(a,i)?"reagan-test-"+qe.a.ABOUT:"";return Object(r.jsxs)(I,{className:o,"data-selenium-test":"profile-properties",onSubmit:n,children:[a.map(this.renderProperty),Object(r.jsx)("input",{className:"hidden",type:"submit"})]})}}]);return t}(o.Component);ze.propTypes={actions:c.a.instanceOf(d.Map),isLoaded:c.a.bool,objectType:A.b.isRequired,onPipelineChange:c.a.func,onShowPropertyHistory:c.a.func,properties:c.a.oneOfType([c.a.instanceOf(d.List),c.a.array]).isRequired,getPropertyPermission:c.a.func.isRequired,readOnly:c.a.bool,readOnlyProperties:c.a.arrayOf(c.a.string.isRequired),subject:A.a,subjectId:c.a.string.isRequired,tracker:c.a.object,getDraftProperty:c.a.func.isRequired,showTooltips:c.a.bool,onChange:c.a.func,onSecondaryChange:c.a.func,onSave:c.a.func};var Qe=Object(x.a)(Object(D.b)())(ze,{mergeResolvers:!0}),We=n("sszm"),Ge=n("3zLH"),Je=n("eUxV"),Ze=n("Thgt"),Xe=n("ThQy"),$e=n("lv1D"),et=n("cqEQ"),tt=n("HZCd"),nt=n("MyjV"),at=n("dW5E"),it="email",rt="hs_additional_emails",ot=function(e,t){return{name:t,value:f()(["data","updateResponse","updatedObject","defaultProperties",t,"value"],e)}},st=function(e){return f()(["data","updateResponse","userErrors"],e)||[]},ct=function(e){var t=function(t){var n=t.onSave,a=t.objectId,i=t.objectType,s=t.updateSecondaryEmail,c=t.promoteSecondaryEmail,l=t.deleteSecondaryEmail,u=t.createSecondaryEmail,m=t.updateAnyProperties,b=Object(S.a)(t,["onSave","objectId","objectType","updateSecondaryEmail","promoteSecondaryEmail","deleteSecondaryEmail","createSecondaryEmail","updateAnyProperties"]),p=Object(o.useContext)($e.a),j=Object(o.useContext)(tt.a).onObjectUpdate,k=Object(o.useCallback)(function(e){if("function"==typeof j){var t=e.reduce(function(e,t){var n=t.name,a=t.value;return e.set(n,a)},Object(d.Map)());j({objectType:i,objectId:a,properties:t})}},[j,i,a]),f=function(e){var t=e.map(function(e,t){return{name:t,value:e}}).toArray();m({variables:{propertyUpdatesInput:{objectType:i,objectId:a,propertySourceInfo:p,properties:t}},update:function(e,n){st(n).length?Object(Ze.a)({mutationFailed:!0}):k(t)}})},v=function(e,t){f(t)},O=function(e,t,n){return s({variables:{updateEmailInput:{objectId:a,propertySourceInfo:p,newSecondaryEmailAddress:n,oldSecondaryEmailAddress:t}},update:function(e,t){st(t).length?Object(Ze.a)({mutationFailed:!0}):k([ot(t,rt)])}})},y=function(e,t){return l({variables:{deleteEmailInput:{objectId:a,propertySourceInfo:p,secondaryEmailAddress:t}},update:function(e,t){st(t).length?Object(Ze.a)({mutationFailed:!0}):k([ot(t,rt)])}})},g=function(e,t){return c({variables:{promoteEmailInput:{objectId:a,propertySourceInfo:p,secondaryEmailAddress:t}},update:function(e,t){st(t).length?Object(Ze.a)({mutationFailed:!0}):k([ot(t,it),ot(t,rt)])}})},h=function(e,t){return u({variables:{createEmailInput:{objectId:a,propertySourceInfo:p,secondaryEmailAddress:t}},update:function(e,t){st(t).length?Object(Ze.a)({mutationFailed:!0}):k([ot(t,rt)])}})},N=Object(d.Map)({email:{updateSecondaryEmail:O,addSecondaryEmail:h,deleteSecondaryEmail:y,promoteEmailToPrimary:g,updateContactProperties:v},hs_pipeline:{onPipelineChange:v},pipeline:{onPipelineChange:v},phone:{updatePropertiesAction:v}});return Object(r.jsx)(e,Object.assign({actions:N,onSave:n,objectId:a,objectType:i},b))};t.propTypes={objectId:c.a.string.isRequired,onSave:c.a.func,updateSecondaryEmail:c.a.func.isRequired,promoteSecondaryEmail:c.a.func.isRequired,deleteSecondaryEmail:c.a.func.isRequired,createSecondaryEmail:c.a.func.isRequired,updateAnyProperties:c.a.func.isRequired,objectType:A.b.isRequired};t.displayName="PropertiesCardActions";return function(e){var n=Object(nt.useMutation)(at.e),a=Object(i.a)(n,1)[0],o=Object(nt.useMutation)(at.f),s=Object(i.a)(o,1)[0],c=Object(nt.useMutation)(at.a),d=Object(i.a)(c,1)[0],l=Object(nt.useMutation)(at.b),u=Object(i.a)(l,1)[0],m=Object(nt.useMutation)(at.d),b=Object(i.a)(m,1)[0];return Object(r.jsx)(t,Object.assign({},e,{updateAnyProperties:a,updateSecondaryEmail:s,createSecondaryEmail:d,deleteSecondaryEmail:u,promoteSecondaryEmail:b}))}},dt=n("lKVG"),lt=n("leqx"),ut=n("XDj/"),mt=function(e){var t=e.objectType,n=e.objectId;return Object(ut.a)({objectType:t,objectId:n})+"/properties"},bt=function(e){var t=e.objectType,n=e.objectId;return Object(ut.a)({objectType:t,objectId:n})+"/history"},pt=function(e){var t=e.objectType,n=e.objectId,a=mt({objectType:t,objectId:n}),i=bt({objectType:t,objectId:n}),o=Object(r.jsx)(U.a,{"data-selenium-test":"all-properties-button",className:"force-external-navigation",use:"tertiary-light",size:"small",href:a,children:Object(r.jsx)(V.a,{message:"universalSidebar.cards.PropertiesCardContent.allPropertiesButton"})}),s=Object(r.jsx)(U.a,{"data-selenium-test":"property-history-button",use:"tertiary-light",size:"small",href:i,children:Object(r.jsx)(V.a,{message:"universalSidebar.cards.PropertiesCardContent.propertyHistoryButton"})});return a||i?Object(r.jsxs)("div",{className:"flex-row justify-center",children:[a&&o,i&&s]}):null};pt.propTypes={objectType:c.a.oneOfType([dt.a,lt.a]).isRequired,objectId:c.a.string.isRequired};var jt=pt,kt=n("NEfq"),ft=n("d0QT"),vt=n("6L7K"),Ot=n("DNdP"),yt=n("6CQU"),gt=n("MDyi"),ht=n("TMcE"),St=function(e,t){return(t===Je.c||t===ke.CONTACT)&&"email"===e.name&&e.hubspotDefined},Nt=function(e,t){return e.filter(function(e){return Object(de.c)(e)||St(e,t)}).map(function(e){return e.name})};n.d(t,"DEFAULT_ABOUT_PROPERTIES_CARD_ID",function(){return Ct});n.d(t,"trackPropertiesSave",function(){return xt});n.d(t,"transformDependentProperties",function(){return Ft});var Ct="0",Tt={PIPELINE_ALREADY_SET:"universalSidebar.cards.PropertiesCardContent.betUpdatePropertiesErrors.pipelineAlreadySet",INVALID_PROPERTY_VALUE_CHANGE_ON_CLOSED_DEAL:"universalSidebar.cards.PropertiesCardContent.betUpdatePropertiesErrors.invalidPropertyValueChangeOnClosedDeal",NAME_CHANGE_OF_ACTIVE_COMPANY:"universalSidebar.cards.PropertiesCardContent.betUpdatePropertiesErrors.nameChangeOfActiveCompany",INVALID_PROPERTY_VALUE:"universalSidebar.alertHelpers.addMutationResultAlert.mutationFailedInvalidProperties"},It=function(e){return Je.j[e]||e},xt=function(e){var t=e.objectId,n=e.draft,a=e.objectType,i=j()(t,n)||Object(d.Map)(),r={};i.has("dealstage")&&(r.type="Deal Stage");r.objectType=It(a);Object(Ot.a)(i,r)},Ft=function(e){return Object.keys(e).map(function(t){return{propertyValue:e[t],__typename:"PropertyCardEntry"}})},At=function(e){return e.map(function(e,t){return{name:t,value:e}}).toArray()},Dt=function(e){switch(e){case ke.DEAL:return"dealstage";case ke.TICKET:return"hs_pipeline_stage";default:return null}},Rt=function(e){var t=e.actions,n=e.data,s=e.isEditable,c=e.objectType,l=e.objectId,u=e.onChange,m=e.onSaveError,p=e.onSaveSuccess,k=e.showFooterButtons,v=void 0!==k&&k,O=e.onShowPropertyHistory,y=Object(o.useContext)(tt.a).onObjectUpdate,g=Object(o.useContext)(ft.a).getPropertyPermission,h=Object(Xe.b)(),S=Object(ht.b)(),N=Object(o.useState)(Object(d.Map)()),C=Object(i.a)(N,2),T=C[0],I=C[1],x=Object(o.useState)(!0),A=Object(i.a)(x,2),D=A[0],R=A[1],P=Object(o.useState)(!1),E=Object(i.a)(P,2),_=E[0],L=E[1],q=Object(o.useState)(gt.d),M=Object(i.a)(q,2),V=M[0],U=M[1],B=Object(o.useContext)($e.a),H=Object(o.useContext)(vt.a).primaryDisplayLabel,K=Object(o.useMemo)(function(){var e=n.propertyCardEntries||[],t=[];[ke.CONTACT,ke.COMPANY,ke.DEAL,ke.TICKET].includes(c)&&(t=Ft(f()(["crmObject","defaultProperties"],n)||[]));var i=[].concat(Object(a.a)(e),Object(a.a)(t));return Object(Ge.d)(c,i.map(function(e){return e.propertyValue}),l)},[n,l,c]),Y=Object(o.useMemo)(function(){return Object(Ge.b)(n.propertyCardEntries||[])},[n.propertyCardEntries]),z=Object(o.useCallback)(function(e){var t=Tt[e];U(gt.a);"function"==typeof m&&m();return t?Object(Ze.a)({messageKey:t,mutationFailed:!0,type:"danger"}):Object(Ze.a)({mutationFailed:!0})},[m]),Q=Object(o.useCallback)(function(){Object(Ze.a)({mutationFailed:!1});U(gt.c);"function"==typeof p&&p();"function"==typeof y&&y({objectType:c,objectId:l,properties:T.get(l)});_&&I(T.delete(l));xt({objectId:l,draft:T,objectType:c})},[l,T,I,_,c,p,y]),W=Object(o.useCallback)(function(){_&&R(!0)},[_,R]),G=Object(et.a)({objectType:c,objectId:l,propertySourceInfo:B,onError:z,onSuccess:Q,onCompleted:W});Object(o.useEffect)(function(){L(!0)});Object(o.useEffect)(function(){u&&u(T)},[T,u]);var J=Object(o.useCallback)(function(e){R(!1);G(At(e))},[R,G]),Z=Object(o.useCallback)(function(e){U(gt.b);R(!1);var t=j()(l,T)||Object(d.Map)();e.forEach(function(e){t.has(e.name)&&(t=t.delete(e.name))});G([].concat(Object(a.a)(e),Object(a.a)(At(t))))},[G,l,T]),X=Object(yt.a)({stageChangeStatus:V,stagePropertyName:Dt(c),objectId:+l,objectLabel:H,objectTypeId:Je.k[c]||c,onConfirm:Z,pendingChanges:j()(l,T)?j()(l,T).toJS():{},subject:K}),$=Object(i.a)(X,2),ee=$[0],te=$[1],ne=Object(o.useCallback)(function(){var e=j()(l,T)||Object(d.Map)();return e.isEmpty()?null:w.a.text("customerDataSidebar.changeDescriptions.GENERIC",{count:e.count()})},[l,T]),ae=Object(o.useCallback)(function(){I(T.delete(l))},[l,T]),ie=Object(o.useCallback)(function(){var e=j()(l,T)||Object(d.Map)();U(gt.d);if(c===ke.DEAL||c===ke.TICKET){var t=e.get(Dt(c));if(t){te(t);return}}J(e)},[l,c,T,te,J]),re=Object(o.useCallback)(function(e){ie();e.preventDefault()},[ie]),oe=Object(o.useCallback)(function(e,t){Object(F.d)(K,e)===t?I(function(t){return t.deleteIn([l,e])}):I(function(n){return b()([l,e],t,n)})},[K,l]),se=Object(o.useCallback)(function(e){e.forEach(function(e,t){oe(t,e)})},[oe]),ce=Object(o.useCallback)(function(e){if(!T.isEmpty())return T.getIn([l,e])},[l,T]),de=Object(o.useMemo)(function(){return S?Nt(Y,c):[]},[S,Y,c]);return Y.length?Object(r.jsxs)("div",{"data-save-complete":D,"data-properties-card-id":n.cardId,"data-selenium-test":"properties-card-content",children:[ee,Object(r.jsxs)(We.a,{changes:ne(),onCancel:ae,onSave:re,editableAreas:h,children:[Object(r.jsx)(Qe,{getDraftProperty:ce,isLoaded:!0,objectType:c,properties:Y,getPropertyPermission:g,subject:K,subjectId:l,onPipelineChange:se,onChange:oe,onSecondaryChange:oe,onSave:re,showTooltips:!1,readOnly:!s,readOnlyProperties:de,onShowPropertyHistory:O,actions:t,_rawDraft:T}),v&&n.cardId===Ct&&c!==Je.n&&Object(r.jsx)(jt,{objectType:c,objectId:l})]})]}):null};Rt.propTypes={actions:c.a.object.isRequired,data:c.a.shape({cardId:c.a.string.isRequired,propertyCardEntries:c.a.arrayOf(kt.a)}).isRequired,objectType:c.a.string.isRequired,objectId:c.a.string.isRequired,isEditable:c.a.bool.isRequired,showFooterButtons:c.a.bool,onChange:c.a.func,onSaveError:c.a.func,onSaveSuccess:c.a.func,onShowPropertyHistory:c.a.func};t.default=u()(ct)(Rt)},xqzv:function(e,t,n){"use strict";var a=n("aORY"),i=n.n(a)()({COMPANIES:null,CONTACTS:null,DEALS:null,FEEDBACK:null,TASKS:null,TICKETS:null,RELATED_COMPANIES:null,RELATED_CONTACTS:null}),r="ABOUT",o="CONVERSATION_DEALS";t.a=Object.assign({},i,{ABOUT:r,CONVERSATION_DEALS:o})}}]);
//# sourceMappingURL=contextual-sidebar-container.js.map